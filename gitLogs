[33mcommit 265b3faa3135399bd71a65530ffac57e98837c31[m[33m ([m[1;36mHEAD -> [m[1;32mtestMqtt[m[33m, [m[1;31morigin/master[m[33m, [m[1;32mmaster[m[33m)[m
Author: gv211432 <gv211432@gmail.com>
Date:   Wed May 26 17:45:08 2021 +0530

    This contains the time and alarm functions

[1mdiff --git a/Documents/TaskScheduler.png b/Documents/TaskScheduler.png[m
[1mnew file mode 100644[m
[1mindex 0000000..febb8c7[m
Binary files /dev/null and b/Documents/TaskScheduler.png differ
[1mdiff --git a/Documents/TaskScheduler.wiki b/Documents/TaskScheduler.wiki[m
[1mnew file mode 160000[m
[1mindex 0000000..24b59c3[m
[1m--- /dev/null[m
[1m+++ b/Documents/TaskScheduler.wiki[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mSubproject commit 24b59c3b355cb20bbbedb1b6f3c65caccb42ef72[m
[1mdiff --git a/Documents/taskSchedular.txt b/Documents/taskSchedular.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..1a89e79[m
[1m--- /dev/null[m
[1m+++ b/Documents/taskSchedular.txt[m
[36m@@ -0,0 +1,1859 @@[m
[32m+[m
[32m+[m[32m‚ï∫‚î≥‚ï∏‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚ïª‚îè    ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚ïª ‚ïª‚îè‚îÅ‚ï∏‚ï∫‚î≥‚îì‚ïª ‚ïª‚ïª  ‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì   ‚ï∫‚î≥‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì[m
[32m+[m[32m ‚îÉ ‚î£‚îÅ‚î´‚îó‚îÅ‚îì‚î£‚îª‚îì   ‚îó‚îÅ‚îì‚îÉ  ‚î£‚îÅ‚î´‚î£‚ï∏  ‚îÉ‚îÉ‚îÉ ‚îÉ‚îÉ  ‚î£‚ï∏ ‚î£‚î≥‚îõ    ‚îÉ‚îÉ‚îÉ ‚îÉ‚îÉ  ‚îó‚îÅ‚îì[m
[32m+[m[32m ‚ïπ ‚ïπ ‚ïπ‚îó‚îÅ‚îõ‚ïπ ‚ïπ   ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚ï∫‚îª‚îõ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏‚ïπ‚îó‚ï∏   ‚ï∫‚îª‚îõ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ[m[41m      [m
[32m+[m[41m                                           [m
[32m+[m[32m https://github.com/arkhipenko/TaskScheduler/wiki/Full-Document[m
[32m+[m
[32m+[m[32mWelcome to the TaskScheduler wiki![m
[32m+[m[32mTask Scheduler[m
[32m+[m
[32m+[m[32mCooperative multitasking for Arduino microcontrollers[m
[32m+[m
[32m+[m
[32m+[m[32m..... (¬Ø`v¬¥¬Ø)‚ô•[m
[32m+[m[32m.......‚Ä¢.¬∏.‚Ä¢¬¥[m
[32m+[m[32m....¬∏.‚Ä¢¬¥[m
[32m+[m[32m... ([m
[32m+[m[32m‚òª/[m
[32m+[m[32m/‚ñå‚ô•‚ô•[m
[32m+[m[32m/ \ ‚ô•‚ô•[m
[32m+[m
[32m+[m[41m                                                            [m
[32m+[m[41m                                                           [m
[32m+[m[32mOVERVIEW :[m
[32m+[m
[32m+[m[32mA lightweight implementation of cooperative multitasking (task scheduling) supporting:[m
[32m+[m
[32m+[m[32m    Periodic task execution, with dynamic execution period in milliseconds (default) or microseconds[m[41m [m
[32m+[m[32m      (if explicitly enabled) ‚Äì frequency of execution[m
[32m+[m[32m    Number of iterations (limited or infinite number of iterations)[m
[32m+[m[32m    Execution of tasks in the predefined sequence[m
[32m+[m[32m    Dynamic change of task execution parameters (frequency, number of iterations, callback methods)[m
[32m+[m[32m    Power saving via entering IDLE sleep mode when tasks are not scheduled to run[m
[32m+[m[32m    Support for event-driven task invocation via Status Request object[m
[32m+[m[32m    Support for task IDs and Control Points for error handling and watchdog timer[m
[32m+[m[32m    Support for Local Task Storage pointer (allowing the use of same callback code for multiple tasks)[m
[32m+[m[32m    Support for layered task prioritization[m
[32m+[m[32m    Support for std::functions (ESP8266 only)[m
[32m+[m[32m    Overall task timeout[m
[32m+[m[32m    Static and dynamic callback method binding[m
[32m+[m[32m    Support for STM32F1 ARM Cortex-M3 boards[m
[32m+[m
[32m+[m[32mScheduling overhead: between 15 and 18 microseconds per scheduling pass (Arduino UNO rev 3 @ 16MHz clock, single[m[41m [m
[32m+[m[32m  scheduler w/o prioritization)[m
[32m+[m
[32m+[m[32mTASK :[m
[32m+[m
[32m+[m[32m"Task" is an action, a part of the program logic, which requires scheduled execution. A concept of Task combines[m[41m [m
[32m+[m[32m  the following aspects:[m
[32m+[m
[32m+[m[32m    Program code performing specific activities (callback methods)[m
[32m+[m[32m    Execution interval[m
[32m+[m[32m    Number of execution iterations[m
[32m+[m[32m    (Optionally) Execution start event (Status Request)[m
[32m+[m[32m    (Optionally) Pointer to a Local Task Storage area[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mTasks perform certain functions, which could require periodic or one-time execution, update of specific variables,[m[41m [m
[32m+[m[32m  or waiting for specific events. Tasks also could be controlling specific hardware, or triggered by hardware interrupts.[m
[32m+[m
[32m+[m[32mFor execution purposes Tasks are linked into execution chains , which are processed by the Scheduler in the order they[m
[32m+[m[32m  were added (linked together).[m
[32m+[m
[32m+[m[32mStarting with version 2.0.0 TaskScheduler supports task prioritization. Please refer to the specific chapter of this[m[41m [m
[32m+[m[32m  manual for details on layered prioritization.[m
[32m+[m
[32m+[m[32mEach task performs its function via a callback method. Scheduler calls Task's callback method periodically until the[m[41m [m
[32m+[m[32m  task is disabled or runs out of iterations. In addition to "regular" callback method, two additional methods could[m[41m [m
[32m+[m[32m  be utilized for each task: a callback method invoked every time the task is enabled, and a callback method invoked[m[41m [m
[32m+[m[32m  once when the task is disabled. Those two special methods allow tasks to properly initiate themselves for execution,[m
[32m+[m[32m  and clean-up after execution is over (E.g., setup pin modes on enable, and always bring pin level to LOW at the end).[m
[32m+[m
[32m+[m[32mTasks are responsible for supporting cooperative** multitasking** by being "good neighbors", i.e., running their[m[41m [m
[32m+[m[32m  callback methods quickly in a non-blocking way, and releasing control back to the scheduler as soon as possible.[m
[32m+[m
[32m+[m[32mScheduler is executing Tasks' callback methods in the order the tasks were added to the chain, from first to last.[m[41m [m
[32m+[m[32m  Scheduler stops and exits after processing the chain once in order to allow other statements in the main code of[m[41m [m
[32m+[m[32m  loop() method to run. This is referred to as a "scheduling pass".[m
[32m+[m
[32m+[m[32m(Normally, there is no need to have any other statements in the loop () method other than the Scheduler's execute ()[m[41m [m
[32m+[m[32m  method).[m
[32m+[m
[32m+[m[32mBelow is the flowchart of a Task lifecycle: Task lifecycle[m
[32m+[m
[32m+[m[32mTaskScheduler library may be compiled with different compilation controls enabled/disabled. This is a way to limit[m[41m [m
[32m+[m[32m  TaskScheduler functionality (and size) for a specific purpose (sketch). This is achieved by defining specific[m[41m  [m
[32m+[m[32m  #define parameters before TaskScheduler.h header file. Specifically:[m
[32m+[m
[32m+[m[32mIf compiled with _TASK_SLEEP_ON_IDLE_RUN enabled, the scheduler will place the processor into IDLE sleep mode[m[41m [m
[32m+[m[32m  (for approximately 1 ms, as the timer interrupt will wake it up), after what is determined to be an "idle" pass.[m[41m [m
[32m+[m[32m  An Idle Pass is a pass through the task chain when no Tasks were scheduled to run their callback methods. This is[m[41m [m
[32m+[m[32m  done to avoid repetitive idle passes through the chain when no tasks need to be executed. If any of the tasks in[m[41m [m
[32m+[m[32m  the chain always requires immediate execution (aInterval = 0), then there will be no IDLE sleep between the task's[m[41m [m
[32m+[m[32m  callback method execution.[m
[32m+[m
[32m+[m[32mNOTE: Task Scheduler uses millis() (or micros()) to determine if tasks are ready to be invoked. Therefore, if you[m[41m [m
[32m+[m[32m  put your device to any "deep" sleep mode disabling timer interrupts, the millis()`/micros()`** count will be[m[41m [m
[32m+[m[32m  suspended, leading to an effective suspension of scheduling. Upon wake up, active tasks need to be re-enabled,[m[41m [m
[32m+[m[32m  which will effectively reset their internal time scheduling variables to the new value of **millis()/micros().[m[41m [m
[32m+[m[32m  Time spent in deep sleep mode should be considered "frozen", i.e., if a task was scheduled to run in 1 second[m[41m [m
[32m+[m[32m  from now, and the device was put to sleep for 5 minutes, upon wake up, the task will still be scheduled 1 second[m[41m [m
[32m+[m[32m  from the time of wake up. Executing enable() method on these tasks will make it run as soon as possible. This is a[m[41m [m
[32m+[m[32m  concern only for tasks that are required to run in a truly periodical manner (in absolute time terms).[m
[32m+[m
[32m+[m[32mIn addition to time-only (``millis()/micros() only) invocation, tasks can be scheduled to wait on an event[m[41m [m
[32m+[m[32m  employing StatusRequest objects (more about Status Requests later).[m
[32m+[m
[32m+[m[32mConsider a scenario when one task (t1) is performing a function that affects the execution of many tasks (t2, t3).[m[41m [m
[32m+[m[32m  In this case, the task t1 will "signal" completion of its function via Status Request object. Tasks t2 and t3 are[m
[32m+[m[32m  "waiting" on the same Status Request object. As soon as status request completes, t2 and t3 are activated.[m
[32m+[m
[32m+[m[32mAn alternative scenario is the ne task (t1) and waiting for the completion of a number of tasks (t2, t3). When done,[m[41m [m
[32m+[m[32m  t2, and t3 signal completion of their functions, t1 is invoked.[m
[32m+[m
[32m+[m[32mPlease see the code examples at the end of this document, and included with the library package for details.[m
[32m+[m
[32m+[m[32mCOMPILE PARAMETERS:[m
[32m+[m
[32m+[m[32mThis library could be compiled in several configurations.[m
[32m+[m
[32m+[m[32mParameters ( **#define**s) defining what functionality should or should not be included need be defined before the[m[41m [m
[32m+[m[32m  library header file in the body of Arduino sketch.[m
[32m+[m
[32m+[m[32m#define _TASK_MICRO_RES[m
[32m+[m
[32m+[m[32m...will compile the library with microsecond scheduling resolution, instead of default millisecond resolution.[m
[32m+[m
[32m+[m[32mAll time-relevant parameters for execution interval, delay, etc. will be treated as microseconds , instead of[m[41m [m
[32m+[m[32m  milliseconds.[m
[32m+[m
[32m+[m[32mNOTE: Sleep mode SLEEP_MODE_IDLE (see below) is automatically disabled for microsecond resolution. Time constants[m[41m [m
[32m+[m[32m  TASK_SECOND, TASK_MINUTE, and TASK_HOUR are adjusted for microsecond duration.[m
[32m+[m
[32m+[m[32m#define _TASK_TIMECRITICAL[m
[32m+[m
[32m+[m[32m...will compile the library with a time-critical tracking option enabled.[m
[32m+[m
[32m+[m[32mThe time-critical option keeps track when the current execution took place relative to when it was scheduled,[m[41m [m
[32m+[m[32m  and where the next execution time of the task falls. Two methods provide this information.[m
[32m+[m
[32m+[m[32mTask::getStartDelay() method: return number of milliseconds (or microseconds) between current system time[m[41m [m
[32m+[m[32m  (millis/micros) and point in time when the task was scheduled to start. A value of 0 (zero) indicates that[m[41m [m
[32m+[m[32m  task started right on time per schedule.[m
[32m+[m
[32m+[m[32mTask::getOverrun() method: If getOverrun returns a negative value, this Task's next execution time point is[m[41m [m
[32m+[m[32m  already in the past, and task is behind schedule. This most probably means that either task's callback method's[m[41m [m
[32m+[m[32m  runtime is too long, or the execution interval is too short (and therefore schedule is too aggressive).[m
[32m+[m
[32m+[m[32mA positive value indicates that task is on schedule, and callback methods have enough time to finish before the[m[41m [m
[32m+[m[32m  next scheduled pass.[m
[32m+[m
[32m+[m[32m#define _TASK_SLEEP_ON_IDLE_RUN[m
[32m+[m
[32m+[m[32m...will compile the library with the sleep option enabled (AVR boards only).[m
[32m+[m
[32m+[m[32mWhen enabled, the scheduler will put the microcontroller into SLEEP_MODE_IDLE state if none of the tasks'[m[41m [m
[32m+[m[32m  callback methods were activated during execution pass. IDLE state is interrupted by timers once every 1 ms.[m[41m [m
[32m+[m[32m  Putting microcontroller to IDLE state helps conserve power. A device in SLEEP_MODE_IDLE wakes up to all hardware[m[41m [m
[32m+[m[32m  and timer interrupts, so scheduling is kept current.[m
[32m+[m
[32m+[m[32mNOTE: This compilation option is not available with the microsecond resolution option.[m
[32m+[m
[32m+[m[32m#define _TASK_STATUS_REQUEST[m
[32m+[m
[32m+[m[32m‚Ä¶will compile TaskScheduler with support for StatusRequest object. Status Requests are objects allowing tasks to[m[41m [m
[32m+[m[32m  wait on an event, and signal event completion to each other.[m
[32m+[m
[32m+[m[32mNOTE: tas of version 2.2.1 each task has an internal StatusRequest object, which triggered active at the moment[m[41m [m
[32m+[m[32m  Task is enabled, and triggered complete at the moment the task is disabled. These events could be used by other[m[41m [m
[32m+[m[32m  Tasks for event-driven execution[m
[32m+[m
[32m+[m[32m#define _TASK_WDT_IDS[m
[32m+[m
[32m+[m[32m‚Ä¶will compile TaskScheduler with support for Task IDs and Control Points. Each task can be (and is by default)[m[41m [m
[32m+[m[32m  assigned an ID, which could be used to identify the task in case there is a problem with it. Furthermore, within[m[41m [m
[32m+[m[32m  the task, Control Points could be defined to further help with pinpointing potential problem areas. For instance,[m[41m [m
[32m+[m[32m  the tasks which deal with external resources (sensors, serial communications, anything hardware dependent) can be[m[41m [m
[32m+[m[32m  blocked (or hung), by failed hardware. In this case, a watchdog timer could be employed to trap such a failed task,[m[41m [m
[32m+[m[32m  and identify which one (by task id) and where exactly within the task (by a control point) the problem is likely[m[41m [m
[32m+[m[32m  located.[m
[32m+[m
[32m+[m[32mNOTE: by default, talk IDs are assigned sequentially (1, 2, 3, ‚Ä¶) to the tasks as they are being created. The[m[41m [m
[32m+[m[32m  programmer can assign a specific task id. Task ids are unsigned integers.[m
[32m+[m
[32m+[m[32mControl points provide a way to identify potential problem points within a task. Control points are unsigned[m[41m [m
[32m+[m[32m  integers as well. Please note that there is only one control point per task, and it is set to zero when the[m[41m [m
[32m+[m[32m  task's callback method is invoked (this is done to prevent the "stray" control point from the previous task(s)[m[41m [m
[32m+[m[32m  confusing the matters.[m
[32m+[m
[32m+[m[32mExample #7 contains a test of task ID and control points functionality.[m
[32m+[m
[32m+[m[32m#define _TASK_LTS_POINTER[m
[32m+[m
[32m+[m[32m‚Ä¶will compile TaskScheduler with support for Local Task Storage pointer (LTS). LTS is a generic (void*)[m[41m [m
[32m+[m[32m  pointer that could be set to reference a variable or a structure specific to a particular task. A callback[m[41m [m
[32m+[m[32m  method can get access to specific variables by getting a reference to a currently running task from the[m[41m [m
[32m+[m[32m  scheduler, and then casting (void*) LTS pointer to the appropriate pointer type.[m
[32m+[m
[32m+[m[32mNOTE: above parameters are DISABLED by default, and need to be explicitly enabled by placing appropriate[m[41m [m
[32m+[m[32m  #define statements in front of the #include statement for the TaskScheduler header file.[m
[32m+[m
[32m+[m[32m#define _TASK_PRIORITY[m
[32m+[m
[32m+[m[32m‚Ä¶will compile TaskScheduler with support for layered task prioritization. Task prioritization is achieved[m[41m [m
[32m+[m[32m  by creating several schedulers and organizing them in priority layers. Tasks are assigned to schedulers[m[41m [m
[32m+[m[32m  corresponding to their priority. Tasks assigned to the "higher" layers are evaluated for invocation more[m[41m [m
[32m+[m[32m  frequently and are given priority in execution in case of the scheduling coincidence. More about layered[m[41m [m
[32m+[m[32m  prioritization in the API documentation and TaskScheduler examples.[m
[32m+[m
[32m+[m
[32m+[m[32mTASK PRIORITY AND COOPERATIVE MULTITASKING:[m
[32m+[m
[32m+[m[32mStarting with version 2.0.0 TaskScheduler supports task prioritization. Priority is associated with a[m[41m [m
[32m+[m[32m  Scheduler , not individual Tasks , hence the concept of priority layers. Tasks subsequently are assigned[m[41m [m
[32m+[m[32m  to schedulers corresponding to their desired priority. The lowest priority Scheduler is called[m[41m [m
[32m+[m[32m  " base scheduler" or " base layer". Let's call higher priority schedulers by their priority number, with[m[41m [m
[32m+[m[32m  a larger number corresponding to the higher priority of task execution.[m
[32m+[m
[32m+[m[32mTask prioritization is achieved by executing the entire chain of tasks of the higher priority scheduler for[m[41m [m
[32m+[m[32m  every single step (task) of the lower priority chain. Note that actual callback method invocation depends[m[41m [m
[32m+[m[32m  on priority and the timing of the task schedule. However, higher priority tasks are evaluated more[m[41m [m
[32m+[m[32m  frequently and are given priority in case of scheduling collision.[m
[32m+[m
[32m+[m[32mFor most tasks, TaskScheduler does not need task priority functionality. Prioritization requires additional[m[41m [m
[32m+[m[32m  scheduling overhead and should be used only for critical tasks.[m
[32m+[m
[32m+[m[32mA few points on that:[m
[32m+[m
[32m+[m[32m    The plain (non-layered) execution chain is simple and efficient. The main idea is to minimize scheduling[m[41m [m
[32m+[m[32m    overhead by Scheduler going through the chain. Each priority layer adds scheduling overhead to overall[m[41m [m
[32m+[m[32m    task chain execution. Let's review 3 scenarios:[m
[32m+[m
[32m+[m[32mI. Flat chain of 7 tasks:[m
[32m+[m
[32m+[m[32mScheduling evaluation sequence:[m
[32m+[m
[32m+[m[32m1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7[m
[32m+[m
[32m+[m[32mScheduling overhead:[m
[32m+[m
[32m+[m[32mO = B * T = 7 * 18 = 126 microseconds,[m
[32m+[m
[32m+[m[32mWhere:[m
[32m+[m
[32m+[m[32m    O ‚Äì scheduling overhead[m
[32m+[m
[32m+[m[32m    B ‚Äì number of tasks in the base layer[m
[32m+[m
[32m+[m[32m    T ‚Äì scheduling overhead of a single task execution evaluation (currently with Arduino Uno running[m[41m [m
[32m+[m[32m        at 16 Mhz is between 15 and 18 microseconds).[m
[32m+[m
[32m+[m[32mII. Two priority layers of 7 tasks.[m
[32m+[m
[32m+[m[32mTasks 1, 2, 3, 4, 5 are base priority and 6, 7 are higher priority:[m
[32m+[m
[32m+[m[32mScheduling evaluation sequence:[m
[32m+[m
[32m+[m[32m6 -> 7 -> 1 -> 6 -> 7 -> 2 -> 6 -> 7 -> 3 -> 6 -> 7 -> 4 -> 6 -> 7 -> 5[m
[32m+[m
[32m+[m[32mScheduling overhead:[m
[32m+[m
[32m+[m[32mO = (B + B * P1) * T = (5 + 5 * 2) * 18 = 270 microseconds,[m
[32m+[m
[32m+[m[32mWhere:[m
[32m+[m
[32m+[m[32m    O ‚Äì scheduling overhead[m
[32m+[m
[32m+[m[32m    B ‚Äì number of tasks in the base layer[m
[32m+[m
[32m+[m[32m    P1 ‚Äì number of tasks in the priority 1 layer[m
[32m+[m
[32m+[m[32m    T ‚Äì scheduling overhead of a single task execution evaluation (currently with Arduino Uno running[m[41m [m
[32m+[m[32m        at 16 Mhz is between 15 and 18 microseconds).[m
[32m+[m
[32m+[m[32mIII. Three priority layers of 7 tasks.[m
[32m+[m
[32m+[m[32mTasks 1, 2, 3, are base priority, 4, 5 are priority 1, and 6, 7 are priority 2:[m
[32m+[m
[32m+[m[32mScheduling evaluation sequence:[m
[32m+[m
[32m+[m[32m6 -> 7 -> 4 -> 6 -> 7 -> 5 -> 1 -> 6 -> 7 -> 4 -> 6 -> 7 -> 5 -> 2 -> 6 -> 7 -> 4 -> 6 -> 7 -> 5 -> 3[m
[32m+[m
[32m+[m[32mScheduling overhead:[m
[32m+[m
[32m+[m[32mO = (B + B * P1 + B * P1 * P2) * T = (3 + 3 * 2 + 3 * 2 * 2) * 18 = 378 microseconds,[m
[32m+[m
[32m+[m[32mWhere:[m
[32m+[m
[32m+[m[32m    O ‚Äì scheduling overhead[m
[32m+[m
[32m+[m[32m    B ‚Äì number of tasks in the base layer[m
[32m+[m
[32m+[m[32m    P1 ‚Äì number of tasks in the priority 1 layer[m
[32m+[m
[32m+[m[32m    P2 ‚Äì number of tasks in the priority 2 layer[m
[32m+[m
[32m+[m[32m    T ‚Äì scheduling overhead of a single task execution evaluation (currently with Arduino Uno running at[m[41m [m
[32m+[m[32m        16 Mhz is between 15 and 18 microseconds).[m
[32m+[m
[32m+[m[32mScheduling overhead of a 3 layer prioritization approach is 3 times higher than that of a flat execution[m[41m [m
[32m+[m[32m  chain. Do evaluate if task prioritization is really required for your sketch.[m
[32m+[m
[32m+[m[32m    TaskScheduler is NOT a pre-emptive multitasking library. Nor is it a Real-Time OS. There is no way to[m[41m [m
[32m+[m[32m      break the execution of one task in favor of another. Therefore callback methods require careful[m[41m [m
[32m+[m[32m      programming for cooperative behavior.[m
[32m+[m
[32m+[m[32mThis has, however, significant benefits: you don't need to worry about concurrency inside the callback[m[41m [m
[32m+[m[32m  method, since only one callback method runs at a time, and could not be interrupted. All resources are[m[41m [m
[32m+[m[32m  yours for that period of time, no one can switch the value of variables (except interrupt functions of[m[41m [m
[32m+[m[32m  course...), etc. It is a stable and predictable environment, and it helps a lot with writing stable code.[m
[32m+[m
[32m+[m[32mA number of things could be done instead of priorities:[m
[32m+[m
[32m+[m[32m    Schedule your critical tasks to run more frequently than the other tasks[m
[32m+[m
[32m+[m[32m. (Since you can control the interval, you could also change the task to run more or less frequently as[m[41m [m
[32m+[m[32m    the situation demands).[m
[32m+[m
[32m+[m[32m    If one particular callback routine is critical, create a couple of tasks referring to the same[m[41m [m
[32m+[m[32m      callback and "sprinkle" them around the chain:[m
[32m+[m
[32m+[m[32m    Scheduler ts;[m
[32m+[m
[32m+[m[32m    Task t1(20, TASK_FOREVER, &callback1, &ts);[m
[32m+[m
[32m+[m[32m    Task t2(1000, TASK_FOREVER, &callback2, &ts);[m
[32m+[m
[32m+[m[32m    Task t3(20, TASK_FOREVER, &callback1, &ts);[m
[32m+[m
[32m+[m[32m    Task t4(1000, TASK_FOREVER, &callback4, &ts);[m
[32m+[m
[32m+[m[32m    t3.delay(10);[m
[32m+[m
[32m+[m[32mNote that t1 and t3 call the same callback method, and are shifted in time by 10 millis. So effectively[m[41m [m
[32m+[m[32m  callback1 will be called every 10 millis, but would be "sandwiched" between t2 and t4.[m
[32m+[m
[32m+[m[32m    Use short efficient callback methods written for cooperative multitasking.[m
[32m+[m
[32m+[m[32mWhat that means is:[m
[32m+[m
[32m+[m[32ma) DO NOT use Arduino's delay() function. It is blocking and will hold the entire chain. Instead, break[m[41m [m
[32m+[m[32m  the callback method into two, switch the callback method of the task where a delay is necessary, and[m[41m [m
[32m+[m[32m  delay the task by that number of millis. You get your delay, and other tasks get a chance to run:[m
[32m+[m
[32m+[m[32minstead of:[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m[32m     ... stuff[m
[32m+[m
[32m+[m[32m     delay(1000);[m
[32m+[m
[32m+[m[32m     ... more stuff[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mdo this:[m
[32m+[m
[32m+[m[32m    void callback1() {[m
[32m+[m
[32m+[m[32m     ... stuff[m
[32m+[m
[32m+[m[32m     t1.setCallback(&callback2);[m
[32m+[m
[32m+[m[32m     t1.delay(1000);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    void callback2() {[m
[32m+[m
[32m+[m[32m     ... more stuff[m
[32m+[m
[32m+[m[32m     t1.setCallback(&callback1);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mb) Same goes to pulseIn() function. If you have to use it, set the timeout parameter such that it is not a[m[41m [m
[32m+[m[32m  default 1 second. PulseIn functionality could be achieved via pin interrupts, and that solution is non-blocking.[m
[32m+[m
[32m+[m[32mc) Do not run long loops (for or do/while) in your callback methods. Make the main Arduino loop be the[m[41m [m
[32m+[m[32m  loop driver for you:[m
[32m+[m
[32m+[m[32minstead of:[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m      for(int i=0; i<1000; i++) {[m
[32m+[m
[32m+[m[32m        ... stuff // one loop action[m
[32m+[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mdo this:[m
[32m+[m
[32m+[m[32m    Task t1(TASK\_IMMEDIATE, 1000, &callback);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m[32m      int i = t1.getRunCounter() -1;[m
[32m+[m
[32m+[m[32m      ... stuff // one loop action[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mor this:[m
[32m+[m
[32m+[m[32m    Task t1(TASK\_IMMEDIATE, 1000, &callback, true, &t1On);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    int i;[m
[32m+[m
[32m+[m[32m    bool t1On() {[m
[32m+[m
[32m+[m[32m      i = 0;[m
[32m+[m
[32m+[m[32m      return true;[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m[32m      ... stuff // one loop action[m
[32m+[m
[32m+[m[32m      i++;[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m            **REMEMBER: you are already inside the loop - take advantage of it.**[m
[32m+[m
[32m+[m[32md) Break long-running callback methods into several shorter ones, and pass control from one to the other[m[41m [m
[32m+[m[32m  via setCallback() method:[m
[32m+[m
[32m+[m[32m    Task t1(TASK\_IMMEDIATE, TASK\_FAREVER, &callback);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m[32m      ... do some stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback\_step2);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    void callback\_step2() {[m
[32m+[m
[32m+[m[32m      ... do more stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback\_step3);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    void callback\_step3() {[m
[32m+[m
[32m+[m[32m      ... do last part of the stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback);[m
[32m+[m
[32m+[m[32m      t1.delay(1000);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mThis will execute all parts of the callback function in three successive steps, scheduled immediately,[m[41m [m
[32m+[m[32m  but allowing other tasks in the chain to run. Notice that the task is scheduled to run immediately,[m[41m [m
[32m+[m[32m  and 1 second period is achieved by delaying the task for 1000 millis at the last step.[m
[32m+[m
[32m+[m[32mAlternatively, you could schedule the task to run every 1000 millis and use forceNextIteration() method[m[41m [m
[32m+[m[32m  in steps 1 and 2 (but not 3!)[m
[32m+[m
[32m+[m[32m    Task t1(1000, TASK\_FOREVER, &callback);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    void callback() {[m
[32m+[m
[32m+[m[32m      ... do some stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback\_step2);[m
[32m+[m
[32m+[m[32m      t1.forceNextIteration();[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    void callback\_step2() {[m
[32m+[m
[32m+[m[32m      ... do more stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback\_step3);[m
[32m+[m
[32m+[m[32m      t1.forceNextIteration();[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    void callback\_step3() {[m
[32m+[m
[32m+[m[32m      ... do last part of the stuff[m
[32m+[m
[32m+[m[32m      t1.setCallback(&callback);[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32me) Compile the library with _TASK_TIMECRITICAL enabled and check if your tasks are falling behind schedule.[m[41m [m
[32m+[m[32m  If they are - you need to optimize your code further (or maybe re-evaluate your schedule). If they are not -[m[41m [m
[32m+[m[32m  all is well and you don't need to do anything. E.g., I have a spider robot that needs to measure distance,[m[41m [m
[32m+[m[32m  control motors, and keep track of the angle via querying gyroscope and accelerometer every 10 ms. The idea was[m[41m [m
[32m+[m[32m  to flash onboard LED if any of the tasks fall behind. At 10 ms interval for the gyro the LED does not flash,[m[41m [m
[32m+[m[32m  which means none of the tasks are blocking the others from starting on time.[m
[32m+[m
[32m+[m[32mAPI DOCUMENTATION:[m
[32m+[m[32mTASKS:[m
[32m+[m[32mCREATION:[m
[32m+[m
[32m+[m[32mTask();[m
[32m+[m
[32m+[m[32mDefault constructor. Takes no parameters and creates a task that could be scheduled to run at every[m[41m [m
[32m+[m[32m  scheduling pass indefinitely, but does not have a callback method defined, so no code execution will[m[41m [m
[32m+[m[32m  actually take place. All tasks are created disabled by default.[m
[32m+[m
[32m+[m[32mTask(unsigned long aInterval, long aIterations, void (\*aCallback)(), Scheduler\* aScheduler, bool[m[41m [m
[32m+[m[32m  aEnable, bool (\*aOnEnable)(), void (\*aOnDisable)())[m
[32m+[m
[32m+[m[32mConstructor with parameters.[m
[32m+[m
[32m+[m[32mCreates a task that is scheduled to run every milliseconds, times, executing method on every pass.[m
[32m+[m
[32m+[m[32m    aInterval is in milliseconds (or microseconds) (default = 0)[m
[32m+[m[32m    aIteration in number of times, -1 for indefinite execution (default = -1)[m
[32m+[m[32m    Note: Tasks do not remember the number of iteration set initially. After the iterations are done,[m[41m [m
[32m+[m[32m      internal iteration counter is 0. If you need to perform another set of iterations, you need to[m[41m [m
[32m+[m[32m      set the number of iterations again.[m
[32m+[m[32m    Note: Tasks which performed all their iterations remain active.[m
[32m+[m[32m    aCallback is a pointer to a void callback method without parameters (default = NULL)[m
[32m+[m[32m    aScheduler ‚Äì optional reference to existing scheduler. If supplied (not NULL) this task will be[m[41m [m
[32m+[m[32m      appended to the task chain of the current scheduler). (default = NULL)[m
[32m+[m[32m    aEnable ‚Äì optional. Value of true will create task enabled. (default = false)[m
[32m+[m[32m    aOnEnable is a pointer to a bool callback method without parameters, invoked when task is enabled.[m[41m [m
[32m+[m[32m      If OnEnable method returns true , task is enabled. If OnEnable method return false , task remains[m[41m [m
[32m+[m[32m      disabled (default = NULL)[m
[32m+[m[32m    aOnDisable is a pointer to a void callback method without parameters, invoked when task is[m[41m [m
[32m+[m[32m      disabled (default = NULL)[m
[32m+[m
[32m+[m[32mAll tasks are created disabled by default (unless aEnable = true). You have to explicitly enable[m[41m [m
[32m+[m[32m  the task for execution.[m
[32m+[m
[32m+[m[32mNOTE: OnEnable callback method is called immediately when task is enabled, which could be well[m[41m [m
[32m+[m[32m  ahead of the scheduled execution time of the task. Please bear that in mind ‚Äì other tasks, hardware,[m[41m [m
[32m+[m[32m  serial interface may not even be initialized yet. It is always advisable to explicitly enable tasks[m[41m [m
[32m+[m[32m  with OnEnable methods after all initialization methods completed (e.g., at the end of setup() method)[m
[32m+[m
[32m+[m[32mEnabled task is scheduled for execution as soon as the Scheduler's execute() methods gets control.[m[41m [m
[32m+[m[32m  In order to delay first run of the task, use enableDelayed or delay method (for enabled tasks) method.[m
[32m+[m
[32m+[m[32mTask(void (\*aCallback)(), Scheduler\* aScheduler, bool (\*aOnEnable)(), void (\*aOnDisable)())[m
[32m+[m
[32m+[m[32mIf compiled with support for Status Request objects, this constructor creates a Task for activation[m[41m [m
[32m+[m[32m  on event (since such tasks must run waitFor() method, their interval, iteration and enabled status[m[41m [m
[32m+[m[32m  will be set by that method (to 0, 1 and false respectively).[m
[32m+[m[32mINFORMATION[m
[32m+[m
[32m+[m[32mThe following 3 "getter" methods return task status (enabled/disabled), execution interval in milliseconds,[m[41m [m
[32m+[m[32m  number of remaining iterations.[m
[32m+[m
[32m+[m[32mbool isEnabled()[m
[32m+[m
[32m+[m[32munsigned long getInterval()[m
[32m+[m
[32m+[m[32mlong getIterations()[m
[32m+[m
[32m+[m[32mlong getStartDelay()[m
[32m+[m
[32m+[m[32mIf library is compiled with _TASK_TIMECRITICAL enabled, you can assess how much later the callback method[m[41m [m
[32m+[m[32m  was invoked against when it was scheduled to be invoked. The return value of getStartDelay() method[m[41m [m
[32m+[m[32m  provides this information in milliseconds (or microseconds).[m
[32m+[m
[32m+[m[32mlong getOverrun()[m
[32m+[m
[32m+[m[32mIf library is compiled with _TASK_TIMECRITICAL enabled, tasks are monitored for "long running" scenario.[m[41m [m
[32m+[m[32m  A "long running" task is a task that does not finish processing its callback methods quickly, and thus[m[41m [m
[32m+[m[32m  creates a situation for itself and other tasks where they don't run on a scheduled interval, but rather[m[41m [m
[32m+[m[32m  "catch up" and are behind. When task scheduler sets the next execution target time, it adds Task's[m[41m [m
[32m+[m[32m  execution interval to the previously scheduled execution time:[m
[32m+[m
[32m+[m[32mnext execution time = current execution scheduled time + task execution interval[m
[32m+[m
[32m+[m[32mIf next execution time happens to be already in the past ( next execution time < millis()), then task[m[41m [m
[32m+[m[32m  is considered overrun. GetOverrun method returns number of milliseconds between next execution time[m[41m [m
[32m+[m[32m  and current time. If the value is negative , the task has overrun (cut into the) next execution interval[m[41m [m
[32m+[m[32m  by that many milliseconds.[m
[32m+[m
[32m+[m[32mPositive value indicate number of milliseconds (or microseconds) of slack this task has for execution purposes.[m
[32m+[m
[32m+[m[32munsigned long getRunCounter()[m
[32m+[m
[32m+[m[32mReturns the number of the current run. "Current run" is the number of times a callback method has been[m[41m [m
[32m+[m[32m  invoked since the last time a task was enabled.[m
[32m+[m
[32m+[m[32mNOTE: The runCounter value is incremented before callback method is invoked. If a task is checking the[m[41m [m
[32m+[m[32m  runCounter value within its callback method, then the first run value is 1.[m
[32m+[m
[32m+[m[32mIf task T1 is checking the runCounter value of another task (T2) , then value = 0 indicates that T2 has[m[41m [m
[32m+[m[32m  not been invoked yet, and value = 1 indicates that T2 has run once.[m
[32m+[m
[32m+[m[32mbool isFirstIteration()[m
[32m+[m
[32m+[m[32mIndicates whether current pass is (or will be) a first iteration of the task.[m
[32m+[m
[32m+[m[32mbool isLastIteration()[m
[32m+[m
[32m+[m[32mFor tasks with a l_imited number of iterations only_, indicates whether current pass is the last iteration.[m
[32m+[m[32mCONTROL:[m
[32m+[m
[32m+[m[32mvoid enable();[m
[32m+[m
[32m+[m[32mEnables the task, and schedules it for immediate execution (without delay) at this or next scheduling[m[41m [m
[32m+[m[32m  pass depending on when the task was enabled. Scheduler will execute the next pass without any delay[m[41m [m
[32m+[m[32m  because there is a task which was enabled and requires execution.[m
[32m+[m
[32m+[m[32mNOTE: if task being enabled is not assigned to a scheduler and is not part of execution chain, then task[m[41m [m
[32m+[m[32m  will not be enabled.[m
[32m+[m
[32m+[m[32mNOTE: enable() invokes task's OnEnable method (if not NULL) immediately , which can prepare task for[m[41m [m
[32m+[m[32m  execution. OnEnable must return a value of true for task to be enabled. If OnEnable returns false ,[m[41m [m
[32m+[m[32m  task remains disabled. OnEnable is invoked every time **enable** is called, regardless if task is[m[41m [m
[32m+[m[32m  already enabled or not. Alignment to current millis() is performed after OnEnable exits, so any[m[41m [m
[32m+[m[32m  changes to the interval inside OnEnable is taken into consideration.[m
[32m+[m
[32m+[m[32mTaskScheduler allows tasks to be added to the a Scheduler and enabled at the time of creation.[m[41m [m
[32m+[m[32m  Be very careful with such tasks ‚Äì the OnEnable method will be executed immediately, while certain[m[41m [m
[32m+[m[32m  objects (i.e., other Tasks, libraries) are not yet ready (e.g., Wire.begin() was not yet called),[m[41m [m
[32m+[m[32m  or hardware not yet activated (pins not set to INPUT or OUTPUT).[m
[32m+[m
[32m+[m[32mIt is very much recommended to to enable all tasks at the end of setup() method after all initializations are done.[m
[32m+[m
[32m+[m[32mIf you require immediate execution of already enabled task, use forceNextIteratoin() method instead of[m[41m [m
[32m+[m[32m  enable(): it achieves the result, but does not call OnEnable method.[m
[32m+[m
[32m+[m[32mNOTE: in the event enable() method is called inside the OnEnable callback method (thus basically creating[m[41m [m
[32m+[m[32m  indefinte loop), TaskScheduler will only call OnEnable once (thus protecting the Task against OnEnable[m[41m [m
[32m+[m[32m    infinite loop).[m
[32m+[m
[32m+[m[32mNOTE: internal StatusRequest object will be set waiting for an event when Task is enabled (if TaskScheduler[m[41m [m
[32m+[m[32m  is compiled with support for StatusRequests). StatusRequest object is set waiting after the call to[m[41m [m
[32m+[m[32m  onEnable() method of the Task (if defined). Consequently, any Task#2 that is expected to wait on this Task's[m[41m [m
[32m+[m[32m  internal StatusRequest should do it only after this task is enabled.[m
[32m+[m
[32m+[m[32mbool enableIfNot();[m
[32m+[m
[32m+[m[32mEnables the task only if it was previously disabled. Returns previous enable state: true if task was[m[41m [m
[32m+[m[32m  already enabled, and false if task was disabled. Since enable() schedules Task for execution immediately,[m[41m [m
[32m+[m[32m  this method provides a way to activate tasks and schedule them for immediate execution only if they are[m[41m [m
[32m+[m[32m  not active already.[m
[32m+[m
[32m+[m[32mAll NOTES from the enable() method apply.[m
[32m+[m
[32m+[m[32mvoid delay();[m
[32m+[m
[32m+[m[32mSchedules the task for execution after a delay (aInterval), but does not change the enabled/disabled[m[41m [m
[32m+[m[32m  status of the task.[m
[32m+[m
[32m+[m[32mNOTE: a delay of 0 (zero) will delay task for current execution interval. Use forceNextIteration()[m[41m [m
[32m+[m[32m  method to force execution of the task's callback during immediate next scheduling pass.[m
[32m+[m
[32m+[m[32mvoid  forceNextIteration();[m
[32m+[m
[32m+[m[32mSchedules the task for execution during immediate next scheduling pass.[m
[32m+[m
[32m+[m[32mThe Task must be already enabled prior to this method.[m
[32m+[m
[32m+[m[32mNote: Task's schedule is adjusted to run from this moment in time. For instance: if a task was running[m[41m [m
[32m+[m[32m  every 10 seconds: 10, 20, 30, .., calling forceNextIteration at 44th second of task execution will make[m[41m [m
[32m+[m[32m  subsequent schedule look like: 44, 54, 64, 74, ..[m
[32m+[m
[32m+[m[32mvoid enableDelayed();[m
[32m+[m
[32m+[m[32mEnables the task, and schedules it for execution after task's current scheduling interval (aInterval).[m
[32m+[m
[32m+[m[32mvoid enableDelayed (unsigned long aDelay);[m
[32m+[m
[32m+[m[32mEnables the task, and schedules it for execution after a specific delay (aDelay, which may be different[m[41m [m
[32m+[m[32m  from aInterval).[m
[32m+[m
[32m+[m[32mvoid restart();[m
[32m+[m
[32m+[m[32mFor tasks with limited number of iterations only, restart method will re-enable the task, set the[m[41m [m
[32m+[m[32m  number of iterations back to last set value, and schedule task for execution as soon as possible.[m
[32m+[m
[32m+[m[32mvoid restartDelayed (unsigned long aDelay);[m
[32m+[m
[32m+[m[32mSame as restart() method, with the only difference being that Task is scheduled to run first iteration[m[41m [m
[32m+[m[32m  after a delay = aDelay milliseconds (or microseconds).[m
[32m+[m
[32m+[m[32mbool disable();[m
[32m+[m
[32m+[m[32mDisables the task. Scheduler will not execute this task any longer, even if it remains in the chain.[m[41m [m
[32m+[m[32m  Task can be later re-enabled for execution.[m
[32m+[m
[32m+[m[32mReturn previous enabled state: true if task was enabled prior to calling disable, and false otherwise.[m
[32m+[m
[32m+[m[32mIf not NULL, task's OnDisable method is invoked immediately. OnDisable is invoked only if task was in[m[41m [m
[32m+[m[32m  enabled state. Calling disable 3 times for instance will invoke OnDisable only once.[m
[32m+[m
[32m+[m[32mNOTE: internal StatusRequest object will signal completion of an event when Task is disabled[m[41m [m
[32m+[m[32m  (if TaskScheduler is compiled with support for StatusRequests). StatusRequest object is set complete[m[41m [m
[32m+[m[32m  after the call to onDisable() method of the Task (if defined). Consequently, the task which has to[m[41m [m
[32m+[m[32m  signal its completion to other Tasks could not restart itself. Do so will not ever set the internal[m[41m [m
[32m+[m[32m  StatusRequest object to a complete status, since the Task is never really disabled.[m
[32m+[m
[32m+[m[32mvoid set(unsigned long aInterval, long aIterations, void (\*aCallback)() , bool (\*aOnEnable)() , void[m[41m [m
[32m+[m[32m  (\*aOnDisable)());[m
[32m+[m
[32m+[m[32mAllows dynamic control of task execution parameters in one method call.[m
[32m+[m
[32m+[m[32mNote : OnEnable and OnDisable parameters can be omitted. In that case they will be assigned to[m[41m [m
[32m+[m[32m  NULL and respective methods will no longer be called. Therefore it is advisable to use either all[m[41m [m
[32m+[m[32m  five parameters explicitly, or employ individual "setter" methods below instead.[m
[32m+[m
[32m+[m[32mNext five "setter" methods allow changes of individual task execution control parameters.[m
[32m+[m
[32m+[m[32mvoid setInterval (unsigned long aInterval)[m
[32m+[m
[32m+[m[32mvoid setIterations (long aIterations)[m
[32m+[m
[32m+[m[32mvoid setCallback (void (*aCallback)())[m
[32m+[m
[32m+[m[32mvoid setOnEnable (bool (*aCallback)())[m
[32m+[m
[32m+[m[32mvoid setOnDisable (void (*aCallback)())[m
[32m+[m
[32m+[m[32mNOTE: Next execution time calculation takes place after the callback method is called, so new interval[m[41m [m
[32m+[m[32m  will be used immediately by the scheduler. For the situations when one task is changing the interval[m[41m [m
[32m+[m[32m  parameter for the other, setInterval method calls delay explicitly to guarantee schedule change,[m[41m [m
[32m+[m[32m  however it does not enable the task if task is disabled.[m
[32m+[m
[32m+[m[32mNOTE: Tasks that ran through all their allocated iterations are disabled. SetIterations() method DOES[m[41m [m
[32m+[m[32m  NOT enable the task. Either enable explicitly, or use restart methods.[m
[32m+[m
[32m+[m[32mPlease note that as a result execution of the taks is delayed by the provided interval. If immediate[m[41m [m
[32m+[m[32m  invocation is required, call forceNextIteration() method after setting a new interval.[m
[32m+[m
[32m+[m[32mvoid yield(void (*aCallback)())[m
[32m+[m
[32m+[m[32mThis method could be used to break up long callback methods. A long callback method should be broken[m[41m [m
[32m+[m[32m  up into several shorter methods. Yield method just gives control back to scheduler, while ensuring[m[41m [m
[32m+[m[32m  that next iteration of the Task is executed immediately with the next callback method. Basically[m[41m [m
[32m+[m[32m  "yield(&callBack2)" is equivalent to setting new callback method, and forcing next iteration to[m[41m [m
[32m+[m[32m  be immediate. Please not that original interval and number of iterations are preserved. Even the[m[41m [m
[32m+[m[32m  runcounter of the callback2 after yielding will remain the same. Typically a call to yield() method[m
[32m+[m[32m  is the last line of the method yielding.[m
[32m+[m
[32m+[m[32mvoid yieldOnce(void (\aCallback)())[m
[32m+[m
[32m+[m[32mThis method is equivalent to yield(), only execution of the target a–°allback method is set to happen[m[41m [m
[32m+[m[32m  only once, after which the Task will be disabled.[m
[32m+[m
[32m+[m[32mSTATUS REQUEST METHODS:[m
[32m+[m
[32m+[m[32mvoid waitFor(`StatusRequest`\* aStatusRequest, unsigned long aInterval = 0, long aIterations = 1);[m
[32m+[m[32mvoid waitForDelayed(StatusRequest\* aStatusRequest, unsigned long aInterval = 0, long aIterations = 1);[m
[32m+[m
[32m+[m[32mIf compiled with support for Status Requests, these methods make task wait for the completion of[m[41m [m
[32m+[m[32m  aStatusRequest event.[m
[32m+[m
[32m+[m[32mBy default waitFor() sets tasks interval to 0 (zero) for immediate execution when event happens,[m[41m [m
[32m+[m[32m  and also sets the number of iterations to 1. However, you can specify different interval and number[m[41m [m
[32m+[m[32m  of iterations.[m
[32m+[m
[32m+[m[32mBy default waitForDelayed() sets tasks interval to a supplied value or (if omitted or zero) keeps the[m[41m [m
[32m+[m[32m  current interval, so delayed execution will take place when the event happens. It also sets the number[m
[32m+[m[32m  of iterations to 1 by default if not supplied.[m
[32m+[m
[32m+[m[32mWhen Status Request object completes, all tasks waiting on it are executed during next scheduling pass.[m[41m [m
[32m+[m[32m  Tasks waiting via waitFor() method are executed immediately. Tasks waiting via waitForDelayed() method[m[41m [m
[32m+[m[32m  are activated, but executed after current or supplied interval delay.[m
[32m+[m
[32m+[m[32mNote: aStatusRequest should be "activated" by calling setWaiting() method before making a task wait on it.[m[41m [m
[32m+[m[32m  Otherwise, the task will execute immediately.[m
[32m+[m
[32m+[m[32mThe sequence of events to use Status Request object is as follows:[m
[32m+[m
[32m+[m[32m    Create a status request object[m
[32m+[m[32m    Activate status request object (calling its setWaiting() method)[m
[32m+[m[32m    Set up tasks to wait of the event completion[m
[32m+[m[32m    Signal completion of event(s)[m
[32m+[m
[32m+[m[32mStatusRequest* getStatusRequest();[m
[32m+[m
[32m+[m[32mReturns a pointer to StatusReqeust object this Task was waiting on.[m
[32m+[m
[32m+[m[32mStatusRequest* getInternalStatusRequest();[m
[32m+[m
[32m+[m[32mReturns a pointer to an internal StatusReqeust object associated with this Task. Internal StatusRequest object is:[m
[32m+[m
[32m+[m[32m    Always waits on 1 event ‚Äì completion of this task[m
[32m+[m[32m    Is activated (set to "waiting" status) after Task is enabled[m
[32m+[m[32m    Is completed after Task is disabled (either explicitly, or by running out of iterations)[m
[32m+[m
[32m+[m[32mNOTE: Please remember that a task is deactivated at the next scheduling pass after the last iteration,[m[41m [m
[32m+[m[32m  which means that other Tasks in the chain will have a chance to run before Task StatusRequest signaling[m[41m [m
[32m+[m[32m  completion of the internal StatusRequest. However, there is no further delay ‚Äì deactivation will take[m[41m [m
[32m+[m[32m  place at the next scheduling pass.[m
[32m+[m
[32m+[m[32mTASK ID, CONTROL POINTS METHODS:[m
[32m+[m
[32m+[m[32mvoid setId(unsigned int aID);[m
[32m+[m
[32m+[m[32mIf compiled with support for Task IDs, this method will set the task ID explicitly.[m
[32m+[m
[32m+[m[32mCalling this method is not necessary as task IDs are assigned automatically during task creation: 1, 2, 3, ‚Ä¶[m
[32m+[m
[32m+[m[32munsigned int getId();[m
[32m+[m
[32m+[m[32mIf compiled with support for Task IDs, this method return current task's ID.[m
[32m+[m
[32m+[m[32mvoid setControlPoint (unsigned int aPoint);[m
[32m+[m
[32m+[m[32mIf compiled with support for Task IDs, this method will set a control point in the task's code.[m[41m [m
[32m+[m[32m  Control points are similar to "try‚Ä¶catch" blocks, with control point ID specifying where in the[m[41m [m
[32m+[m[32m  code the "try" part started, and a mechanism like watchdog timer providing the "catch" functionality.[m
[32m+[m
[32m+[m[32munsigned int getControlPoint()[m
[32m+[m
[32m+[m[32mIf compiled with support for Task IDs, this method will return currently set control point for this task.[m
[32m+[m[32mLOCAL TASK STORAGE METHODS:[m
[32m+[m
[32m+[m[32mvoid setLtsPointer(void *aPtr);[m
[32m+[m
[32m+[m[32mIf compiled with support for LTS, this method will set the task's local storage pointer.[m
[32m+[m
[32m+[m[32mvoid *getLtsPointer();[m
[32m+[m
[32m+[m[32mIf compiled with support for LTS, this method will return reference to the task's local storage.[m
[32m+[m
[32m+[m[32mNote: the value returned has type (void *), and needs to be re-cast into appropriate pointer type.[m[41m [m
[32m+[m[32m  Please refer to example sketches for implementation options.[m
[32m+[m[32mSTATUS REQUEST:[m
[32m+[m[32mCREATION:[m
[32m+[m
[32m+[m[32mStatusRequest();[m
[32m+[m
[32m+[m[32mDefault constructor.[m
[32m+[m
[32m+[m[32mTakes no parameters. Creates Status Request object, which is assigned a status of "completed" on creation.[m
[32m+[m
[32m+[m[32mvoid setWaiting(unsigned int aCount = 1)[m
[32m+[m
[32m+[m[32mActivates Status Request object. By default each object is set to wait on one event only, however,[m[41m [m
[32m+[m[32m  if aCount is supplied, Status Request can wait on multiple events. For instance, setWaiting(3) will[m[41m [m
[32m+[m[32m  wait on three signals. An example could be waiting for completion of measurements from 3 sensors.[m
[32m+[m
[32m+[m[32mbool signal(int aStatus)[m
[32m+[m
[32m+[m[32mSignals completion of the event to the Status Request object, and passes a completion code, which could be[m[41m [m
[32m+[m[32m  interrogated later.[m
[32m+[m
[32m+[m[32mNote: passing a negative status code to the status request object is considered reporting an error condition,[m[41m [m
[32m+[m[32m  and will complete the status request regardless of how many outstanding signals it is still waiting for.[m
[32m+[m
[32m+[m[32mNote : only the latest status code is kept.[m
[32m+[m
[32m+[m[32mbool signalComplete (int aStatus)[m
[32m+[m
[32m+[m[32mSignals completion of ALL events to the Status Request object, and passes a completion code, which could[m[41m [m
[32m+[m[32m  be interrogated later. The status request completes regardless of how many events it is still waiting on.[m
[32m+[m
[32m+[m[32mbool pending()[m
[32m+[m
[32m+[m[32mReturns true if status request is still waiting for event or events to happen.[m
[32m+[m
[32m+[m[32mbool completed ()[m
[32m+[m
[32m+[m[32mReturns true if status request event has completed.[m
[32m+[m
[32m+[m[32mint getStatus()[m
[32m+[m
[32m+[m[32mReturns the status code passed to the status request object by the signal() and signalComplete() methods.[m
[32m+[m
[32m+[m[32mAny positive number is considered a successful completion status.[m
[32m+[m
[32m+[m[32mA 0 (zero) is considered a default successful completion status.[m
[32m+[m
[32m+[m[32mAny negative number is considered an error code and unsuccessful completion of a request.[m
[32m+[m
[32m+[m[32mint getCount()[m
[32m+[m
[32m+[m[32mReturns the count of events not yet completed. Typically by default a StatusRequest object only[m[41m [m
[32m+[m[32m  waits on 1 event. However, in the situations where a StatusRequest object is waiting on multiple[m[41m [m
[32m+[m[32m  events, a number of events not yet completed is returned by this method.[m
[32m+[m
[32m+[m[32mTASK SCHEDULER:[m
[32m+[m[32mCREATION:[m
[32m+[m
[32m+[m[32mScheduler()[m
[32m+[m
[32m+[m[32mDefault constructor.[m
[32m+[m
[32m+[m[32mTakes no parameters. Creates task scheduler with default parameters and an empty task queue.[m
[32m+[m
[32m+[m[32mvoid init()[m
[32m+[m
[32m+[m[32mInitializes the task queue and scheduler parameters, Executed as part of constructor, so don't need[m[41m  [m
[32m+[m[32m  to be explicitly called after creation.[m
[32m+[m
[32m+[m[32mNote: be default (if compiled with _TASK_TIMECRITICAL enabled) scheduler is allowed to put processor[m[41m [m
[32m+[m[32m  to IDLE sleep mode. If this behavior was changed via allowSleep() method, inti() will NOT reset allow[m[41m [m
[32m+[m[32m  sleep particular parameter.[m
[32m+[m
[32m+[m[32mvoid addTask(Task& aTask)[m
[32m+[m
[32m+[m[32mAdds task aTask to the execution queue (or chain) of tasks by appending it to the end of the chain.[m[41m [m
[32m+[m[32m  If two tasks are scheduled for execution, the sequence will match the order in which tasks were[m[41m [m
[32m+[m[32m  appended to the chain. However, in reality, due to different timing of task execution, the actual[m[41m [m
[32m+[m[32m  order may be different.[m
[32m+[m
[32m+[m[32mNote: Currently, changing the execution sequence in a chain dynamically is not supported.[m
[32m+[m
[32m+[m[32mIf you need to reorder the chain sequence ‚Äì initialize the scheduler and re-add the tasks in a different order.[m
[32m+[m
[32m+[m[32mvoid deleteTask(Task& aTask)[m
[32m+[m
[32m+[m[32mDeletes task aTask from the execution chain. The chain of remaining tasks is linked together (i.e[m
[32m+[m
[32m+[m[32mif original task chain is 1 ‚Üí 2 ‚Üí 3 ‚Üí 4, deleting 3 will result in 1 ‚Üí 2 ‚Üí 4).[m
[32m+[m
[32m+[m[32mNote: it is not required to delete a task from the chain. A disabled task will not be executed[m[41m [m
[32m+[m[32m  anyway, but you save a few microseconds per scheduling pass by deleting it, since it is not even[m[41m [m
[32m+[m[32m  considered for execution.[m
[32m+[m
[32m+[m[32mAn example of proper use of this method would be running some sort of initialize task in the chain,[m[41m [m
[32m+[m[32m  and then deleting it from the chain since it only needs to run once.[m
[32m+[m
[32m+[m[32mvoid allowSleep(bool aState)[m
[32m+[m
[32m+[m[32mAvailable in API only if compiled with _TASK_TIMECRITICAL enabled. Controls whether scheduler is[m[41m [m
[32m+[m[32m  allowed ( aState = true ), or not ( aState = false ) to put processor into IDLE sleep mode in case[m[41m [m
[32m+[m[32m  not tasks are scheduled to run.[m
[32m+[m
[32m+[m[32mThe default behavior of scheduler upon creation is to allow sleep mode.[m
[32m+[m
[32m+[m[32mvoid enableAll(bool aRecursive= true);[m
[32m+[m[32mvoid disableAll(bool aRecursive= true);[m
[32m+[m
[32m+[m[32menables and disables (respectively) all tasks in the chain. Convenient if your need to enable/disable[m[41m [m
[32m+[m[32m  majority of the tasks (i.e. disable all and then enable one).[m
[32m+[m
[32m+[m[32mIf support for layered task priority is enabled, supplying aRecursive parameter will enable/disable[m[41m [m
[32m+[m[32m  higher priority tasks as well ( true , default), or tasks only on this priority layer ( false ).[m
[32m+[m
[32m+[m[32mTask& currentTask()[m
[32m+[m
[32m+[m[32mReturns reference to the task, currently executing via execute() loop OR for OnEnable and OnDisable[m[41m [m
[32m+[m[32m  methods, reference to the task being enabled or disabled.[m
[32m+[m
[32m+[m[32mThis distinction is important because one task can activate the other, and OnEnable should be[m[41m [m
[32m+[m[32m  referring to the task being enabled, not being executed.[m
[32m+[m
[32m+[m[32mCould be used by callback methods to identify which Task actually invoked this callback method.[m
[32m+[m
[32m+[m[32mvoid* currentLts()[m
[32m+[m
[32m+[m[32mReturns pointer to Local Task Storage of the task, currently executing via execute() loop OR for[m[41m [m
[32m+[m[32m  OnEnable and OnDisable methods, task being enabled or disabled.[m
[32m+[m
[32m+[m[32mvoid startNow (bool aRecursive= true)[m
[32m+[m
[32m+[m[32mSets ALL active tasks in the execution chain to start execution immediately. Should be placed at the[m[41m [m
[32m+[m[32m  end of setup() method to prevent task execution race due to long running setup tasks (hardware[m[41m [m
[32m+[m[32m    initialization, etc.) following task activation.[m
[32m+[m
[32m+[m[32mIf support for layered task priority is enabled, supplying aRecursive parameter will set immediate[m[41m [m
[32m+[m[32m  execution for higher priority tasks as well ( true , default), or tasks only on this priority[m[41m [m
[32m+[m[32m  layer ( false ).[m
[32m+[m
[32m+[m[32mNOTE: if setup() method does not contain long running tasks, use of startNow() method is not necessary.[m[41m [m
[32m+[m[32m  Alternatively, all tasks could be enabled after long-running setup() processes, thus eliminating the[m[41m [m
[32m+[m[32m  need to use startNow() method.[m
[32m+[m
[32m+[m[32mNOTE: Any tasks which should execute after a delay , should be explicitly delayed after call to startNow() method.[m
[32m+[m
[32m+[m[32mlong timeUntilNextIteration (Task& aTask)[m
[32m+[m
[32m+[m[32mInquire when a particular Task is scheduled to run next time.[m
[32m+[m
[32m+[m[32mReturns time in millis (or micros) until the next scheduled iteration of a task.[m
[32m+[m
[32m+[m[32mReturns 0 if next iteration is already due (or overdue).[m
[32m+[m
[32m+[m[32mReturns -1 if a Task is not active or waiting on an event, and next iteration runtime cannot be determined.[m
[32m+[m
[32m+[m[32mbool execute()[m
[32m+[m
[32m+[m[32mExecutes one scheduling pass, including (in case of the base priority scheduler) end-of-pass sleep.[m[41m [m
[32m+[m[32m  This method should be placed inside the loop() method of the sketch. Since execute exits after every[m[41m [m
[32m+[m[32m  pass, you can put additional statements after execute inside the loop().[m
[32m+[m
[32m+[m[32mIf layered task prioritization is enabled, all higher priority tasks will be evaluated and invoked by[m[41m [m
[32m+[m[32m  the base execute() method. There is no need to call execute() of the higher priority schedulers explicitly.[m
[32m+[m
[32m+[m[32mGenerally, base priority execute will perform the following steps:[m
[32m+[m
[32m+[m[32m    Call higher priority scheduler's execute method, if provided.[m
[32m+[m[32m    Ignore task completely if it is disabled.[m
[32m+[m[32m    Disable task if it ran out of iterations (calling OnDisable, if necessary).[m
[32m+[m[32m    Check if task is waiting on a StatusRequest object, and make appropriate scheduling arrangements[m
[32m+[m[32m    Perform necessary timing calculations[m
[32m+[m[32m    Invoke task's callback method, if it is time to do so, and one is provided.[m
[32m+[m[32m    Put microcontroller to sleep (if requested and supported) if none of the tasks were invoked.[m
[32m+[m
[32m+[m[32mPlease NOTE: schedule-related calculations are performed prior to task's callback method invocation.[m[41m [m
[32m+[m[32m  This allows tasks to manipulate their runtime parameters (like execution interval) directly.[m
[32m+[m
[32m+[m[32mbool isOverrun()[m
[32m+[m
[32m+[m[32mIf library is compiled with _TASK_TIMECRITICAL enabled, this method returns true if currently invoked[m[41m [m
[32m+[m[32m  task has overrun its scheduled start time when it was invoked. Returns false if task has been invoked[m[41m [m
[32m+[m[32m  according to schedule.[m
[32m+[m
[32m+[m[32mTASK PRIORITY:[m
[32m+[m
[32m+[m[32mvoid setHighPriorityScheduler(Scheduler* aScheduler);[m
[32m+[m
[32m+[m[32mIf library is compiled with _TASK_PRIORITY enabled, this method associates current scheduler with[m[41m [m
[32m+[m[32m  a higher priority scheduler.[m
[32m+[m
[32m+[m[32mNOTE: Only one execute() method needs to be explicitly called in the main loop(). That is the[m[41m [m
[32m+[m[32m  execute method of base priority scheduler. All higher priority schedulers are called by the base[m[41m [m
[32m+[m[32m  priority scheduler.[m
[32m+[m
[32m+[m[32mstatic Scheduler& currentScheduler()[m
[32m+[m
[32m+[m[32mIf library is compiled with _TASK_PRIORITY enabled, this method returns reference to a scheduler,[m[41m [m
[32m+[m[32m  which invoked current task.[m
[32m+[m
[32m+[m[32mNOTE: Please refer to examples 11 and 12 for illustration of Task Priority functionality[m
[32m+[m
[32m+[m[32mCONSTANTS:[m
[32m+[m
[32m+[m[32mTASK_SECOND (1000 millis or 1000000 micros)[m
[32m+[m
[32m+[m[32mTask interval of 1 second[m
[32m+[m
[32m+[m[32mTASK_MINUTE (60000 millis or 60000000 micros)[m
[32m+[m
[32m+[m[32mTask interval of 1 minute[m
[32m+[m
[32m+[m[32mTASK_HOUR (3600000 millis or 3600000000 micros)[m
[32m+[m
[32m+[m[32mTask interval of 1 hour[m
[32m+[m
[32m+[m[32mTASK_FOREVER (-1)[m
[32m+[m
[32m+[m[32mTask number of iterations for infinite number of iterations[m
[32m+[m
[32m+[m[32mTASK_ONCE (1)[m
[32m+[m
[32m+[m[32mTask single iteration[m
[32m+[m
[32m+[m[32mTASK_IMMEDIATE (0)[m
[32m+[m
[32m+[m[32mTask interval for immediate execution[m
[32m+[m[32mIMPLEMENTATION SCENARIOS AND IDEAS:[m
[32m+[m[32m1. EVENT DRIVEN PROGRAMMING[m
[32m+[m
[32m+[m[32mEach of the processes of your application becomes a separate and distinct programming area, which may[m[41m [m
[32m+[m[32m  or may not interact and control each other.[m
[32m+[m
[32m+[m[32mExample:[m
[32m+[m
[32m+[m[32mIn a plant watering system you need to measure soil humidity, control pump and display the results[m
[32m+[m
[32m+[m[32mEach of the areas becomes a task:[m
[32m+[m
[32m+[m[32mTask tMeasure (TMEASURE_INTERVAL*SECOND, TASK_FOREVER, &measureCallback);[m
[32m+[m[32mTask tWater   (TWATER_INTERVAL*SECOND, RETRIES, &waterCallback);[m
[32m+[m[32mTask tDisplay (TDISPLAY_INTERVAL*SECOND, TASK_FOREVER, &displayCallback);[m
[32m+[m
[32m+[m[32mScheduler taskManager;[m
[32m+[m
[32m+[m[32mFurther, once you turn on the pump, you keep it running for TWATER_INTERVAL interval and then turn it off.[m[41m [m
[32m+[m[32m  Turning off a pump is also a task which only needs to run once for every time the pump is turned on:[m
[32m+[m
[32m+[m[32mTask tWaterOff (WATERTIME*SECOND, TASK_ONCE, &waterOffCallback);[m
[32m+[m
[32m+[m[32mExample of the callback method:[m
[32m+[m
[32m+[m[32mvoid waterOffCallback() {[m
[32m+[m[32m    motorOff();[m
[32m+[m[32m    tWater.enableDelayed();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mor[m
[32m+[m
[32m+[m[32mvoid waterCallback() {[m
[32m+[m[32m    if (tWater.getIterations()) {[m
[32m+[m
[32m+[m[32m// If this is not the last iteration = turn the pump on[m
[32m+[m[32m      motorOn();[m
[32m+[m[32m      tWaterOff.set(parameters.watertime \* TASK\_SECOND, TASK\_ONCE, &waterOffCallback);[m
[32m+[m[32m      tWaterOff.enableDelayed();[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m// We could not reach target humidity ‚Äì something is wrong[m
[32m+[m[32m    motorOff;[m
[32m+[m[32m    taskManager.disableAll();[m
[32m+[m[32m    tError.enable();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mYour sample setup() and loop() (partially) are as follows.[m
[32m+[m
[32m+[m[32mNote: please note that tWater is not activated during setup(). It is activated by tMeasure callback[m[41m [m
[32m+[m[32m  once the watering conditions are met.[m
[32m+[m
[32m+[m[32mvoid setup()[m
[32m+[m
[32m+[m[32m   ...[m
[32m+[m
[32m+[m[32m  tWater.setIterations(parameters.retries);[m
[32m+[m[32m  tWaterOff.setInterval(parameters.watertime \* SECOND);[m
[32m+[m
[32m+[m
[32m+[m[32m  taskManager.init();[m
[32m+[m[32m  taskManager.addTask(tMeasure);[m
[32m+[m[32m  taskManager.addTask(tDisplay);[m
[32m+[m[32m  taskManager.addTask(tWater);[m
[32m+[m[32m  taskManager.addTask(tWaterOff);[m
[32m+[m
[32m+[m[32m  tMeasure.enable();[m
[32m+[m[32m  tDisplay.enable();[m
[32m+[m
[32m+[m[32m  currentHumidity = measureHumidity();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mvoid loop ()[m
[32m+[m[32m{[m
[32m+[m[32m  taskManager.execute();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m2."NATIVE" SUPPORT FOR FINITE STATE MACHINE[m
[32m+[m
[32m+[m[32mDefine "states" as callback method or methods. Each callback method executes activities specific to a[m[41m [m
[32m+[m[32m  "state" and then "transitions" to the next state by assigning next callback method to the task.[m
[32m+[m
[32m+[m[32mTransition from one state to the next is achieved by setting next callback method at the end of preceding one.[m
[32m+[m
[32m+[m[32mNote: do not call the next callback method explicitly. Yield to the scheduler, and let the scheduler take[m[41m [m
[32m+[m[32m  care of next iteration during the next pass. (Thus giving other tasks change to run their callback methods).[m
[32m+[m
[32m+[m[32mExample: Blinking LED 2 times a second could be achieved this way[m
[32m+[m
[32m+[m[32mScheduler ts;[m
[32m+[m
[32m+[m[32mTask tLedBlinker (500, TASK\_FOREVER, &ledOnCallback, &ts, true);[m
[32m+[m
[32m+[m[32mvoid  ledOnCallback() {[m
[32m+[m
[32m+[m[32m turnLedOn();[m
[32m+[m
[32m+[m[32m tLedBlinker.setCallback(&ledOffCallback);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid  ledOffCallback() {[m
[32m+[m
[32m+[m[32m turnLedOff();[m
[32m+[m
[32m+[m[32m tLedBlinker.setCallback(&ledOnCallback);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32msetup() {[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mloop () {[m
[32m+[m
[32m+[m[32m ts.execute();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mObviously the example is simple, but gives the idea of how the tasks could be used to go through states.[m
[32m+[m[32m3. MULTIPLE POSSIBLE CALLBACKS FOR TASK[m
[32m+[m
[32m+[m[32mThere may be a need to select an option for callback method based on certain criteria, or randomly.[m
[32m+[m
[32m+[m[32mYou can achieve that by defining an array of callback method pointers and selecting one based on the[m[41m [m
[32m+[m[32m  criteria you need.[m
[32m+[m
[32m+[m[32mExample: when a robot detects an obstacle, it may go left, right backwards, etc. Each of the "directions"[m[41m [m
[32m+[m[32m  or "behaviors" are represented by a different callback methods.[m
[32m+[m
[32m+[m[32mAnother example of using multiple callbacks:[m
[32m+[m
[32m+[m[32mYou may need to "initialize" variables for a particular task.[m
[32m+[m
[32m+[m[32mIn this case, define a tasks with two callbacks:[m
[32m+[m
[32m+[m[32mTask **tWork** (T\_INTERVAL, TASK\_FOREVER, &workCallbackInit);[m
[32m+[m
[32m+[m[32m‚Ä¶[m
[32m+[m
[32m+[m[32mvoid  workCallbackInit() {[m
[32m+[m
[32m+[m[32m // do your initializationstuff here[m
[32m+[m
[32m+[m[32m // finally assigne the main callback method[m
[32m+[m
[32m+[m[32m tWork.setCallback(&workCallback);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid workCallback() {[m
[32m+[m
[32m+[m[32m // main callback method[m
[32m+[m
[32m+[m[32m ‚Ä¶[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mThe task will initialize during first execution pass and switch to "regular" callback execution[m[41m [m
[32m+[m[32m  starting with second pass. There is a delay between first and second passes of the task (scheduling[m[41m [m
[32m+[m[32m    period, if defined). In order to execute the second pass immediately after initialization first[m[41m [m
[32m+[m[32m    pass, change the above code like this:[m
[32m+[m
[32m+[m[32mvoid  workCallbackInit() {[m
[32m+[m
[32m+[m[32m // do your initializationstuff here[m
[32m+[m
[32m+[m[32m // finally assigne the main callback method[m
[32m+[m
[32m+[m[32m tWork.setCallback(&workCallback);[m
[32m+[m
[32m+[m[32m tWork.enable();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mThe task will run initialization first, then immediately second pass, and then switch to processing at[m[41m [m
[32m+[m[32m  regular intervals starting with a third pass.[m
[32m+[m
[32m+[m[32m4. INTERRUP-DRIVEN EXECUTION SUPPORT[m
[32m+[m
[32m+[m[32mIn case of interrupt-driven program flow, tasks could be scheduled to run once to request asynchronous[m[41m [m
[32m+[m[32m  execution (request), and then re-enabled (restarted) again with a different callback method to process[m[41m [m
[32m+[m[32m  the results.[m
[32m+[m
[32m+[m[32mExample : event driven distance calculation for ultrasonic pulses. EchoPin #6 triggers pin change interrupts[m[41m [m
[32m+[m[32m  on rising and falling edges to determine the length of ultrasonic pulse.[m
[32m+[m
[32m+[m[32m#include <DirectIO.h>[m
[32m+[m[32m#include <TaskScheduler.h>[m
[32m+[m[32m#include <PinChangeInt.h>[m
[32m+[m
[32m+[m
[32m+[m[32m#define  TRIGGERPIN 5[m
[32m+[m[32m#define  ECHOPIN    6[m
[32m+[m
[32m+[m[32mOutput<TRIGGERPIN>  pTrigger;[m
[32m+[m[32mInput<ECHOPIN>      pEcho;[m
[32m+[m
[32m+[m[32mScheduler r;[m
[32m+[m
[32m+[m[32mTask  tMeasure(TASK_SECOND, TASK_FOREVER, &measureCallback, &r, true);[m
[32m+[m[32mTask  tDisplay(TASK_SECOND, TASK_FOREVER, &displayCallback, &r, true);[m
[32m+[m[32mTask  tPing(TASK_IMMEDIATE, TASK_ONCE, &pingCalcCallback, &r, false);[m
[32m+[m
[32m+[m
[32m+[m[32mvolatile bool pulseBusy = false;[m
[32m+[m[32mvolatile bool pulseTimeout = false;[m
[32m+[m[32mvolatile unsigned long pulseStart = 0;[m
[32m+[m[32mvolatile unsigned long pulseStop = 0;[m
[32m+[m[32mvolatile unsigned long pingDistance = 0;[m
[32m+[m
[32m+[m
[32m+[m[32mvoid pingTrigger(unsigned long aTimeout) {[m
[32m+[m[32m  if (pulseBusy) return;  // do not trigger if in the middle of a pulse[m
[32m+[m[32m  if (pEcho == HIGH) return; // do not trigger if ECHO pin is high[m
[32m+[m
[32m+[m[32m  pulseBusy = true;[m
[32m+[m[32m  pulseTimeout = false;[m
[32m+[m
[32m+[m[32m  pTrigger = LOW;[m
[32m+[m[32m  delayMicroseconds(4);[m
[32m+[m[32m  pTrigger = HIGH;[m
[32m+[m
[32m+[m[32m  tPing.setInterval (aTimeout);[m
[32m+[m
[32m+[m[32m  delayMicroseconds(10);[m
[32m+[m[32m  pTrigger = LOW;[m
[32m+[m
[32m+[m[32m  tPing.restartDelayed(); // timeout countdown starts now[m
[32m+[m
[32m+[m[32m// will start the pulse clock on the rising edge of ECHO pin[m
[32m+[m
[32m+[m[32m  PCintPort::attachInterrupt(ECHOPIN, &pingStartClock, RISING);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Start clock on the **rising** edge of the ultrasonic pulse[m
[32m+[m[32mvoid pingStartClock() {[m
[32m+[m[32m  pulseStart = micros();[m
[32m+[m[32m  PCintPort::detachInterrupt(ECHOPIN); // not sure this is necessary[m
[32m+[m[32m  PCintPort::attachInterrupt(ECHOPIN, &pingStopClock, FALLING);[m
[32m+[m[32m  tPing.restartDelayed();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Stop clock on the **falling** edge of the ultrasonic pulse[m
[32m+[m[32mvoid pingStopClock() {[m
[32m+[m[32m  pulseStop = micros();[m
[32m+[m[32m  PcintPort::detachInterrupt(ECHOPIN);[m
[32m+[m
[32m+[m[32m  pingDistance = pulseStop - pulseStart;[m
[32m+[m[32m  pulseBusy = false;[m
[32m+[m[32m  tPing.disable(); // disable timeout[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Stop clock because of the timeout ‚Äì the wave did not return[m
[32m+[m[32mvoid pingCalcCallback() {[m
[32m+[m[32m  if (pulseBusy) {[m
[32m+[m[32m    pingStopClock();[m
[32m+[m[32m  }[m
[32m+[m[32m  pulseTimeout = true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Initial measure callback sets the trigger[m
[32m+[m[32mvoid measureCallback() {[m
[32m+[m[32m  if (pulseBusy) {  // already measuring, try again[m
[32m+[m[32m    tMeasure.enable();[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  pingTrigger(30); // 30 milliseconds or max range of ~5.1 meters[m
[32m+[m[32m  tMeasure.setCallback(&measureCallbackWait);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Wait for the measurement to[m
[32m+[m[32mvoid measureCallbackWait() {[m
[32m+[m[32m  if (pulseBusy) return;[m
[32m+[m[32m  tMeasure.setCallback(&measureCallback);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mbool state = true;[m
[32m+[m
[32m+[m[32mvoid displayCallback() {[m
[32m+[m[32m  char d[256];[m
[32m+[m
[32m+[m[32m  unsigned long cm = pingDistance \* 17 / 100; // cm[m
[32m+[m
[32m+[m[32m  snprintf(d, 256, "pulseStart = %8lu\tpulseStop=%8lu\tdistance, cm=%8lu", pulseStart, pulseStop, cm);[m
[32m+[m[32m  Serial.println(d);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m[32m  // put your setup code here, to run once:[m
[32m+[m
[32m+[m[32m  Serial.begin(115200);[m
[32m+[m
[32m+[m
[32m+[m[32m  pTrigger = LOW;[m
[32m+[m[32m  pEcho = LOW;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid loop() {[m
[32m+[m[32m  // put your main code here, to run repeatedly:[m
[32m+[m[32m  r.execute();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m5. USING ONENABLE AND ONDISBALE METHODS[m
[32m+[m
[32m+[m[32mConsider a task to flash onboard LED for 5 seconds with random frequency. Task should be repeated every[m[41m [m
[32m+[m[32m  30 seconds indefinitely. Since frequency is random, there are two challenges:[m
[32m+[m
[32m+[m[32m    We need to make sure LED is turned OFF at the last iteration[m
[32m+[m[32m    We need to calculate random frequency every time[m
[32m+[m
[32m+[m[32mBelow is the implementation using TaskScheduler[m
[32m+[m
[32m+[m[32m#define _TASK_SLEEP_ON_IDLE_RUN[m
[32m+[m
[32m+[m[32m#include <TaskScheduler.h>[m
[32m+[m
[32m+[m[32m#define  LEDPIN    13[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mScheduler ts;[m
[32m+[m
[32m+[m[32mTask tWrapper(30000, TASK_FOREVER, &WrapperCallback, &ts, true);[m
[32m+[m
[32m+[m[32mTask tBlink(5000, TASK_ONCE, NULL, &ts, false, &BlinkOnEnable, &BlinkOnDisable);[m
[32m+[m
[32m+[m[32mTask tLED(TASK_IMMEDIATE, TASK_FOREVER, NULL, &ts, false, NULL, &LEDOff);[m
[32m+[m
[32m+[m[32mvoid WrapperCallback() {[m
[32m+[m
[32m+[m[32m  Serial.println("In WrapperCallback");[m
[32m+[m
[32m+[m[32m  tBlink.restartDelayed();   // LED blinking  is initiated[m
[32m+[m
[32m+[m[32m               //every 30 seconds for 5 seconds[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m// Upon being enabled, tBlink will define the parameters[m
[32m+[m
[32m+[m[32m// and enable LED blinking task, which actually controls[m
[32m+[m
[32m+[m[32m// the hardware (LED in this example)[m
[32m+[m
[32m+[m[32mbool BlinkOnEnable() {[m
[32m+[m
[32m+[m[32m  Serial.println("In BlinkOnEnable");[m
[32m+[m
[32m+[m[32m  tLED.setInterval( 500 + random(501) );[m
[32m+[m
[32m+[m[32m  tLED.setCallback( &LEDOn);[m
[32m+[m
[32m+[m[32m  tLED.enable();[m
[32m+[m
[32m+[m[32m  return true;  // Task should be enabled[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// tBlink does not really need a callback method[m
[32m+[m
[32m+[m[32m// since it just waits for 5 seconds for the first[m
[32m+[m
[32m+[m[32m// and only iteration to occur. Once the iteration[m
[32m+[m
[32m+[m[32m// takes place, tBlink is disabled by the Scheduler,[m
[32m+[m
[32m+[m[32m// thus executing its OnDisable method below.[m
[32m+[m
[32m+[m[32mvoid BlinkOnDisable() {[m
[32m+[m
[32m+[m[32m  Serial.println("In BlinkOnDisable");[m
[32m+[m
[32m+[m[32m  tLED.disable();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid LEDOn () {[m
[32m+[m
[32m+[m[32m  Serial.println("In LEDOn");[m
[32m+[m
[32m+[m[32m  digitalWrite(LEDPIN, HIGH);[m
[32m+[m
[32m+[m[32m  tLED.setCallback( &LEDOff);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid LEDOff () {[m
[32m+[m
[32m+[m[32m  Serial.println("In LEDOff");[m
[32m+[m
[32m+[m[32m  digitalWrite(LEDPIN, LOW);[m
[32m+[m
[32m+[m[32m  tLED.setCallback( &LEDOn);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Note that LEDOff method serves as OnDisable method[m
[32m+[m
[32m+[m[32m// to make sure the LED is turned off when the tBlink[m
[32m+[m
[32m+[m[32m// task finishes (or disabled ahead of time)[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m
[32m+[m[32m  Serial.begin(115200);[m
[32m+[m
[32m+[m[32m  pinMode(LEDPIN, OUTPUT);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid loop() {[m
[32m+[m
[32m+[m[32m  // put your main code here, to run repeatedly:[m
[32m+[m
[32m+[m[32m  ts.execute();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m6. USING STATUS REQUEST OBJECTS[m
[32m+[m
[32m+[m[32mThis test emulates querying 3 sensors once every 10 seconds, each could respond with a different delay[m[41m [m
[32m+[m[32m  (ultrasonic sensors for instance) and printing a min value of the three when all three have reported[m[41m [m
[32m+[m[32m  their values.[m
[32m+[m
[32m+[m[32mThe overall timeout of 1 second is setup as well.[m
[32m+[m
[32m+[m[32mAn error message needs to be printed if a timeout occurred instead of a value.[m
[32m+[m
[32m+[m[32m#define _TASK_SLEEP_ON_IDLE_RUN[m
[32m+[m
[32m+[m[32m#define _TASK_STATUS_REQUEST[m
[32m+[m
[32m+[m[32m#include <TaskScheduler.h>[m
[32m+[m
[32m+[m[32mStatusRequest measure;[m
[32m+[m
[32m+[m[32mScheduler ts;[m
[32m+[m
[32m+[m[32mTask tCycle(10000, TASK_FOREVER, &CycleCallback, &ts, true);[m
[32m+[m
[32m+[m[32mTask tMeasure(TASK_SECOND, TASK_ONCE, &MeasureCallback, &ts, false, &MeasureEnable, &MeasureDisable);[m
[32m+[m
[32m+[m[32mTask tCalculate(&CalcCallback, &ts);[m
[32m+[m
[32m+[m[32mTask tSensor1(TASK_IMMEDIATE, TASK_ONCE, &S1Callback, &ts, false, &S1Enable);[m
[32m+[m
[32m+[m[32mTask tSensor2(TASK_IMMEDIATE, TASK_ONCE, &S2Callback, &ts, false, &S2Enable);[m
[32m+[m
[32m+[m[32mTask tSensor3(TASK_IMMEDIATE, TASK_ONCE, &S3Callback, &ts, false, &S3Enable);[m
[32m+[m
[32m+[m
[32m+[m[32mlong distance, d1, d2, d3;[m
[32m+[m
[32m+[m[32mvoid CycleCallback() {[m
[32m+[m
[32m+[m[32m  Serial.println("CycleCallback: Initiating measurement cycle every 10 seconds");[m
[32m+[m
[32m+[m[32m  tMeasure.restartDelayed();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mbool MeasureEnable() {[m
[32m+[m
[32m+[m[32m  Serial.println("MeasureEnable: Activating sensors");[m
[32m+[m
[32m+[m[32m  distance = 0;[m
[32m+[m
[32m+[m[32m  measure.setWaiting(3); // Set the StatusRequest to wait for 3 signals.[m
[32m+[m
[32m+[m[32m  tCalculate.waitFor(&measure);[m
[32m+[m
[32m+[m[32m  tSensor1.restart();[m
[32m+[m
[32m+[m[32m  tSensor2.restart();[m
[32m+[m
[32m+[m[32m  tSensor3.restart();[m
[32m+[m
[32m+[m[32m  return true;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid MeasureCallback() {[m
[32m+[m
[32m+[m[32m  Serial.println("MeasureCallback: Invoked by calculate task or one second later");[m
[32m+[m
[32m+[m[32m  if (measure.pending()) {[m
[32m+[m
[32m+[m[32m    tCalculate.disable();[m
[32m+[m
[32m+[m[32m    measure.signalComplete(-1);  // signal error[m
[32m+[m
[32m+[m[32m    Serial.println("MeasureCallback: Timeout!");[m
[32m+[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  else {[m
[32m+[m
[32m+[m[32m    Serial.print("MeasureCallback: Min distance=");Serial.println(distance);[m
[32m+[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid MeasureDisable() {[m
[32m+[m
[32m+[m[32m  Serial.println("MeasureDisable: Cleaning up");[m
[32m+[m
[32m+[m[32m  tSensor1.disable();[m
[32m+[m
[32m+[m[32m  tSensor2.disable();[m
[32m+[m
[32m+[m[32m  tSensor3.disable();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mvoid CalcCallback() {[m
[32m+[m
[32m+[m[32m  Serial.println("CalcCallback: calculating");[m
[32m+[m
[32m+[m[32m  distance = -1;[m
[32m+[m
[32m+[m[32m  if ( measure.getStatus() >= 0) {  // only calculate if statusrequest ended successfully[m
[32m+[m
[32m+[m[32m    distance = d1 < d2 ? d1 : d2;[m
[32m+[m
[32m+[m[32m    distance = d3 < distance ? d3 : distance;[m
[32m+[m
[32m+[m[32m    tMeasure.forceNextIteration();[m
[32m+[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m/** Simulation code for sensor 1[m
[32m+[m
[32m+[m[32m *  ----------------------------[m
[32m+[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mbool S1Enable() {[m
[32m+[m
[32m+[m[32m  Serial.print("S1Enable: Triggering sensor1. Delay=");[m
[32m+[m
[32m+[m[32m  tSensor1.setInterval( random(1200) );  // Simulating sensor delay, which could go over 1 second and cause timeout[m
[32m+[m
[32m+[m[32m  d1 = 0;[m
[32m+[m
[32m+[m[32m  Serial.println( tSensor1.getInterval() );[m
[32m+[m
[32m+[m[32m  return true;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid S1Callback() {[m
[32m+[m
[32m+[m[32m  Serial.print("S1Callback: Emulating measurement. d1=");[m
[32m+[m
[32m+[m[32m  d1 = random(501); // pick a value from 0 to 500 "centimeters" simulating a measurement[m
[32m+[m
[32m+[m[32m  measure.signal();[m
[32m+[m
[32m+[m[32m  Serial.println(d1);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m/** Simulation code for sensor 2[m
[32m+[m
[32m+[m[32m *  ----------------------------[m
[32m+[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mbool S2Enable() {[m
[32m+[m
[32m+[m[32m  Serial.print("S2Enable: Triggering sensor2. Delay=");[m
[32m+[m
[32m+[m[32m  tSensor2.setInterval( random(1200) );  // Simulating sensor delay, which could go over 1 second and cause timeout[m
[32m+[m
[32m+[m[32m  d2 = 0;[m
[32m+[m
[32m+[m[32m  Serial.println( tSensor2.getInterval() );[m
[32m+[m
[32m+[m[32m  return true;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid S2Callback() {[m
[32m+[m
[32m+[m[32m  Serial.print("S2Callback: Emulating measurement. d2=");[m
[32m+[m
[32m+[m[32m  d2 = random(501); // pick a value from 0 to 500 "centimeters" simulating a measurement[m
[32m+[m
[32m+[m[32m  measure.signal();[m
[32m+[m
[32m+[m[32m  Serial.println(d2);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m/** Simulation code for sensor 3[m
[32m+[m
[32m+[m[32m *  ----------------------------[m
[32m+[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mbool S3Enable() {[m
[32m+[m
[32m+[m[32m  Serial.print("S3Enable: Triggering sensor3. Delay=");[m
[32m+[m
[32m+[m[32m  tSensor3.setInterval( random(1200) );  // Simulating sensor delay, which could go over 1 second and cause timeout[m
[32m+[m
[32m+[m[32m  d3 = 0;[m
[32m+[m
[32m+[m[32m  Serial.println( tSensor3.getInterval() );[m
[32m+[m
[32m+[m[32m  return true;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid S3Callback() {[m
[32m+[m
[32m+[m[32m  Serial.print("S3Callback: Emulating measurement. d3=");[m
[32m+[m
[32m+[m[32m  d3 = random(501); // pick a value from 0 to 500 "centimeters" simulating a measurement[m
[32m+[m
[32m+[m[32m  measure.signal();[m
[32m+[m
[32m+[m[32m  Serial.println(d3);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m/** Main Arduino code[m
[32m+[m
[32m+[m[32m *  Not much is left here - everything is taken care of by the framework[m
[32m+[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m
[32m+[m[32m  Serial.begin(115200);[m
[32m+[m
[32m+[m[32m  Serial.println("TaskScheduler StatusRequest Sensor Emulation Test. Complex Test.");[m
[32m+[m
[32m+[m[32m  randomSeed(analogRead(A1)+`millis()`);[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid loop() {[m
[32m+[m
[32m+[m[32m  ts.execute();[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m7. USING LOCAL TASK STORAGE POINTER[m
[32m+[m
[32m+[m[32mTasks can store a pointer to specific variable, structure or array, which represents variables specific[m[41m [m
[32m+[m[32m  for a particular task. This may be needed if you plan to use same callback method for multiple tasks.[m
[32m+[m
[32m+[m[32mConsider a scenario where you have several sensors of the same type. The actual process of triggering[m[41m [m
[32m+[m[32m  measurement and collecting information is identical. The only difference is the sensor address and a[m[41m [m
[32m+[m[32m  variable for storing the results.[m
[32m+[m
[32m+[m[32mIn this case each of the tasks, which performs measurement will utilize the same callback methods. The[m[41m [m
[32m+[m[32m  only difference will be the variables (specific for each of the sensor).[m
[32m+[m
[32m+[m[32mLet's define a sensor data structure and declare a couple of variables (for 2 sensors for instance)[m
[32m+[m
[32m+[m[32mtypedef struct {[m
[32m+[m
[32m+[m[32m unsigned int  address;[m
[32m+[m
[32m+[m[32m unsigned long distance;[m
[32m+[m
[32m+[m[32m} sensor_data;[m
[32m+[m
[32m+[m[32msensor_data s1, s2;[m
[32m+[m
[32m+[m[32mTwo separate tasks are running to collect sensor data.[m
[32m+[m
[32m+[m[32m(Note that both tasks refer to the same callback methods)[m
[32m+[m
[32m+[m[32mScheduler ts;[m
[32m+[m
[32m+[m[32mTask t1(100, TASK_FOREVER, &Measure, &ts, false, &MeasureOn);[m
[32m+[m
[32m+[m[32mTask t2(100, TASK_FOREVER, &Measure, &ts, false, &MeasureOn);[m
[32m+[m
[32m+[m[32mAssign pointers to the respective variables in the setup() method:[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m
[32m+[m[32m‚Ä¶[m
[32m+[m
[32m+[m[32mt1.setLtsPointer(&s1);[m
[32m+[m
[32m+[m[32mt2.setLtsPointer(&s2);[m
[32m+[m
[32m+[m[32m‚Ä¶[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mObtain reference to specific sensor_data structure inside the common callback method:[m
[32m+[m
[32m+[m[32mvoid Measure() {[m
[32m+[m
[32m+[m[32m Task& T = ts.currentTask();[m
[32m+[m
[32m+[m[32m Sensor_data& V = *((sensor_data*) T.getLtsPointer());[m
[32m+[m
[32m+[m[32m// For t1, V will be pointing at s1[m
[32m+[m
[32m+[m[32m// For t2, V will be pointing at s2[m
[32m+[m
[32m+[m[32m// Alternatively use the Scheduler method:[m
[32m+[m
[32m+[m[32m Sensor_data& V1 = *((sensor_data*) ts.currentLts());[m
[32m+[m
[32m+[m[32m‚Ä¶[m
[32m+[m
[32m+[m[32m V.distance = // <calculate your values here>;[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m8. ENABLING TASK PRIORITIZATION[m
[32m+[m
[32m+[m[32mIn certain cases you want a task to be invoked before others in case of scheduling collision[m[41m [m
[32m+[m[32m  (tasks ready to be invoked at the same time). In a flat execution chain scenario tasks are evaluated[m[41m [m
[32m+[m[32m  for execution in the order they were added to the chain. Therefore a single task has to wait for the[m[41m [m
[32m+[m[32m  rest of the chain to be evaluated to get a chance again.[m
[32m+[m
[32m+[m[32mConsider a scenario where a task taking gyroscope measurements has to be invoked as close to the actual[m[41m [m
[32m+[m[32m  scheduling time as possible. That is when task prioritization comes to help.[m
[32m+[m
[32m+[m[32mLet's say tasks t4 and t5 are taking measurements from gyroscope and accelerometer, and tasks t1, t2 and t3[m[41m [m
[32m+[m[32m  are doing something less important.[m
[32m+[m
[32m+[m[32mThis is how such setup is coded:[m
[32m+[m
[32m+[m[32m#define _TASK_PRIORITY[m
[32m+[m
[32m+[m[32m#include <TaskScheduler.h>[m
[32m+[m
[32m+[m[32mScheduler r, hpr;[m
[32m+[m
[32m+[m[32m// Tasks[m
[32m+[m
[32m+[m[32mTask t1(1000, TASK_FOREVER, &tCallback, &r);  //base priority[m
[32m+[m
[32m+[m[32mTask t2(2000, TASK_FOREVER, &tCallback, &r);[m
[32m+[m
[32m+[m[32mTask t3(3000, TASK_FOREVER, &tCallback, &r);[m
[32m+[m
[32m+[m[32mTask t4(10, TASK_FOREVER, &tCallback, &hpr);  // higher priority[m
[32m+[m
[32m+[m[32mTask t5(100, TASK_FOREVER, &tCallback, &hpr);  //higher priority[m
[32m+[m
[32m+[m[32m‚Ä¶[m
[32m+[m
[32m+[m[32mvoid setup () {[m
[32m+[m
[32m+[m[32m  ‚Ä¶[m
[32m+[m
[32m+[m[32m  r.setHighPriorityScheduler(&hpr);[m
[32m+[m
[32m+[m[32m  r.enableAll(true); // this will recursively enable the higher priority tasks as well[m
[32m+[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m9. FUTHER INFROMATION[m
[32m+[m
[32m+[m[32mPlease refer to examples, provided with TaskScheduler package for further information and implementation options.[m
[32m+[m
[32m+[m[32mReal time examples of TaskScheduler are available here:[m
[32m+[m
[32m+[m[32m    http://www.instructables.com/id/APIS-Automated-Plant-Irrigation-System/[m
[32m+[m[32m    http://www.instructables.com/id/Wave-your-hand-to-control-OWI-Robotic-Arm-no-strin/[m
[32m+[m[32m    http://www.instructables.com/id/Arduino-Nano-based-Hexbug-Scarab-Robotic-Spider[m
[32m+[m
[1mdiff --git a/README b/README[m
[1mindex 4332e94..4ab4eb2 100644[m
[1m--- a/README[m
[1m+++ b/README[m
[36m@@ -1 +1,16 @@[m
[31m-This project contains all code to manage wifi and hotspot settings.[m
\ No newline at end of file[m
[32m+[m[32m        ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì‚ï∫‚î≥‚îì‚îè‚î≥‚îì‚îè‚îÅ‚ï∏[m
[32m+[m[32m        ‚î£‚î≥‚îõ‚î£‚ï∏ ‚î£‚îÅ‚î´ ‚îÉ‚îÉ‚îÉ‚îÉ‚îÉ‚î£‚ï∏[m[41m [m
[32m+[m[32m        ‚ïπ‚îó‚ï∏‚îó‚îÅ‚ï∏‚ïπ ‚ïπ‚ï∫‚îª‚îõ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32mThis project contains all code to manage wifi and hotspot settings.[m
[32m+[m
[32m+[m[32m=> Data folder is a filesystem for the esp8266 board.[m
[32m+[m
[32m+[m[32m=> Extras folder is folder for codes for texting puspose. I decided to maintain[m[41m [m
[32m+[m[32m    it for future reference rather than deleting it..[m
[32m+[m
[32m+[m[32m=> src file contains all the actual binaries and all header files which are directly[m
[32m+[m[32m    included in the main scetch itself.[m
\ No newline at end of file[m
[1mdiff --git a/data/alarms/alarm0 b/data/alarms/alarm0[m
[1mnew file mode 100644[m
[1mindex 0000000..c4fbe07[m
[1m--- /dev/null[m
[1m+++ b/data/alarms/alarm0[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m{"free":0,"enable":0,"pin":-1,"onHr":-1,"onMin":-1,"offHr":-1,"offMin":-1,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":-1,"day":-1,"month":-1,"year":-1}[m
\ No newline at end of file[m
[1mdiff --git a/data/alarms/alarm1 b/data/alarms/alarm1[m
[1mnew file mode 100644[m
[1mindex 0000000..c99b98f[m
[1m--- /dev/null[m
[1m+++ b/data/alarms/alarm1[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m{"free":1,"enable":1,"pin":2,"onHr":0,"onMin":1,"offHr":0,"offMin":2,"sun":1,"mon":1,"tue":1,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
\ No newline at end of file[m
[1mdiff --git a/data/alarms/alarm2 b/data/alarms/alarm2[m
[1mnew file mode 100644[m
[1mindex 0000000..ec9b999[m
[1m--- /dev/null[m
[1m+++ b/data/alarms/alarm2[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m{"free":1,"enable":1,"pin":2,"onHr":0,"onMin":3,"offHr":0,"offMin":4,"sun":1,"mon":1,"tue":1,"wed":1,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
\ No newline at end of file[m
[1mdiff --git a/data/alarms/alarm3 b/data/alarms/alarm3[m
[1mnew file mode 100644[m
[1mindex 0000000..c4fbe07[m
[1m--- /dev/null[m
[1m+++ b/data/alarms/alarm3[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m{"free":0,"enable":0,"pin":-1,"onHr":-1,"onMin":-1,"offHr":-1,"offMin":-1,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":-1,"day":-1,"month":-1,"year":-1}[m
\ No newline at end of file[m
[1mdiff --git a/data/ap b/data/wifi/ap[m
[1msimilarity index 100%[m
[1mrename from data/ap[m
[1mrename to data/wifi/ap[m
[1mdiff --git a/data/app b/data/wifi/app[m
[1msimilarity index 100%[m
[1mrename from data/app[m
[1mrename to data/wifi/app[m
[1mdiff --git a/data/device b/data/wifi/device[m
[1msimilarity index 100%[m
[1mrename from data/device[m
[1mrename to data/wifi/device[m
[1mdiff --git a/data/lock b/data/wifi/lock[m
[1msimilarity index 100%[m
[1mrename from data/lock[m
[1mrename to data/wifi/lock[m
[1mdiff --git a/data/st b/data/wifi/st[m
[1msimilarity index 100%[m
[1mrename from data/st[m
[1mrename to data/wifi/st[m
[1mdiff --git a/data/stp b/data/wifi/stp[m
[1msimilarity index 100%[m
[1mrename from data/stp[m
[1mrename to data/wifi/stp[m
[1mdiff --git a/data/user b/data/wifi/user[m
[1msimilarity index 100%[m
[1mrename from data/user[m
[1mrename to data/wifi/user[m
[1mdiff --git a/extras/alaemHomeHtml.html b/extras/alaemHomeHtml.html[m
[1mnew file mode 100644[m
[1mindex 0000000..136e16b[m
[1m--- /dev/null[m
[1m+++ b/extras/alaemHomeHtml.html[m
[36m@@ -0,0 +1,1561 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Alarms</title>[m
[32m+[m[32m    <link rel="stylesheet" href="http://192.168.166.155/style.css" />[m
[32m+[m[32m    <style>[m
[32m+[m[32m      .card {[m
[32m+[m[32m        width: 380px;[m
[32m+[m[32m        border-radius: 20px;[m
[32m+[m[32m        margin-bottom: 10px;[m
[32m+[m[32m        box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m      }[m
[32m+[m[32m      .middleIt {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        position: relative;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m    <script src="http://192.168.166.155/jquery.js"></script>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body id="body">[m
[32m+[m[32m    <br /><br />[m
[32m+[m
[32m+[m[32m    <div id="mainBody" class="middleIt">[m
[32m+[m[32m      <div[m
[32m+[m[32m        style="[m
[32m+[m[32m          position: absolute;[m
[32m+[m[32m          background-color: pink;[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          height: 380px;[m
[32m+[m[32m          border-radius: 20px 20px 0 0;[m
[32m+[m[32m          z-index: -1;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        "[m
[32m+[m[32m        id="hider0"[m
[32m+[m[32m      ></div>[m
[32m+[m[32m      <div class="card">[m
[32m+[m[32m        <form action="" id="formNum0">[m
[32m+[m[32m          <div class="custom-select">[m
[32m+[m[32m            <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m            <button[m
[32m+[m[32m              class="unit special"[m
[32m+[m[32m              type="button"[m
[32m+[m[32m              id="buttonNum0"[m
[32m+[m[32m              style="[m
[32m+[m[32m                float: left;[m
[32m+[m[32m                box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;[m
[32m+[m[32m                margin-right: 30px;[m
[32m+[m[32m              "[m
[32m+[m[32m            >[m
[32m+[m[32m              --[m
[32m+[m[32m            </button>[m
[32m+[m[32m            <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m            <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m            <select id="select0">[m
[32m+[m[32m              <option value="option">Select Appliance &#9662;</option>[m
[32m+[m[32m            </select>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Extra info -->[m
[32m+[m[32m          <h2 id="alarmInfo"></h2>[m
[32m+[m[32m          <h1 id="alarmAssist"></h1>[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            id="onHr0"[m
[32m+[m[32m            placeholder="On Hr"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <span style="float: right; width: 220px; margin-top: -10px">[m
[32m+[m[32m            <h2 id="showOnceInfo">[m
[32m+[m[32m              You can only use ON function or OFF function. If On is filled OFF[m
[32m+[m[32m              will be IGNORED.. This alarm will be disabled once its completed.[m
[32m+[m[32m              No date means todays date applied.[m
[32m+[m[32m            </h2>[m
[32m+[m[32m          </span>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonMon0" ison="0">[m
[32m+[m[32m            mon[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonTue0" ison="0">[m
[32m+[m[32m            Tue[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonWed0" ison="0">[m
[32m+[m[32m            wed[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="On Min"[m
[32m+[m[32m            id="onMin0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <button class="unit" type="button" id="buttonThu0" ison="0">[m
[32m+[m[32m            Thu[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonFri0" ison="0">[m
[32m+[m[32m            Fri[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonSat0" ison="0">[m
[32m+[m[32m            Sat[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="Off Hr"[m
[32m+[m[32m            id="offHr0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special del"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="buttonDel0"[m
[32m+[m[32m            isdel="0"[m
[32m+[m[32m            style="[m
[32m+[m[32m              width: 129px;[m
[32m+[m[32m              border-radius: 320px;[m
[32m+[m[32m              background-color: #ec4a4a33;[m
[32m+[m[32m            "[m
[32m+[m[32m          >[m
[32m+[m[32m            Delete[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonSun0" ison="0">[m
[32m+[m[32m            Sun[m
[32m+[m[32m          </button>[m
[32m+[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="Off Min"[m
[32m+[m[32m            id="offMin0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special once"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="buttonOnce0"[m
[32m+[m[32m            isonce="0"[m
[32m+[m[32m            style="padding: 27px"[m
[32m+[m[32m          >[m
[32m+[m[32m            Once[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special enable"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="enable0"[m
[32m+[m[32m            isenable="0"[m
[32m+[m[32m            style="width: 129px; border-radius: 320px"[m
[32m+[m[32m          >[m
[32m+[m[32m            Enable[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m[32m          <h2 id="manifest"></h2>[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <div id="myDate">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Day"[m
[32m+[m[32m              id="day0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Month"[m
[32m+[m[32m              id="month0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Year"[m
[32m+[m[32m              id="year0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m            <br /><br /><br />[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <button class="red" type="button" id="addAlarm0" isok="0">[m
[32m+[m[32m            Add New Alarm[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <h2 id="allErr" style="text-align: center; color: #d47304"></h2>[m
[32m+[m[32m        </form>[m
[32m+[m
[32m+[m[32m        <!-- End ----------------------------------------------- -->[m
[32m+[m[32m        <br />[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <br /><br />[m
[32m+[m[32m  </body>[m
[32m+[m[32m  <script>[m
[32m+[m[32m    // ========================================================================================[m
[32m+[m[32m    // ========================================================================================[m
[32m+[m[32m    $(function () {[m
[32m+[m[32m      let alarmInfo0 = $("#alarmInfo").hide();[m
[32m+[m
[32m+[m[32m      let alarmAssist0 = $("#alarmAssist").hide();[m
[32m+[m
[32m+[m[32m      let allError = $("#allErr").hide();[m
[32m+[m
[32m+[m[32m      //Getting all the needed element at once..[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      let select0 = $("#select0");[m
[32m+[m
[32m+[m[32m      let onHr0 = $("#onHr0");[m
[32m+[m[32m      let onMin0 = $("#onMin0");[m
[32m+[m[32m      let offHr0 = $("#offHr0");[m
[32m+[m[32m      let offMin0 = $("#offMin0");[m
[32m+[m
[32m+[m[32m      let myShowOnceInfo = $("#showOnceInfo");[m
[32m+[m[32m      let buttonMon0 = $("#buttonMon0");[m
[32m+[m[32m      let buttonTue0 = $("#buttonTue0");[m
[32m+[m[32m      let buttonWed0 = $("#buttonWed0");[m
[32m+[m[32m      let buttonThu0 = $("#buttonThu0");[m
[32m+[m[32m      let buttonFri0 = $("#buttonFri0");[m
[32m+[m[32m      let buttonSat0 = $("#buttonSat0");[m
[32m+[m[32m      let buttonSun0 = $("#buttonSun0");[m
[32m+[m[32m      let dayButton = $(".unit").not(".special");[m
[32m+[m
[32m+[m[32m      let enable0 = $("#enable0");[m
[32m+[m[32m      let buttonOnce = $("#buttonOnce0");[m
[32m+[m
[32m+[m[32m      let day0 = $("#day0");[m
[32m+[m[32m      let month0 = $("#month0");[m
[32m+[m[32m      let year0 = $("#year0");[m
[32m+[m
[32m+[m[32m      let myDate = $("#myDate");[m
[32m+[m[32m      let addAlarm0 = $("#addAlarm0");[m
[32m+[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      let appliances = { 1: "Hall_Fan", 2: "Kitchen_Light" };[m
[32m+[m[32m      // let resAppliances = { Hall_Fan: 1, Kitchen_Light: 2 };[m
[32m+[m
[32m+[m[32m      let myOption1 = $("<option></option>")[m
[32m+[m[32m        .attr("value", "1")[m
[32m+[m[32m        .text(appliances[1]);[m
[32m+[m
[32m+[m[32m      let myOption2 = $("<option></option>")[m
[32m+[m[32m        .attr("value", "2")[m
[32m+[m[32m        .text(appliances[2]);[m
[32m+[m
[32m+[m[32m      //changing the selected appliances on the page according to the alarm[m
[32m+[m[32m      select0.append(myOption1);[m
[32m+[m[32m      select0.append(myOption2);[m
[32m+[m
[32m+[m[32m      // Following is for original alarm filling assistence to user[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      $("input").on({[m
[32m+[m[32m        focus: function () {[m
[32m+[m[32m          alarmInfo0.text([m
[32m+[m[32m            "Alarm must be written in 24Hr format!! where 0 equals 12am and 12 equals 12pm"[m
[32m+[m[32m          );[m
[32m+[m[32m          alarmInfo0.slideDown(150);[m
[32m+[m[32m        },[m
[32m+[m[32m        keyup: function () {[m
[32m+[m[32m          if ($(this).attr("id") == "onHr0") {[m
[32m+[m[32m            alarmAssist0.text([m
[32m+[m[32m              "Valid time is in between 0 and 23, ON time in hour is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m            alarmAssist0.slideDown(150);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "onMin0") {[m
[32m+[m[32m            alarmAssist0.text([m
[32m+[m[32m              "Valid time is in between 0 and 59, ON time in minutes is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m            alarmAssist0.slideDown(150);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "offHr0") {[m
[32m+[m[32m            alarmAssist0.text([m
[32m+[m[32m              "Valid time is in between 0 and 23, OFF time in hour is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m            alarmAssist0.slideDown(150);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "offMin0") {[m
[32m+[m[32m            alarmAssist0.text([m
[32m+[m[32m              "Valid time is in between 0 and 59, OFF time in minutes is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m            alarmAssist0.slideDown(150);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m        },[m
[32m+[m[32m      });[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m
[32m+[m[32m      //Creating handler function for each element..[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      buttonMon0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonTue0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonWed0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonThu0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonFri0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonSat0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      buttonSun0.click(() => {[m
[32m+[m[32m        $(this).attr("ison") == 1[m
[32m+[m[32m          ? $(this).attr("ison", "0")[m
[32m+[m[32m          : $(this).attr("ison", "1");[m
[32m+[m[32m      });[m
[32m+[m[32m      enable0.click(() => {[m
[32m+[m[32m        enable0.attr("isenable") == 0[m
[32m+[m[32m          ? enable0[m
[32m+[m[32m              .attr("isenable", "1")[m
[32m+[m[32m              .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m              .text("Enabled")[m
[32m+[m[32m          : enable0[m
[32m+[m[32m              .attr("isenable", "0")[m
[32m+[m[32m              .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m              .text("Enable");[m
[32m+[m[32m      });[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m
[32m+[m[32m      // Following is the code when once button is clicked[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      buttonOnce.on("click", function () {[m
[32m+[m[32m        if ($(this).attr("isonce") == 0) {[m
[32m+[m[32m          $(this).css("background-color", "hsla(64, 97%, 62%, 0.4)");[m
[32m+[m[32m          myDate.slideDown("slow");[m
[32m+[m[32m          $(this).attr("isonce", "1");[m
[32m+[m[32m          dayButton.hide();[m
[32m+[m[32m          myShowOnceInfo.fadeIn("slow");[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        myShowOnceInfo.hide();[m
[32m+[m[32m        dayButton.fadeIn("slow");[m
[32m+[m[32m        myDate.slideUp("slow");[m
[32m+[m[32m        $(this).attr("isonce", "0").css("background-color", "#ebecf0");[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      addAlarm0.hover([m
[32m+[m[32m        function () {[m
[32m+[m[32m          if (select0.children("option:selected").val() == "option") {[m
[32m+[m[32m            allError[m
[32m+[m[32m              .text([m
[32m+[m[32m                "Select any appliance form the select button to apply changes.."[m
[32m+[m[32m              )[m
[32m+[m[32m              .css("color", "#d47304");[m
[32m+[m[32m            allError.slideDown(150);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          //Checking if ON-HR or OFF-HR both aren't empty..[m
[32m+[m[32m          if (onHr0.val() >= 24 || onHr0.val() < 0 || onHr0.val() == "") {[m
[32m+[m[32m            if (offHr0.val() >= 24 || offHr0.val() < 0 || offHr0.val() == "") {[m
[32m+[m[32m              allError.text([m
[32m+[m[32m                "Problem with ON hour.. ON or OFF must be filled!!"[m
[32m+[m[32m              );[m
[32m+[m[32m              allError.slideDown(150);[m
[32m+[m[32m              $(this).attr("isok", "0");[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (offHr0.val() >= 24 || offHr0.val() < 0 || offHr0.val() == "") {[m
[32m+[m[32m            if (onHr0.val() >= 24 || onHr0.val() < 0 || onHr0.val() == "") {[m
[32m+[m[32m              allError.text("Problem with OFF hour..");[m
[32m+[m[32m              allError.slideDown(150);[m
[32m+[m[32m              $(this).attr("isok", "0");[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (onMin0.val() >= 60 || onMin0.val() < 0) {[m
[32m+[m[32m            allError.text("Problem with ON minute..");[m
[32m+[m[32m            allError.slideDown(150);[m
[32m+[m[32m            $(this).attr("isok", "0");[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (offMin0.val() >= 60 || offMin0.val() < 0) {[m
[32m+[m[32m            allError.text("Problem with OFF minute..");[m
[32m+[m[32m            allError.slideDown(150);[m
[32m+[m[32m            $(this).attr("isok", "0");[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (buttonOnce.attr("isonce") == 0) {[m
[32m+[m[32m            if (onHr0.val() == "" || offHr0.val() == "") {[m
[32m+[m[32m              allError.text("Please mention On Hour and Off Hour..");[m
[32m+[m[32m              allError.slideDown(150);[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            allError[m
[32m+[m[32m              .text([m
[32m+[m[32m                "This alarm will switch ON " +[m
[32m+[m[32m                  appliances[select0.children("option:selected").val()] +[m
[32m+[m[32m                  " at " +[m
[32m+[m[32m                  Number(onHr0.val()) +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  Number(onMin0.val()) +[m
[32m+[m[32m                  " and switch it OFF at " +[m
[32m+[m[32m                  Number(offHr0.val()) +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  Number(offMin0.val())[m
[32m+[m[32m              )[m
[32m+[m[32m              .css("color", "green");[m
[32m+[m[32m            allError.slideDown(150);[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (buttonOnce.attr("isonce") == 1) {[m
[32m+[m[32m            if (onHr0.val() != "") {[m
[32m+[m[32m              allError[m
[32m+[m[32m                .text([m
[32m+[m[32m                  "This alarm will switch ON " +[m
[32m+[m[32m                    appliances[select0.children("option:selected").val()] +[m
[32m+[m[32m                    " at " +[m
[32m+[m[32m                    Number(onHr0.val()) +[m
[32m+[m[32m                    ":" +[m
[32m+[m[32m                    Number(onMin0.val()) +[m
[32m+[m[32m                    " and disable it after execution."[m
[32m+[m[32m                )[m
[32m+[m[32m                .css("color", "green");[m
[32m+[m[32m              allError.slideDown(150);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              allError[m
[32m+[m[32m                .text([m
[32m+[m[32m                  "This alarm will switch OFF " +[m
[32m+[m[32m                    appliances[select0.children("option:selected").val()] +[m
[32m+[m[32m                    " at " +[m
[32m+[m[32m                    Number(offHr0.val()) +[m
[32m+[m[32m                    ":" +[m
[32m+[m[32m                    Number(offMin0.val()) +[m
[32m+[m[32m                    " and disable it after execution."[m
[32m+[m[32m                )[m
[32m+[m[32m                .css("color", "green");[m
[32m+[m[32m              allError.slideDown(150);[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          $(this)[m
[32m+[m[32m            .css({ "background-color": "#ae1100", color: "white" })[m
[32m+[m[32m            .attr("isok", "1");[m
[32m+[m[32m        },[m
[32m+[m[32m        function () {[m
[32m+[m[32m          $(this).css({ "background-color": "#ebecf0", color: "#ae1100" });[m
[32m+[m[32m          allError.slideUp(150);[m
[32m+[m[32m        }[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      //Setting new alarm with validations..[m
[32m+[m[32m      // ----------------------------------------------[m
[32m+[m[32m      addAlarm0.click(function () {[m
[32m+[m[32m        let setTheAlarm;[m
[32m+[m[32m        if (buttonOnce.attr("isonce") == 1) {[m
[32m+[m[32m          if ($(this).attr("isok") == 1) {[m
[32m+[m[32m            let switchType = 0;[m
[32m+[m
[32m+[m[32m            if (onHr0.val() != "") switchType = 1;[m
[32m+[m
[32m+[m[32m            setTheAlarm =[m
[32m+[m[32m              "?shot=" +[m
[32m+[m[32m              switchType +[m
[32m+[m[32m              "&onHr=" +[m
[32m+[m[32m              onHr0.val() +[m
[32m+[m[32m              "&onMin=" +[m
[32m+[m[32m              onMin0.val() +[m
[32m+[m[32m              "&offHr=" +[m
[32m+[m[32m              offHr0.val() +[m
[32m+[m[32m              "&offMin=" +[m
[32m+[m[32m              offMin0.val() +[m
[32m+[m[32m              "&pin=" +[m
[32m+[m[32m              select0.children("option:selected").val() +[m
[32m+[m[32m              "&enable=" +[m
[32m+[m[32m              enable0.attr("isenable");[m
[32m+[m[32m          }[m
[32m+[m[32m        } else if ($(this).attr("isok") == 1) {[m
[32m+[m[32m          setTheAlarm =[m
[32m+[m[32m            "?shot=2" +[m
[32m+[m[32m            "&onHr=" +[m
[32m+[m[32m            onHr0.val() +[m
[32m+[m[32m            "&onMin=" +[m
[32m+[m[32m            onMin0.val() +[m
[32m+[m[32m            "&offHr=" +[m
[32m+[m[32m            offHr0.val() +[m
[32m+[m[32m            "&offMin=" +[m
[32m+[m[32m            offMin0.val() +[m
[32m+[m[32m            "&pin=" +[m
[32m+[m[32m            select0.children("option:selected").val() +[m
[32m+[m[32m            "&sun=" +[m
[32m+[m[32m            buttonSun0.attr("ison") +[m
[32m+[m[32m            "&mon=" +[m
[32m+[m[32m            buttonMon0.attr("ison") +[m
[32m+[m[32m            "&tue=" +[m
[32m+[m[32m            buttonTue0.attr("ison") +[m
[32m+[m[32m            "&wed=" +[m
[32m+[m[32m            buttonWed0.attr("ison") +[m
[32m+[m[32m            "&thu=" +[m
[32m+[m[32m            buttonThu0.attr("ison") +[m
[32m+[m[32m            "&fri=" +[m
[32m+[m[32m            buttonFri0.attr("ison") +[m
[32m+[m[32m            "&sat=" +[m
[32m+[m[32m            buttonSat0.attr("ison") +[m
[32m+[m[32m            "&enable=" +[m
[32m+[m[32m            enable0.attr("isenable");[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        allError.slideDown();[m
[32m+[m[32m        $.get("http://192.168.166.155/setalarm" + setTheAlarm, function () {[m
[32m+[m[32m          setTimeout(() => window.location.reload(), 1000);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      $("#myDate").hide();[m
[32m+[m[32m      // $(".unit").not(".special").hide();[m
[32m+[m[32m      $("#showOnceInfo").hide();[m
[32m+[m
[32m+[m[32m      // =================================================================[m
[32m+[m[32m      // getting the stauts json file[m
[32m+[m[32m      $.getJSON("http://192.168.166.155/alarmjson", function (result) {[m
[32m+[m[32m        // setting the alarm count number to index the form...[m
[32m+[m[32m        let alarmCount = 1;[m
[32m+[m[32m        let timeForClone = new Date();[m
[32m+[m
[32m+[m[32m        //looping through each json entity present in the received file..[m
[32m+[m[32m        $.each(result, (i, field) => {[m
[32m+[m[32m          // for free field equals to 1 we will generate a full form[m
[32m+[m[32m          if (field.free == 1) {[m
[32m+[m[32m            if (field.oneShot == 0) {[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (field.oneShot == 1) {[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            //Cloning the original form present in this html file[m
[32m+[m[32m            let myClon = $("#mainBody").clone().attr("id", i);[m
[32m+[m
[32m+[m[32m            // Getting all the found elements[m
[32m+[m[32m            // =================================================================[m
[32m+[m[32m            //Most important the EDIT button..[m
[32m+[m[32m            let myHider = myClon.find("#hider0").attr("id", i + "hider");[m
[32m+[m
[32m+[m[32m            let newAlarmInfo = myClon.find("#alarmInfo");[m
[32m+[m[32m            newAlarmInfo.attr("id", i + alarmInfo);[m
[32m+[m
[32m+[m[32m            let newAlarmAssist = myClon.find("#alarmAssist");[m
[32m+[m[32m            newAlarmAssist.attr("id", i + "alarmAssist");[m
[32m+[m
[32m+[m[32m            let myAddAlarm = myClon[m
[32m+[m[32m              .find("#addAlarm0")[m
[32m+[m[32m              .attr("id", i + "edit")[m
[32m+[m[32m              .text("Edit Alarm")[m
[32m+[m[32m              .css({ color: "#babecc" });[m
[32m+[m
[32m+[m[32m            let myAllErr = myClon.find("#allErr").attr("id", i + "Err");[m
[32m+[m[32m            myAllErr.hide();[m
[32m+[m
[32m+[m[32m            //Handling the enable button toggles[m
[32m+[m[32m            let myEnable = myClon.find("#enable0");[m
[32m+[m
[32m+[m[32m            let myDel = myClon.find("#buttonDel0").attr("id", i + "Del");[m
[32m+[m
[32m+[m[32m            let formEle = myClon.find("#formNum0").attr("id", i + "form");[m
[32m+[m
[32m+[m[32m            let once = myClon.find("#buttonOnce0").attr("id", i + "once");[m
[32m+[m[32m            let myDate = myClon.find("#myDate").attr("id", i + "mydate");[m
[32m+[m[32m            let myShowOnceInfo = myClon[m
[32m+[m[32m              .find("#showOnceInfo")[m
[32m+[m[32m              .attr("id", i + "onceInfo");[m
[32m+[m[32m            let dayButton = myClon.find(".unit").not(".special");[m
[32m+[m
[32m+[m[32m            let myDay = myClon.find("#day0").attr("id", i + "day");[m
[32m+[m[32m            let myMonth = myClon.find("#month0").attr("id", i + "month");[m
[32m+[m[32m            let myYear = myClon.find("#year0").attr("id", i + "year");[m
[32m+[m
[32m+[m[32m            // =================================================================[m
[32m+[m
[32m+[m[32m            //changing the selected appliances on the page according to the alarm[m
[32m+[m[32m            let selectAppliance = myClon.find("#select0").attr("id", i + "app");[m
[32m+[m
[32m+[m[32m            selectAppliance[m
[32m+[m[32m              .children("[value='" + 2 + "']")[m
[32m+[m[32m              .attr("selected", "");[m
[32m+[m
[32m+[m[32m            selectAppliance.change(function () {[m
[32m+[m[32m              let selectedApp = $(this).children("option:selected").val();[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // changing the id of the cloned div tag containging the form[m
[32m+[m[32m            myClon.find("#buttonNum0").text(alarmCount);[m
[32m+[m[32m            alarmCount++;[m
[32m+[m
[32m+[m[32m            let myOnHr = myClon.find("#onHr0");[m
[32m+[m[32m            myOnHr.attr({ id: i + "onHr", value: field.onHr });[m
[32m+[m
[32m+[m[32m            let myOnMin = myClon.find("#onMin0");[m
[32m+[m[32m            myOnMin.attr({ id: i + "onMin", value: field.onMin });[m
[32m+[m
[32m+[m[32m            let myOffHr = myClon[m
[32m+[m[32m              .find("#offHr0")[m
[32m+[m[32m              .attr({ id: i + "offHr", value: field.offHr });[m
[32m+[m
[32m+[m[32m            let myOffMin = myClon.find("#offMin0");[m
[32m+[m[32m            myOffMin.attr({ id: i + "offMin", value: field.offMin });[m
[32m+[m
[32m+[m[32m            let myMon = myClon.find("#buttonMon0");[m
[32m+[m[32m            myMon.attr("id", i + "mon");[m
[32m+[m[32m            if (field.mon == 1) {[m
[32m+[m[32m              myMon.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myMon.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myTue = myClon.find("#buttonTue0");[m
[32m+[m[32m            myTue.attr("id", i + "tue");[m
[32m+[m[32m            if (field.tue == 1) {[m
[32m+[m[32m              myTue.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myTue.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myWed = myClon.find("#buttonWed0");[m
[32m+[m[32m            myWed.attr("id", i + "wed");[m
[32m+[m[32m            if (field.wed == 1) {[m
[32m+[m[32m              myWed.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myWed.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myThu = myClon.find("#buttonThu0");[m
[32m+[m[32m            myThu.attr("id", i + "thu");[m
[32m+[m[32m            if (field.thu == 1) {[m
[32m+[m[32m              myThu.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myThu.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myFri = myClon.find("#buttonFri0");[m
[32m+[m[32m            myFri.attr("id", i + "fri");[m
[32m+[m[32m            if (field.fri == 1) {[m
[32m+[m[32m              myFri.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myFri.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let mySat = myClon.find("#buttonSat0");[m
[32m+[m[32m            mySat.attr("id", i + "sat");[m
[32m+[m[32m            if (field.sat == 1) {[m
[32m+[m[32m              mySat.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              mySat.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let mySun = myClon.find("#buttonSun0");[m
[32m+[m[32m            mySun.attr("id", i + "sun");[m
[32m+[m[32m            if (field.sun == 1) {[m
[32m+[m[32m              mySun.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              mySun.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            //Creating new enable button for this form[m
[32m+[m[32m            myEnable.attr("id", i + "enable");[m
[32m+[m[32m            if (field.enable == 1) {[m
[32m+[m[32m              myEnable[m
[32m+[m[32m                .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                .text("Enabled")[m
[32m+[m[32m                .attr("isenable", "1");[m
[32m+[m[32m            }[m
[32m+[m[32m            if (field.enable == 0) {[m
[32m+[m[32m              myEnable[m
[32m+[m[32m                .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                .text("Disabled")[m
[32m+[m[32m                .attr("isenable", "0");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            myEnable.click(function () {[m
[32m+[m[32m              // If enable is 1[m
[32m+[m[32m              if ($(this).attr("isenable") == 1) {[m
[32m+[m[32m                $(this)[m
[32m+[m[32m                  .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m                  .attr("isenable", "0")[m
[32m+[m[32m                  .text("Disable");[m
[32m+[m[32m                myAddAlarm[m
[32m+[m[32m                  .css({ color: "green" })[m
[32m+[m[32m                  .attr("isok", "1")[m
[32m+[m[32m                  .text("Disable Alarm!!");[m
[32m+[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  myHider.css({ height: "480px" });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                myHider.css({ "z-index": "0" }).click(function () {[m
[32m+[m[32m                  myEnable[m
[32m+[m[32m                    .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                    .attr("isenable", "1")[m
[32m+[m[32m                    .text("Enabled");[m
[32m+[m
[32m+[m[32m                  myAddAlarm[m
[32m+[m[32m                    .css({ "background-color": "#ebecf0", color: "#babecc" })[m
[32m+[m[32m                    .attr("isok", "0")[m
[32m+[m[32m                    .text("Edit Alarm");[m
[32m+[m[32m                  myHider.css({ "z-index": "-1", height: "420px" }).off();[m
[32m+[m[32m                });[m
[32m+[m[32m                return;[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              // If enable is 1[m
[32m+[m[32m              if ($(this).attr("isenable") == 0) {[m
[32m+[m[32m                $(this)[m
[32m+[m[32m                  .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m                  .attr("isenable", "1")[m
[32m+[m[32m                  .text("Enable");[m
[32m+[m
[32m+[m[32m                myAddAlarm[m
[32m+[m[32m                  .css({ color: "green" })[m
[32m+[m[32m                  .attr("isok", "1")[m
[32m+[m[32m                  .text("Enable Alarm!!");[m
[32m+[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  myHider.css({ height: "480px" });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                myHider.css({ "z-index": "0" }).click(function () {[m
[32m+[m[32m                  myEnable[m
[32m+[m[32m                    .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                    .attr("isenable", "0")[m
[32m+[m[32m                    .text("Disabled");[m
[32m+[m
[32m+[m[32m                  myAddAlarm[m
[32m+[m[32m                    .css({ "background-color": "#ebecf0", color: "#babecc" })[m
[32m+[m[32m                    .attr("isok", "0")[m
[32m+[m[32m                    .text("Edit Alarm");[m
[32m+[m[32m                  myHider.css({ "z-index": "-1", height: "420px" }).off();[m
[32m+[m[32m                });[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            //Handling the delete button toggles[m
[32m+[m[32m            // =================================================================[m
[32m+[m[32m            myDel.click(function () {[m
[32m+[m[32m              if ($(this).attr("isdel") == 0) {[m
[32m+[m[32m                $(this)[m
[32m+[m[32m                  .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m                  .attr("isdel", "1");[m
[32m+[m
[32m+[m[32m                myAddAlarm[m
[32m+[m[32m                  .css({[m
[32m+[m[32m                    color: "#ae1100",[m
[32m+[m[32m                  })[m
[32m+[m[32m                  .attr("isok", "1")[m
[32m+[m[32m                  .text("Delete Alarm!!!!");[m
[32m+[m[32m                newAlarmAssist.text("");[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  myHider.css({ height: "480px" });[m
[32m+[m[32m                }[m
[32m+[m[32m                myHider.css({ "z-index": "0" }).click(function () {[m
[32m+[m[32m                  myDel[m
[32m+[m[32m                    .css({ "background-color": "#ec4a4a33" })[m
[32m+[m[32m                    .attr("isdel", "0");[m
[32m+[m
[32m+[m[32m                  myAddAlarm[m
[32m+[m[32m                    .css({[m
[32m+[m[32m                      "background-color": "#ebecf0",[m
[32m+[m[32m                      color: "#babecc",[m
[32m+[m[32m                    })[m
[32m+[m[32m                    .attr("isok", "0")[m
[32m+[m[32m                    .text("Edit Alarm");[m
[32m+[m[32m                  myHider.css({ "z-index": "-1", height: "420px" }).off();[m
[32m+[m[32m                });[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Following code checkes for any actual changes made to send the server[m
[32m+[m[32m            // It also validates the hour and minutes limits..[m
[32m+[m
[32m+[m[32m            function validationKeyPress() {[m
[32m+[m[32m              //when field onshot is 2 means set to ON and OFF function..[m
[32m+[m[32m              if (field.oneShot == 2) {[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  if (myOnHr.val() != "" || myOffHr.val() != "") {[m
[32m+[m[32m                    if (myOffHr.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myOnHr.val() > 23 ||[m
[32m+[m[32m                        myOnHr.val() < 0 ||[m
[32m+[m[32m                        isNaN(myOnHr.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m[32m                    if (myOnMin.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myOnMin.val() > 59 ||[m
[32m+[m[32m                        myOnMin.val() < 0 ||[m
[32m+[m[32m                        isNaN(myOnMin.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    if (myOffHr.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myOffHr.val() > 23 ||[m
[32m+[m[32m                        myOffHr.val() < 0 ||[m
[32m+[m[32m                        isNaN(myOffHr.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    if (myOffMin.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myOffMin.val() > 59 ||[m
[32m+[m[32m                        myOffMin.val() < 0 ||[m
[32m+[m[32m                        isNaN(myOffMin.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    if (myDay.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myDay.val() < 1 ||[m
[32m+[m[32m                        myDay.val() > 31 ||[m
[32m+[m[32m                        isNaN(myDay.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    if (myMonth.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myMonth.val() < 1 ||[m
[32m+[m[32m                        myMonth.val() > 12 ||[m
[32m+[m[32m                        isNaN(myMonth.val())[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    if (myYear.val() != "") {[m
[32m+[m[32m                      if ([m
[32m+[m[32m                        myYear.val() < timeForClone.getFullYear() ||[m
[32m+[m[32m                        myYear.val() > 2060 ||[m
[32m+[m[32m                        isNaN(myYear.val()) ||[m
[32m+[m[32m                        myYear.val().length != 4[m
[32m+[m[32m                      ) {[m
[32m+[m[32m                        myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                        return;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    myAddAlarm.css({ color: "#ae1100" }).attr("isok", "1");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                //If is once is 0 then validate its exixting value..[m
[32m+[m[32m                if (once.attr("isonce") == 0) {[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() == "" ||[m
[32m+[m[32m                    myOnHr.val() > 23 ||[m
[32m+[m[32m                    myOnHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnMin.val() == "" ||[m
[32m+[m[32m                    myOnMin.val() > 59 ||[m
[32m+[m[32m                    myOnMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffHr.val() == "" ||[m
[32m+[m[32m                    myOffHr.val() > 23 ||[m
[32m+[m[32m                    myOffHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffMin.val() == "" ||[m
[32m+[m[32m                    myOffMin.val() > 59 ||[m
[32m+[m[32m                    myOffMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() != field.onHr ||[m
[32m+[m[32m                    myOnMin.val() != field.onMin ||[m
[32m+[m[32m                    myOffHr.val() != field.offHr ||[m
[32m+[m[32m                    myOffMin.val() != field.offMin[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#ae1100" }).attr("isok", "1");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              //Field.oneShot 1 or 0 means to set ON or OFF..[m
[32m+[m[32m              if (field.oneShot == 0 || field.oneShot == 1) {[m
[32m+[m[32m                //when once card is changed to regular..[m
[32m+[m[32m                if (once.attr("isonce") == 0) {[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() == "" ||[m
[32m+[m[32m                    myOnHr.val() > 23 ||[m
[32m+[m[32m                    myOnHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnMin.val() == "" ||[m
[32m+[m[32m                    myOnMin.val() > 59 ||[m
[32m+[m[32m                    myOnMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffHr.val() == "" ||[m
[32m+[m[32m                    myOffHr.val() > 23 ||[m
[32m+[m[32m                    myOffHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffMin.val() == "" ||[m
[32m+[m[32m                    myOffMin.val() > 59 ||[m
[32m+[m[32m                    myOffMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() != field.onHr ||[m
[32m+[m[32m                    myOnMin.val() != field.onMin ||[m
[32m+[m[32m                    myOffHr.val() != field.offHr ||[m
[32m+[m[32m                    myOffMin.val() != field.offMin[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#ae1100" }).attr("isok", "1");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                //when once card is edited..[m
[32m+[m[32m                //when once card is configured to off function..[m
[32m+[m[32m                if (myOnHr.val() != "" && isNaN(myOnHr.val()) == false) {[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() > 23 ||[m
[32m+[m[32m                    myOnHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnMin.val() == "" ||[m
[32m+[m[32m                    myOnMin.val() > 59 ||[m
[32m+[m[32m                    myOnMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOnMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myDay.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myDay.val() < 1 ||[m
[32m+[m[32m                      myDay.val() > 31 ||[m
[32m+[m[32m                      isNaN(myDay.val())[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myMonth.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myMonth.val() < 1 ||[m
[32m+[m[32m                      myMonth.val() > 12 ||[m
[32m+[m[32m                      isNaN(myMonth.val())[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myYear.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myYear.val() < timeForClone.getFullYear() ||[m
[32m+[m[32m                      myYear.val() > 2060 ||[m
[32m+[m[32m                      isNaN(myYear.val()) ||[m
[32m+[m[32m                      myYear.val().length != 4[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOnHr.val() != field.onHr ||[m
[32m+[m[32m                    myOnMin.val() != field.onMin ||[m
[32m+[m[32m                    myDay.val() != field.day ||[m
[32m+[m[32m                    myMonth.val() != field.month ||[m
[32m+[m[32m                    myYear.val() != field.year[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#ae1100" }).attr("isok", "1");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                //When once card is configured to OFF function[m
[32m+[m[32m                if (myOffHr.val != "" && isNaN(myOffHr.val()) == false) {[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffHr.val() > 23 ||[m
[32m+[m[32m                    myOffHr.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffHr.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffMin.val() == "" ||[m
[32m+[m[32m                    myOffMin.val() > 59 ||[m
[32m+[m[32m                    myOffMin.val() < 0 ||[m
[32m+[m[32m                    isNaN(myOffMin.val())[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myDay.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myDay.val() < 1 ||[m
[32m+[m[32m                      myDay.val() > 31 ||[m
[32m+[m[32m                      isNaN(myDay.val())[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myMonth.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myMonth.val() < 1 ||[m
[32m+[m[32m                      myMonth.val() > 12 ||[m
[32m+[m[32m                      isNaN(myMonth.val())[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myYear.val() != "") {[m
[32m+[m[32m                    if ([m
[32m+[m[32m                      myYear.val() < timeForClone.getFullYear() ||[m
[32m+[m[32m                      myYear.val() > 2060 ||[m
[32m+[m[32m                      isNaN(myYear.val()) ||[m
[32m+[m[32m                      myYear.val().length != 4[m
[32m+[m[32m                    ) {[m
[32m+[m[32m                      myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                      return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    myOffHr.val() != field.offHr ||[m
[32m+[m[32m                    myOffMin.val() != field.offMin ||[m
[32m+[m[32m                    myDay.val() != field.day ||[m
[32m+[m[32m                    myMonth.val() != field.month ||[m
[32m+[m[32m                    myYear.val() != field.year[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#ae1100" }).attr("isok", "1");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
[32m+[m[32m              myAddAlarm.css({ color: "#babecc" }).attr("isok", "0");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // this is for input section[m
[32m+[m[32m            formEle.children("input").keyup(function () {[m
[32m+[m[32m              validationKeyPress();[m
[32m+[m[32m            });[m
[32m+[m[32m            myDate.children("input").keyup(function () {[m
[32m+[m[32m              validationKeyPress();[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            let butPressKeep = [];[m
[32m+[m[32m            // this is for button section[m
[32m+[m[32m            formEle.children("button[ison]").on({[m
[32m+[m[32m              click: function () {[m
[32m+[m[32m                //Following is the handler for weekdays buttons configuration changes[m
[32m+[m[32m                let butId = $(this).attr("id").substr(6);[m
[32m+[m
[32m+[m[32m                //Checking if the buttons don't have the same ison value[m
[32m+[m[32m                // When buttons are clicked they toggle their ison value and then following validation occurs[m
[32m+[m[32m                if ($(this).attr("ison") != field[butId]) {[m
[32m+[m[32m                  // recreasing the items in butPressKeep as ison dosent match..[m
[32m+[m[32m                  butPressKeep.pop(1);[m
[32m+[m[32m                  if (butPressKeep.length == 0) {[m
[32m+[m[32m                    $("#" + i + "edit")[m
[32m+[m[32m                      .css({ color: "#babecc" })[m
[32m+[m[32m                      .attr("isok", "0");[m
[32m+[m[32m                  }[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                // If they have the same ison value then add 1 to the butPressKeep array[m
[32m+[m[32m                // representing the change to buttons[m
[32m+[m[32m                butPressKeep.push(1);[m
[32m+[m[32m                $("#" + i + "edit")[m
[32m+[m[32m                  .css({ color: "#ae1100" })[m
[32m+[m[32m                  .attr("isok", "1");[m
[32m+[m[32m              },[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Following code shows small summery of alarm just below the enable button[m
[32m+[m[32m            let myManifest = myClon[m
[32m+[m[32m              .find("#manifest")[m
[32m+[m[32m              .text([m
[32m+[m[32m                "This alarm will switch on " +[m
[32m+[m[32m                  appliances[[m
[32m+[m[32m                    selectAppliance.children("option:selected").val()[m
[32m+[m[32m                  ] +[m
[32m+[m[32m                  " at " +[m
[32m+[m[32m                  field.onHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.onMin +[m
[32m+[m[32m                  " and switch it off at " +[m
[32m+[m[32m                  field.offHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.offMin[m
[32m+[m[32m              );[m
[32m+[m
[32m+[m[32m            //the function for toggling once state in the page[m
[32m+[m[32m            function toggelOnce() {[m
[32m+[m[32m              if (once.attr("isonce") == 0) {[m
[32m+[m[32m                once.css("background-color", "hsla(64, 97%, 62%, 0.4)");[m
[32m+[m[32m                myDate.slideDown(150);[m
[32m+[m[32m                once.attr("isonce", "1");[m
[32m+[m[32m                // if (field.oneShot == 2) {[m
[32m+[m[32m                //   if (myOnHr.val() != 0 || myOffHr.val != 0) {[m
[32m+[m[32m                //     myAddAlarm.css({[m
[32m+[m[32m                //       color: "#ae1100",[m
[32m+[m[32m                //     });[m
[32m+[m[32m                //   }[m
[32m+[m[32m                // }[m
[32m+[m[32m                myClon.find(".unit").not(".special").hide();[m
[32m+[m[32m                myShowOnceInfo.fadeIn(150);[m
[32m+[m[32m                return;[m
[32m+[m[32m              }[m
[32m+[m[32m              myShowOnceInfo.hide();[m
[32m+[m[32m              dayButton.fadeIn(150);[m
[32m+[m[32m              myDate.slideUp(150);[m
[32m+[m[32m              once.attr("isonce", "0").css("background-color", "#ebecf0");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // Following is the code when once button is clicked[m
[32m+[m[32m            // =================================================================[m
[32m+[m
[32m+[m[32m            once.on("click", function () {[m
[32m+[m[32m              toggelOnce();[m
[32m+[m[32m              validationKeyPress();[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // handling when successful request for alarm editing made[m
[32m+[m
[32m+[m[32m            myAddAlarm.hover([m
[32m+[m[32m              function () {[m
[32m+[m[32m                if ([m
[32m+[m[32m                  selectAppliance.children("option:selected").val() == "option"[m
[32m+[m[32m                ) {[m
[32m+[m[32m                  myAllErr[m
[32m+[m[32m                    .text([m
[32m+[m[32m                      "Select any appliance form the select button to apply changes.."[m
[32m+[m[32m                    )[m
[32m+[m[32m                    .css("color", "#d47304");[m
[32m+[m[32m                  myAllErr.slideDown(150);[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                if ($(this).attr("isok") == 1) {[m
[32m+[m[32m                  if (myEnable.attr("isenable") != field.enable) {[m
[32m+[m[32m                    $(this).css({[m
[32m+[m[32m                      "background-color": "green",[m
[32m+[m[32m                      color: "white",[m
[32m+[m[32m                    });[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myDel.attr("isdel") == 1) {[m
[32m+[m[32m                    $(this).css({[m
[32m+[m[32m                      "background-color": "#ae1100",[m
[32m+[m[32m                      color: "white",[m
[32m+[m[32m                    });[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  $(this).css({[m
[32m+[m[32m                    "background-color": "#ae1100",[m
[32m+[m[32m                    color: "white",[m
[32m+[m[32m                  });[m
[32m+[m[32m                }[m
[32m+[m[32m              },[m
[32m+[m[32m              function () {[m
[32m+[m[32m                myAllErr.slideUp(150);[m
[32m+[m[32m                if ($(this).attr("isok") == 1) {[m
[32m+[m[32m                  if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  }[m
[32m+[m[32m                  if (once.attr("isonce") == 0) {[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  if (myEnable.attr("isenable") != field.enable) {[m
[32m+[m[32m                    $(this).css({[m
[32m+[m[32m                      "background-color": "#ebecf0",[m
[32m+[m[32m                      color: "green",[m
[32m+[m[32m                    });[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m
[32m+[m[32m                  $(this).css({[m
[32m+[m[32m                    "background-color": "#ebecf0",[m
[32m+[m[32m                    color: "#ae1100",[m
[32m+[m[32m                  });[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                $(this).css({[m
[32m+[m[32m                  "background-color": "#ebecf0",[m
[32m+[m[32m                  color: "#babecc",[m
[32m+[m[32m                });[m
[32m+[m[32m              }[m
[32m+[m[32m            );[m
[32m+[m
[32m+[m[32m            //When add alarm button is clicked..[m
[32m+[m[32m            myAddAlarm.click(function () {[m
[32m+[m[32m              if ([m
[32m+[m[32m                myDel.attr("isdel") == 1 ||[m
[32m+[m[32m                myEnable.attr("isenable") != field.enable ||[m
[32m+[m[32m                $(this).attr("isok") == 1[m
[32m+[m[32m              ) {[m
[32m+[m[32m                let setTheAlarm;[m
[32m+[m
[32m+[m[32m                if (myDel.attr("isdel") == 1) {[m
[32m+[m[32m                  setTheAlarm = "?del=1&aID=" + i.substr(5);[m
[32m+[m[32m                } else if (myEnable.attr("isenable") != field.enable) {[m
[32m+[m[32m                  setTheAlarm =[m
[32m+[m[32m                    "?enable=" +[m
[32m+[m[32m                    myEnable.attr("isenable") +[m
[32m+[m[32m                    "&aID=" +[m
[32m+[m[32m                    i.substr(5);[m
[32m+[m[32m                } else if ($(this).attr("isok") == 1) {[m
[32m+[m[32m                  if ([m
[32m+[m[32m                    selectAppliance.children("option:selected").val() ==[m
[32m+[m[32m                    "option"[m
[32m+[m[32m                  ) {[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  if (once.attr("isonce") == 1) {[m
[32m+[m[32m                    if (myOffHr.val() != "" && isNaN(myOffHr.val()) == false) {[m
[32m+[m[32m                      setTheAlarm = "?shot=0";[m
[32m+[m[32m                    }[m
[32m+[m[32m                    if (myOnHr.val() != "" && isNaN(myOnHr.val()) == false) {[m
[32m+[m[32m                      setTheAlarm = "?shot=1";[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    setTheAlarm +=[m
[32m+[m[32m                      "&onHr=" +[m
[32m+[m[32m                      myOnHr.val() +[m
[32m+[m[32m                      "&onMin=" +[m
[32m+[m[32m                      myOnMin.val() +[m
[32m+[m[32m                      "&offHr=" +[m
[32m+[m[32m                      myOffHr.val() +[m
[32m+[m[32m                      "&offMin=" +[m
[32m+[m[32m                      myOffMin.val() +[m
[32m+[m[32m                      "&pin=" +[m
[32m+[m[32m                      selectAppliance.children("option:selected").val() +[m
[32m+[m[32m                      "&sun=" +[m
[32m+[m[32m                      mySun.attr("ison") +[m
[32m+[m[32m                      "&mon=" +[m
[32m+[m[32m                      myMon.attr("ison") +[m
[32m+[m[32m                      "&tue=" +[m
[32m+[m[32m                      myTue.attr("ison") +[m
[32m+[m[32m                      "&wed=" +[m
[32m+[m[32m                      myWed.attr("ison") +[m
[32m+[m[32m                      "&thu=" +[m
[32m+[m[32m                      myThu.attr("ison") +[m
[32m+[m[32m                      "&fri=" +[m
[32m+[m[32m                      myFri.attr("ison") +[m
[32m+[m[32m                      "&sat=" +[m
[32m+[m[32m                      mySat.attr("ison") +[m
[32m+[m[32m                      "&aID=" +[m
[32m+[m[32m                      i.substr(5) +[m
[32m+[m[32m                      "&day=" +[m
[32m+[m[32m                      myDay.val() +[m
[32m+[m[32m                      "&month=" +[m
[32m+[m[32m                      myMonth.val() +[m
[32m+[m[32m                      "&year=" +[m
[32m+[m[32m                      myYear.val() +[m
[32m+[m[32m                      "&enable=" +[m
[32m+[m[32m                      myEnable.attr("isenable");[m
[32m+[m[32m                  } else {[m
[32m+[m[32m                    setTheAlarm =[m
[32m+[m[32m                      "?shot=2" +[m
[32m+[m[32m                      "&onHr=" +[m
[32m+[m[32m                      myOnHr.val() +[m
[32m+[m[32m                      "&onMin=" +[m
[32m+[m[32m                      myOnMin.val() +[m
[32m+[m[32m                      "&offHr=" +[m
[32m+[m[32m                      myOffHr.val() +[m
[32m+[m[32m                      "&offMin=" +[m
[32m+[m[32m                      myOffMin.val() +[m
[32m+[m[32m                      "&pin=" +[m
[32m+[m[32m                      selectAppliance.children("option:selected").val() +[m
[32m+[m[32m                      "&sun=" +[m
[32m+[m[32m                      mySun.attr("ison") +[m
[32m+[m[32m                      "&mon=" +[m
[32m+[m[32m                      myMon.attr("ison") +[m
[32m+[m[32m                      "&tue=" +[m
[32m+[m[32m                      myTue.attr("ison") +[m
[32m+[m[32m                      "&wed=" +[m
[32m+[m[32m                      myWed.attr("ison") +[m
[32m+[m[32m                      "&thu=" +[m
[32m+[m[32m                      myThu.attr("ison") +[m
[32m+[m[32m                      "&fri=" +[m
[32m+[m[32m                      myFri.attr("ison") +[m
[32m+[m[32m                      "&sat=" +[m
[32m+[m[32m                      mySat.attr("ison") +[m
[32m+[m[32m                      "&aID=" +[m
[32m+[m[32m                      i.substr(5) +[m
[32m+[m[32m                      "&enable=" +[m
[32m+[m[32m                      myEnable.attr("isenable");[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                console.log(setTheAlarm);[m
[32m+[m[32m                $.get([m
[32m+[m[32m                  "http://192.168.166.155/setalarm" + setTheAlarm,[m
[32m+[m[32m                  function () {[m
[32m+[m[32m                    setTimeout(() => window.location.reload(), 1000);[m
[32m+[m[32m                  }[m
[32m+[m[32m                );[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Finally add the cloned form befor the original one..[m
[32m+[m[32m            $("#mainBody").before(myClon);[m
[32m+[m
[32m+[m[32m            // Conditonal toggling of the alarm cards[m
[32m+[m[32m            if (field.oneShot == 0) {[m
[32m+[m[32m              toggelOnce();[m
[32m+[m[32m              myOnHr.val("----");[m
[32m+[m[32m              myOnMin.val("----");[m
[32m+[m[32m              myDay.val(field.day);[m
[32m+[m[32m              myMonth.val(field.month);[m
[32m+[m[32m              myYear.val(field.year);[m
[32m+[m[32m              myManifest.text([m
[32m+[m[32m                "This alarm will switch OFF " +[m
[32m+[m[32m                  appliances[[m
[32m+[m[32m                    selectAppliance.children("option:selected").val()[m
[32m+[m[32m                  ] +[m
[32m+[m[32m                  " at " +[m
[32m+[m[32m                  field.offHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.offMin +[m
[32m+[m[32m                  " on " +[m
[32m+[m[32m                  field.day +[m
[32m+[m[32m                  "-" +[m
[32m+[m[32m                  field.month +[m
[32m+[m[32m                  "-" +[m
[32m+[m[32m                  field.year +[m
[32m+[m[32m                  " and will be disabled after execution."[m
[32m+[m[32m              );[m
[32m+[m[32m            }[m
[32m+[m[32m            if (field.oneShot == 1) {[m
[32m+[m[32m              toggelOnce();[m
[32m+[m[32m              myOffHr.val("----");[m
[32m+[m[32m              myOffMin.val("----");[m
[32m+[m[32m              myDay.val(field.day);[m
[32m+[m[32m              myMonth.val(field.month);[m
[32m+[m[32m              myYear.val(field.year);[m
[32m+[m
[32m+[m[32m              myManifest.text([m
[32m+[m[32m                "This alarm will switch ON " +[m
[32m+[m[32m                  appliances[[m
[32m+[m[32m                    selectAppliance.children("option:selected").val()[m
[32m+[m[32m                  ] +[m
[32m+[m[32m                  " at " +[m
[32m+[m[32m                  field.onHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.onMin +[m
[32m+[m[32m                  " on " +[m
[32m+[m[32m                  field.day +[m
[32m+[m[32m                  "-" +[m
[32m+[m[32m                  field.month +[m
[32m+[m[32m                  "-" +[m
[32m+[m[32m                  field.year +[m
[32m+[m[32m                  " and will be disabled after execution."[m
[32m+[m[32m              );[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m        //========== Get request end ====================================[m
[32m+[m
[32m+[m[32m        $(".unit")[m
[32m+[m[32m          .not(".special")[m
[32m+[m[32m          .click(function () {[m
[32m+[m[32m            if ($(this).css("background-color") != "rgb(235, 236, 240)") {[m
[32m+[m[32m              $(this).css({ "background-color": "rgb(235, 236, 240)" });[m
[32m+[m[32m              $(this).attr("ison", "0");[m
[32m+[m[32m            } else {[m
[32m+[m[32m              $(this).css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              $(this).attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m[32m          });[m
[32m+[m
[32m+[m[32m        let myShowTime = $("<h2></h2>");[m
[32m+[m[32m        myShowTime[m
[32m+[m[32m          .attr({ id: "showTime" })[m
[32m+[m[32m          .css({ color: "#d1ce0d", "text-align": "center" });[m
[32m+[m[32m        $("#addAlarm0").before(myShowTime);[m
[32m+[m
[32m+[m[32m        //All about time fetching and showing on first card..[m
[32m+[m
[32m+[m[32m        let dTime = $("#showTime");[m
[32m+[m[32m        $.getJSON("http://192.168.166.155/gettime", (data, status) => {[m
[32m+[m[32m          var myWeekDay = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Sun",[m
[32m+[m[32m            "Mon",[m
[32m+[m[32m            "Tue",[m
[32m+[m[32m            "Wed",[m
[32m+[m[32m            "Thu",[m
[32m+[m[32m            "Fri",[m
[32m+[m[32m            "Sat",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let myMonth = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Jan",[m
[32m+[m[32m            "Feb",[m
[32m+[m[32m            "Mar",[m
[32m+[m[32m            "Apr",[m
[32m+[m[32m            "May",[m
[32m+[m[32m            "Jun",[m
[32m+[m[32m            "Jul",[m
[32m+[m[32m            "Aug",[m
[32m+[m[32m            "Sep",[m
[32m+[m[32m            "Oct",[m
[32m+[m[32m            "Nov",[m
[32m+[m[32m            "Dec",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let secIncre = data.sec;[m
[32m+[m[32m          let minIncre = data.min;[m
[32m+[m
[32m+[m[32m          setInterval(() => {[m
[32m+[m[32m            if (secIncre == 60) {[m
[32m+[m[32m              minIncre++;[m
[32m+[m[32m              secIncre = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m            if (minIncre == 60) {[m
[32m+[m[32m              window.location.reload();[m
[32m+[m[32m            }[m
[32m+[m[32m            let showTime =[m
[32m+[m[32m              "" +[m
[32m+[m[32m              myWeekDay[data.wDay] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              myMonth[data.mon] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.day +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.yr +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.hr +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              minIncre +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              secIncre +[m
[32m+[m[32m              " (Local Time)";[m
[32m+[m[32m            dTime.text(showTime);[m
[32m+[m[32m            secIncre++;[m
[32m+[m[32m          }, 1000);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      // ========================================[m
[32m+[m[32m    });[m
[32m+[m[32m  </script>[m
[32m+[m[32m</html>[m
[1mdiff --git a/extras/alarmHome.html b/extras/alarmHome.html[m
[1mnew file mode 100644[m
[1mindex 0000000..41f37df[m
[1m--- /dev/null[m
[1m+++ b/extras/alarmHome.html[m
[36m@@ -0,0 +1,713 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Document</title>[m
[32m+[m[32m    <style>[m
[32m+[m[32m      body,[m
[32m+[m[32m      html {[m
[32m+[m[32m        background-color: #e0e0e4;[m
[32m+[m[32m      }[m
[32m+[m[32m      body,[m
[32m+[m[32m      p,[m
[32m+[m[32m      input,[m
[32m+[m[32m      select,[m
[32m+[m[32m      textarea,[m
[32m+[m[32m      button {[m
[32m+[m[32m        font-family: "Montserrat", sans-serif;[m
[32m+[m[32m        letter-spacing: -0.2px;[m
[32m+[m[32m        font-size: 9px;[m
[32m+[m[32m      }[m
[32m+[m[32m      div,[m
[32m+[m[32m      p {[m
[32m+[m[32m        color: #babecc;[m
[32m+[m[32m        text-shadow: 1px 1px 1px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      form {[m
[32m+[m[32m        padding: 30px;[m
[32m+[m[32m        width: 320px;[m
[32m+[m[32m        margin: 0 auto;[m
[32m+[m[32m      }[m
[32m+[m[32m      .segment {[m
[32m+[m[32m        padding: 10px 0;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m      select,[m
[32m+[m[32m      button,[m
[32m+[m[32m      input {[m
[32m+[m[32m        border: 0;[m
[32m+[m[32m        outline: none !important;[m
[32m+[m[32m        font-size: 16px;[m
[32m+[m[32m        border-radius: 320px;[m
[32m+[m[32m        padding: 16px;[m
[32m+[m[32m        background-color: #ebecf0;[m
[32m+[m[32m      }[m
[32m+[m[32m      input {[m
[32m+[m[32m        margin-right: 8px;[m
[32m+[m[32m        box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;[m
[32m+[m[32m        width: 100%;[m
[32m+[m[32m        box-sizing: border-box;[m
[32m+[m[32m        transition: all 0.2s ease-in-out;[m
[32m+[m[32m        appearance: none;[m
[32m+[m[32m        -webkit-appearance: none;[m
[32m+[m[32m      }[m
[32m+[m[32m      input:focus {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      button {[m
[32m+[m[32m        outline: none !important;[m
[32m+[m[32m        color: #61677c;[m
[32m+[m[32m        font-weight: bold;[m
[32m+[m[32m        box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m        transition: all 0.2s ease-in-out;[m
[32m+[m[32m        cursor: pointer;[m
[32m+[m[32m        font-weight: 600;[m
[32m+[m[32m      }[m
[32m+[m[32m      .red:active,[m
[32m+[m[32m      .unit:active {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      button .icon {[m
[32m+[m[32m        margin-right: 8px;[m
[32m+[m[32m      }[m
[32m+[m[32m      button.unit {[m
[32m+[m[32m        border-radius: 50%;[m
[32m+[m[32m        line-height: 0;[m
[32m+[m[32m        width: 52px;[m
[32m+[m[32m        height: 52px;[m
[32m+[m[32m        display: inline-flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        align-items: center;[m
[32m+[m[32m        margin: 0 8px;[m
[32m+[m[32m        font-size: 19.2px;[m
[32m+[m[32m      }[m
[32m+[m[32m      button.unit .icon {[m
[32m+[m[32m        margin-right: 0;[m
[32m+[m[32m      }[m
[32m+[m[32m      select,[m
[32m+[m[32m      button.red {[m
[32m+[m[32m        display: block;[m
[32m+[m[32m        width: 100%;[m
[32m+[m[32m        color: #ae1100;[m
[32m+[m[32m      }[m
[32m+[m[32m      .input-group {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        align-items: center;[m
[32m+[m[32m        justify-content: flex-start;[m
[32m+[m[32m      }[m
[32m+[m[32m      .input-group label {[m
[32m+[m[32m        margin: 0;[m
[32m+[m[32m        flex: 1;[m
[32m+[m[32m      }[m
[32m+[m[32m      select {[m
[32m+[m[32m        width: 220px;[m
[32m+[m[32m        -webkit-appearance: none;[m
[32m+[m[32m        box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m        font-weight: 900;[m
[32m+[m[32m        cursor: pointer;[m
[32m+[m[32m      }[m
[32m+[m[32m      select:active {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      .test {[m
[32m+[m[32m        color: #d2e3e4;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m    <!-- <script src="http://192.168.144.155/jquery.js"></script> -->[m
[32m+[m[32m    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body id="body">[m
[32m+[m[32m    <div[m
[32m+[m[32m      id="mainBody"[m
[32m+[m[32m      style="display: flex; justify-content: center; position: relative"[m
[32m+[m[32m    >[m
[32m+[m[32m      <div[m
[32m+[m[32m        style="[m
[32m+[m[32m          position: absolute;[m
[32m+[m[32m          background-color: pink;[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          height: 380px;[m
[32m+[m[32m          border-radius: 20px 20px 0 0;[m
[32m+[m[32m          z-index: -1;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        "[m
[32m+[m[32m        id="hider0"[m
[32m+[m[32m      ></div>[m
[32m+[m[32m      <div[m
[32m+[m[32m        style="[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          border-radius: 20px;[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m          box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m        "[m
[32m+[m[32m      >[m
[32m+[m[32m        <form action="" id="formNum0">[m
[32m+[m[32m          <div class="custom-select">[m
[32m+[m[32m            <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m            <button[m
[32m+[m[32m              class="unit special"[m
[32m+[m[32m              type="button"[m
[32m+[m[32m              id="buttonNum0"[m
[32m+[m[32m              style="[m
[32m+[m[32m                float: left;[m
[32m+[m[32m                box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;[m
[32m+[m[32m                margin-right: 30px;[m
[32m+[m[32m              "[m
[32m+[m[32m            >[m
[32m+[m[32m              --[m
[32m+[m[32m            </button>[m
[32m+[m[32m            <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m            <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m            <select id="select0">[m
[32m+[m[32m              <option value="option">Select Appliance &#9662;</option>[m
[32m+[m[32m              <option value="fan">Fan One Hall &#10048;</option>[m
[32m+[m[32m              <option value="2">Fan Two Hall</option>[m
[32m+[m[32m              <option value="light">Tubelight Hall &#9728;</option>[m
[32m+[m[32m              <option value="4">Fan BedRoom</option>[m
[32m+[m[32m              <option value="5">Light Bedroom</option>[m
[32m+[m[32m              <option value="6">Fan Kitchen</option>[m
[32m+[m[32m              <option value="7">Light Kitchen</option>[m
[32m+[m[32m              <option value="8">All Drawingroom</option>[m
[32m+[m[32m            </select>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Extra info -->[m
[32m+[m[32m          <h2 id="alarmInfo"></h2>[m
[32m+[m[32m          <h1 id="alarmAssist"></h1>[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            id="onHr0"[m
[32m+[m[32m            name="onHr0"[m
[32m+[m[32m            placeholder="On Hr"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <span style="float: right; width: 220px; margin-top: -10px">[m
[32m+[m[32m            <h2 id="showOnceInfo">[m
[32m+[m[32m              You can only use ON function or OFF function. If On is filled OFF[m
[32m+[m[32m              will be IGNORED.. This alarm will be disabled once its completed.[m
[32m+[m[32m              No date means todays date applied.[m
[32m+[m[32m            </h2>[m
[32m+[m[32m          </span>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonMon0" ison="0">[m
[32m+[m[32m            mon[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonTue0" ison="0">[m
[32m+[m[32m            Tue[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonWed0" ison="0">[m
[32m+[m[32m            wed[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="On Min"[m
[32m+[m[32m            id="onMin0"[m
[32m+[m[32m            name="onMin0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <button class="unit" type="button" id="buttonThu0" ison="0">[m
[32m+[m[32m            Thu[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonFri0" ison="0">[m
[32m+[m[32m            Fri[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonSat0" ison="0">[m
[32m+[m[32m            Sat[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="Off Hr"[m
[32m+[m[32m            id="offHr0"[m
[32m+[m[32m            name="offHr0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special del"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="buttonDel0"[m
[32m+[m[32m            isdel="0"[m
[32m+[m[32m            style="[m
[32m+[m[32m              width: 129px;[m
[32m+[m[32m              border-radius: 320px;[m
[32m+[m[32m              background-color: #ec4a4a33;[m
[32m+[m[32m            "[m
[32m+[m[32m          >[m
[32m+[m[32m            Delete[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button class="unit" type="button" id="buttonSun0" ison="0">[m
[32m+[m[32m            Sun[m
[32m+[m[32m          </button>[m
[32m+[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            placeholder="Off Min"[m
[32m+[m[32m            id="offMin0"[m
[32m+[m[32m            style="width: 90px; display: inline"[m
[32m+[m[32m          />[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special once"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="buttonOnce0"[m
[32m+[m[32m            isonce="0"[m
[32m+[m[32m            style="padding: 27px"[m
[32m+[m[32m          >[m
[32m+[m[32m            Once[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <button[m
[32m+[m[32m            class="unit special enable"[m
[32m+[m[32m            type="button"[m
[32m+[m[32m            id="enable0"[m
[32m+[m[32m            isenable="0"[m
[32m+[m[32m            style="width: 129px; border-radius: 320px"[m
[32m+[m[32m          >[m
[32m+[m[32m            Enable[m
[32m+[m[32m          </button>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m[32m          <h2 id="manifest"></h2>[m
[32m+[m[32m          <!-- Start ----------------------------------------------- -->[m
[32m+[m[32m          <div id="myDate">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Day"[m
[32m+[m[32m              id="day0"[m
[32m+[m[32m              name="day0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Month"[m
[32m+[m[32m              id="month0"[m
[32m+[m[32m              name="month0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Year"[m
[32m+[m[32m              id="year0"[m
[32m+[m[32m              name="year0"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m            <br /><br /><br />[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <button class="red" type="button" id="addAlarm0" isok="0">[m
[32m+[m[32m            Add New Alarm[m
[32m+[m[32m          </button>[m
[32m+[m[32m        </form>[m
[32m+[m
[32m+[m[32m        <!-- End ----------------------------------------------- -->[m
[32m+[m[32m        <br />[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </body>[m
[32m+[m[32m  <script>[m
[32m+[m[32m    // ========================================================================================[m
[32m+[m[32m    // ========================================================================================[m
[32m+[m[32m    $(function () {[m
[32m+[m[32m      // Following is for original alarm filling assistence to user[m
[32m+[m[32m      $("input").on({[m
[32m+[m[32m        focus: function () {[m
[32m+[m[32m          $("#alarmInfo").text([m
[32m+[m[32m            "Alarm must be written in 24Hr format!! where 0 equals 12am and 12 equals 12pm"[m
[32m+[m[32m          );[m
[32m+[m[32m        },[m
[32m+[m[32m        keyup: function () {[m
[32m+[m[32m          if ($(this).attr("id") == "onHr0") {[m
[32m+[m[32m            $("#alarmAssist").text([m
[32m+[m[32m              "Valid time is in between 0 and 23, ON time in hour is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "onMin0") {[m
[32m+[m[32m            $("#alarmAssist").text([m
[32m+[m[32m              "Valid time is in between 0 and 59, ON time in minutes is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "offHr0") {[m
[32m+[m[32m            $("#alarmAssist").text([m
[32m+[m[32m              "Valid time is in between 0 and 23, OFF time in hour is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m          }[m
[32m+[m[32m          if ($(this).attr("id") == "offMin0") {[m
[32m+[m[32m            $("#alarmAssist").text([m
[32m+[m[32m              "Valid time is in between 0 and 59, OFF time in minutes is : " +[m
[32m+[m[32m                $(this).val()[m
[32m+[m[32m            );[m
[32m+[m[32m          }[m
[32m+[m[32m        },[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      // Following is the code when once button is clicked[m
[32m+[m[32m      let once = $("#buttonOnce0");[m
[32m+[m[32m      let myDate = $("#myDate");[m
[32m+[m[32m      let myShowOnceInfo = $("#showOnceInfo");[m
[32m+[m
[32m+[m[32m      let dayButton = $(".unit").not(".special");[m
[32m+[m
[32m+[m[32m      once.on("click", function () {[m
[32m+[m[32m        if ($(this).attr("isonce") == 0) {[m
[32m+[m[32m          $(this).css("background-color", "hsla(64, 97%, 62%, 0.4)");[m
[32m+[m[32m          myDate.slideDown("slow");[m
[32m+[m[32m          $(this).attr("isonce", "1");[m
[32m+[m[32m          dayButton.hide();[m
[32m+[m[32m          myShowOnceInfo.fadeIn("slow");[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        myShowOnceInfo.hide();[m
[32m+[m[32m        dayButton.fadeIn("slow");[m
[32m+[m[32m        myDate.slideUp("slow");[m
[32m+[m[32m        $(this).attr("isonce", "0").css("background-color", "#ebecf0");[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      $("#myDate").hide();[m
[32m+[m[32m      // $(".unit").not(".special").hide();[m
[32m+[m[32m      $("#showOnceInfo").hide();[m
[32m+[m
[32m+[m[32m      // =================================================================[m
[32m+[m[32m      // getting the stauts json file[m
[32m+[m[32m      $.getJSON("http://localhost/json", function (result) {[m
[32m+[m[32m        // setting the alarm count number to index the form...[m
[32m+[m[32m        let alarmCount = 1;[m
[32m+[m
[32m+[m[32m        let appliances = { 1: "fan", 2: "light" };[m
[32m+[m
[32m+[m[32m        //looping through each json entity present in the received file..[m
[32m+[m[32m        $.each(result, (i, field) => {[m
[32m+[m[32m          // for free field equals to 1 we will generate a full form[m
[32m+[m[32m          if (field.free == 1) {[m
[32m+[m[32m            if (field.oneShot == 0) {[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (field.oneShot == 1) {[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            //Cloning the original form present in this html file[m
[32m+[m[32m            let myClon = $("#mainBody").clone().attr("id", i);[m
[32m+[m
[32m+[m[32m            // Getting all the found elements[m
[32m+[m[32m            // =================================================================[m
[32m+[m[32m            //Most important the EDIT button..[m
[32m+[m[32m            let myHider = myClon.find("#hider0").attr("id", i + "hider");[m
[32m+[m
[32m+[m[32m            let newAlarmInfo = myClon.find("#alarmInfo");[m
[32m+[m[32m            newAlarmInfo.attr("id", i + alarmInfo);[m
[32m+[m
[32m+[m[32m            let newAlarmAssist = myClon.find("#alarmAssist");[m
[32m+[m[32m            newAlarmAssist.attr("id", i + "alarmAssist");[m
[32m+[m
[32m+[m[32m            let myAddAlarm = myClon[m
[32m+[m[32m              .find("#addAlarm0")[m
[32m+[m[32m              .attr("id", i + "edit")[m
[32m+[m[32m              .text("Edit Alarm")[m
[32m+[m[32m              .css({ color: "#babecc" });[m
[32m+[m
[32m+[m[32m            //Handling the enable button toggles[m
[32m+[m[32m            let myEnable = myClon.find("#enable0");[m
[32m+[m
[32m+[m[32m            let myDel = myClon.find("#buttonDel0").attr("id", i + "Del");[m
[32m+[m
[32m+[m[32m            let formEle = myClon.find("#formNum0").attr("id", i + "form");[m
[32m+[m
[32m+[m[32m            let once = myClon.find("#buttonOnce0").attr("id", i + "once");[m
[32m+[m[32m            let myDate = myClon.find("#myDate").attr("id", i + "mydate");[m
[32m+[m[32m            let myShowOnceInfo = myClon[m
[32m+[m[32m              .find("#showOnceInfo")[m
[32m+[m[32m              .attr("id", i + "onceInfo");[m
[32m+[m[32m            let dayButton = myClon.find(".unit").not(".special");[m
[32m+[m
[32m+[m[32m            // =================================================================[m
[32m+[m
[32m+[m[32m            //changing the selected appliances on the page according to the alarm[m
[32m+[m[32m            let selectAppliance = myClon[m
[32m+[m[32m              .find("#select0")[m
[32m+[m[32m              .attr("id", i + "app")[m
[32m+[m[32m              .children("[value='" + appliances[field.pin] + "']");[m
[32m+[m
[32m+[m[32m            selectAppliance.attr("selected", "");[m
[32m+[m
[32m+[m[32m            // changing the id of the cloned div tag containging the form[m
[32m+[m[32m            myClon.find("#buttonNum0").text(alarmCount);[m
[32m+[m[32m            alarmCount++;[m
[32m+[m
[32m+[m[32m            let myOnHr = myClon.find("#onHr0");[m
[32m+[m[32m            myOnHr.attr({ id: i + "onHr", value: field.onHr });[m
[32m+[m
[32m+[m[32m            let myOnMin = myClon.find("#onMin0");[m
[32m+[m[32m            myOnMin.attr({ id: i + "onMin", value: field.onMin });[m
[32m+[m
[32m+[m[32m            let myOffHr = myClon[m
[32m+[m[32m              .find("#offHr0")[m
[32m+[m[32m              .attr({ id: i + "offHr", value: field.offHr });[m
[32m+[m
[32m+[m[32m            let myOffMin = myClon.find("#offMin0");[m
[32m+[m[32m            myOffMin.attr({ id: i + "offMin", value: field.offMin });[m
[32m+[m
[32m+[m[32m            let myMon = myClon.find("#buttonMon0");[m
[32m+[m[32m            myMon.attr("id", i + "mon");[m
[32m+[m[32m            if (field.mon == 1) {[m
[32m+[m[32m              myMon.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myMon.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myTue = myClon.find("#buttonTue0");[m
[32m+[m[32m            myTue.attr("id", i + "tue");[m
[32m+[m[32m            if (field.tue == 1) {[m
[32m+[m[32m              myTue.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myTue.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myWed = myClon.find("#buttonWed0");[m
[32m+[m[32m            myWed.attr("id", i + "wed");[m
[32m+[m[32m            if (field.wed == 1) {[m
[32m+[m[32m              myWed.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myWed.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myThu = myClon.find("#buttonThu0");[m
[32m+[m[32m            myThu.attr("id", i + "thu");[m
[32m+[m[32m            if (field.thu == 1) {[m
[32m+[m[32m              myThu.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myThu.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let myFri = myClon.find("#buttonFri0");[m
[32m+[m[32m            myFri.attr("id", i + "fri");[m
[32m+[m[32m            if (field.fri == 1) {[m
[32m+[m[32m              myFri.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              myFri.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let mySat = myClon.find("#buttonSat0");[m
[32m+[m[32m            mySat.attr("id", i + "sat");[m
[32m+[m[32m            if (field.sat == 1) {[m
[32m+[m[32m              mySat.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              mySat.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            let mySun = myClon.find("#buttonSun0");[m
[32m+[m[32m            mySun.attr("id", i + "sun");[m
[32m+[m[32m            if (field.sun == 1) {[m
[32m+[m[32m              mySun.css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              mySun.attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            myEnable.attr("id", i + "enable");[m
[32m+[m[32m            if (field.enable == 1) {[m
[32m+[m[32m              myEnable[m
[32m+[m[32m                .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                .text("Enabled")[m
[32m+[m[32m                .attr("isenable", "1");[m
[32m+[m[32m            }[m
[32m+[m[32m            myEnable.click(function () {[m
[32m+[m[32m              if ($(this).attr("isenable") == 1) {[m
[32m+[m[32m                $(this)[m
[32m+[m[32m                  .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m                  .attr("isenable", "0");[m
[32m+[m[32m                myAddAlarm[m
[32m+[m[32m                  .css({ "background-color": "green", color: "#d2e3e4" })[m
[32m+[m[32m                  .attr("isok", "1")[m
[32m+[m[32m                  .text("Disable Alarm!!");[m
[32m+[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  myHider.css({ height: "480px" });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                myHider.css({ "z-index": "0" }).click(function () {[m
[32m+[m[32m                  myEnable[m
[32m+[m[32m                    .css({ "background-color": "rgba(143, 235, 135, 0.4)" })[m
[32m+[m[32m                    .attr("isenable", "1");[m
[32m+[m[32m                  myAddAlarm[m
[32m+[m[32m                    .css({ "background-color": "#ebecf0", color: "#babecc" })[m
[32m+[m[32m                    .attr("isok", "0")[m
[32m+[m[32m                    .text("Edit Alarm");[m
[32m+[m[32m                  myHider.css({ "z-index": "-1", height: "420px" }).off();[m
[32m+[m[32m                });[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            //Handling the delete button toggles[m
[32m+[m[32m            // =================================================================[m
[32m+[m[32m            myDel.click(function () {[m
[32m+[m[32m              if ($(this).attr("isdel") == 0) {[m
[32m+[m[32m                $(this)[m
[32m+[m[32m                  .css({ "background-color": "#ebecf0" })[m
[32m+[m[32m                  .attr("isdel", "1");[m
[32m+[m
[32m+[m[32m                myAddAlarm[m
[32m+[m[32m                  .css({[m
[32m+[m[32m                    "background-color": "#ae1100",[m
[32m+[m[32m                    color: "#d2e3e4",[m
[32m+[m[32m                  })[m
[32m+[m[32m                  .attr("isok", "1")[m
[32m+[m[32m                  .text("Delete Alarm!!!!");[m
[32m+[m[32m                newAlarmAssist.text("");[m
[32m+[m[32m                if (once.attr("isonce") == 1) {[m
[32m+[m[32m                  myHider.css({ height: "480px" });[m
[32m+[m[32m                }[m
[32m+[m[32m                myHider.css({ "z-index": "0" }).click(function () {[m
[32m+[m[32m                  myDel[m
[32m+[m[32m                    .css({ "background-color": "#ec4a4a33" })[m
[32m+[m[32m                    .attr("isdel", "0");[m
[32m+[m
[32m+[m[32m                  myAddAlarm[m
[32m+[m[32m                    .css({[m
[32m+[m[32m                      "background-color": "#ebecf0",[m
[32m+[m[32m                      color: "#babecc",[m
[32m+[m[32m                    })[m
[32m+[m[32m                    .attr("isok", "0")[m
[32m+[m[32m                    .text("Edit Alarm");[m
[32m+[m[32m                  myHider.css({ "z-index": "-1", height: "420px" }).off();[m
[32m+[m[32m                });[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Following code checkes for any actual changes made to send the server[m
[32m+[m[32m            // It also validates the hour and minutes limits..[m
[32m+[m
[32m+[m[32m            // this is for input section[m
[32m+[m[32m            formEle.children("input").keyup(function () {[m
[32m+[m[32m              let butId = $(this).attr("id").substr(6);[m
[32m+[m[32m              console.log($(this).val());[m
[32m+[m[32m              if ($(this).val() == field[butId] || $(this).val() == "") {[m
[32m+[m[32m                $("#" + i + "edit")[m
[32m+[m[32m                  .css({ color: "#babecc" })[m
[32m+[m[32m                  .attr("isok", "0");[m
[32m+[m[32m                return;[m
[32m+[m[32m              }[m
[32m+[m[32m              if (butId == "onHr" || butId == "offHr") {[m
[32m+[m[32m                if ($(this).val() <= 23) {[m
[32m+[m[32m                  $("#" + i + "edit")[m
[32m+[m[32m                    .css({ color: "#ae1100" })[m
[32m+[m[32m                    .attr("isok", "1");[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                $("#" + i + "edit")[m
[32m+[m[32m                  .css({ color: "#babecc" })[m
[32m+[m[32m                  .attr("isok", "0");[m
[32m+[m[32m              }[m
[32m+[m[32m              if (butId == "onMin" || butId == "offMin") {[m
[32m+[m[32m                if ($(this).val() <= 59) {[m
[32m+[m[32m                  $("#" + i + "edit")[m
[32m+[m[32m                    .css({ color: "#ae1100" })[m
[32m+[m[32m                    .attr("isok", "1");[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                $("#" + i + "edit")[m
[32m+[m[32m                  .css({ color: "#babecc" })[m
[32m+[m[32m                  .attr("isok", "0");[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            let butPressKeep = [];[m
[32m+[m[32m            // this is for button section[m
[32m+[m[32m            formEle.children("button[ison]").on({[m
[32m+[m[32m              click: function () {[m
[32m+[m[32m                //Following is the handler for weekdays buttons configuration changes[m
[32m+[m[32m                let butId = $(this).attr("id").substr(6);[m
[32m+[m[32m                console.log(field[butId]);[m
[32m+[m
[32m+[m[32m                //Checking if the buttons don't have the same ison value[m
[32m+[m[32m                // When buttons are clicked they toggle their ison value and then following validation occurs[m
[32m+[m[32m                if ($(this).attr("ison") != field[butId]) {[m
[32m+[m[32m                  // recreasing the items in butPressKeep as ison dosent match..[m
[32m+[m[32m                  butPressKeep.pop(1);[m
[32m+[m[32m                  console.log("Length " + butPressKeep.length);[m
[32m+[m[32m                  if (butPressKeep.length == 0) {[m
[32m+[m[32m                    $("#" + i + "edit")[m
[32m+[m[32m                      .css({ color: "#babecc" })[m
[32m+[m[32m                      .attr("isok", "0");[m
[32m+[m[32m                  }[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                // If they have the same ison value then add 1 to the butPressKeep array[m
[32m+[m[32m                // representing the change to buttons[m
[32m+[m[32m                butPressKeep.push(1);[m
[32m+[m[32m                $("#" + i + "edit")[m
[32m+[m[32m                  .css({ color: "#ae1100" })[m
[32m+[m[32m                  .attr("isok", "1");[m
[32m+[m[32m              },[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Following code shows small summery of alarm just below the enable button[m
[32m+[m[32m            myClon[m
[32m+[m[32m              .find("#manifest")[m
[32m+[m[32m              .text([m
[32m+[m[32m                "This alarm will switch on " +[m
[32m+[m[32m                  selectAppliance.text() +[m
[32m+[m[32m                  " at " +[m
[32m+[m[32m                  field.onHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.onMin +[m
[32m+[m[32m                  " and switch it off at " +[m
[32m+[m[32m                  field.offHr +[m
[32m+[m[32m                  ":" +[m
[32m+[m[32m                  field.offMin[m
[32m+[m[32m              );[m
[32m+[m
[32m+[m[32m            // Following is the code when once button is clicked[m
[32m+[m[32m            // =================================================================[m
[32m+[m
[32m+[m[32m            once.on("click", function () {[m
[32m+[m[32m              if ($(this).attr("isonce") == 0) {[m
[32m+[m[32m                $(this).css("background-color", "hsla(64, 97%, 62%, 0.4)");[m
[32m+[m[32m                myDate.slideDown("slow");[m
[32m+[m[32m                $(this).attr("isonce", "1");[m
[32m+[m[32m                myClon.find(".unit").not(".special").hide();[m
[32m+[m[32m                myShowOnceInfo.fadeIn("slow");[m
[32m+[m[32m                return;[m
[32m+[m[32m              }[m
[32m+[m[32m              myShowOnceInfo.hide();[m
[32m+[m[32m              dayButton.fadeIn("slow");[m
[32m+[m[32m              myDate.slideUp("slow");[m
[32m+[m[32m              $(this).attr("isonce", "0").css("background-color", "#ebecf0");[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Finally add the cloned form befor the original one..[m
[32m+[m[32m            $("#mainBody").before(myClon);[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        $(".unit")[m
[32m+[m[32m          .not(".special")[m
[32m+[m[32m          .click(function () {[m
[32m+[m[32m            if ($(this).css("background-color") != "rgb(235, 236, 240)") {[m
[32m+[m[32m              $(this).css({ "background-color": "rgb(235, 236, 240)" });[m
[32m+[m[32m              $(this).attr("ison", "0");[m
[32m+[m[32m            } else {[m
[32m+[m[32m              $(this).css({ "background-color": "rgba(181, 219, 251, 0.4)" });[m
[32m+[m[32m              $(this).attr("ison", "1");[m
[32m+[m[32m            }[m
[32m+[m[32m          });[m
[32m+[m[32m      });[m
[32m+[m[32m      // ========================================[m
[32m+[m[32m    });[m
[32m+[m[32m  </script>[m
[32m+[m[32m</html>[m
[1mdiff --git a/extras/compressed.html b/extras/compressed.html[m
[1mnew file mode 100644[m
[1mindex 0000000..6105732[m
[1m--- /dev/null[m
[1m+++ b/extras/compressed.html[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<!DOCTYPE html><html lang="en"> <head> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>Wifi Settings</title> <style> body, html { background-color: #ebecf0; /* background-color: #e0e0e4; */ } body, p, input, select, textarea, button { font-family: "Montserrat", sans-serif; letter-spacing: -0.2px; font-size: 16px; } div, p { color: #babecc; text-shadow: 1px 1px 1px #fff; } form { padding: 16px; width: 320px; margin: 0 auto; } button, input { border: 0; outline: 0; font-size: 16px; border-radius: 320px; padding: 16px; background-color: #ebecf0; text-shadow: 1px 1px 0 #fff; } label { display: block; margin-bottom: 24px; width: 100%; } input { margin-right: 8px; box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff; width: 100%; box-sizing: border-box; transition: all 0.2s ease-in-out; appearance: none; -webkit-appearance: none; } input:focus { box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff; } button { color: #61677c; font-weight: bold; box-shadow: -5px -5px 20px #fff, 5px 5px 20px #babecc; transition: all 0.2s ease-in-out; cursor: pointer; font-weight: 600; } .unit:hover, .red:hover { box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc; } .red:active, .unit:active { box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff; } button .icon { margin-right: 8px; } button.unit .icon { margin-right: 0; } button.red { display: block; width: 100%; color: #ae1100; } .input-group { display: flex; align-items: center; justify-content: flex-start; } .input-group label { margin: 0; flex: 1; } .buttonClicked { box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff; background-color: rgb(202, 246, 250); } </style> </head> <body style="font-size: 16px"> <div> <center> <h2>Wifi-Hotspot Settings..</h2> <form method="GET" action="#" id="login-form" class="login-form" autocomplete="off" role="main" > <div> <label for="wifiname">Wifi Name* </label> <input type="text" class="text" name="wifiname" id="wifiname" placeholder="Wifi Name" tabindex="1" required /> </div> <br /> <div> <label for="wifipass">Wifi Password*</label> <input type="password" class="text" name="wifipass" itemid="wifipass" id="wifipass" placeholder="Wifi Password" tabindex="1" required /> </div> <br /> <div> <label for="hotname">Hotspot Name*</label> <input type="text" class="text" name="hotname" id="hotname" placeholder="Hotspot Name" tabindex="1" required /> </div> <br /> <div> <label for="hotpass">Hotspot Password*</label> <input type="password" class="text" name="hotpass" id="hotpass" placeholder="Hotspot Password" tabindex="1" required /> </div> <br /> <div> <label for="hotname">User Name*</label> <input type="text" class="text" name="username" id="username" placeholder="User Name" tabindex="1" required /> </div> <br /> <div> <label for="lockpass">Lock Password*</label> <input type="password" class="text" name="lockpass" id="lockpass" placeholder="Lock Password" tabindex="1" required /> </div> <br /> <div> <span onclick="hidePass()" style="cursor: pointer; text-decoration: underline" >Show Passwords!! </span> </div> <br /> <button type="submit" name="submit" value="Save Settings" id="toSubmit" class="red" > Save Settings </button> </form> <br /> </center> </div> <script> var myOBJ = %OBJ%; put = () => { let wifiName = document.getElementById("wifiname"); wifiName.value = myOBJ.wifi; let wifiPass = document.getElementById("wifipass"); wifiPass.value = myOBJ.wifipw; let hotName = document.getElementById("hotname"); hotName.value = myOBJ.ap; let hotPass = document.getElementById("hotpass"); hotPass.value = myOBJ.appw; let userName = document.getElementById("username"); userName.value = myOBJ.user; let lockPass = document.getElementById("lockpass"); lockPass.value = myOBJ.lock; }; put(); document.getElementById("toSubmit").addEventListener("click", (e) => { e.preventDefault(); var confirmIt = confirm( "You are one step back to change system settings. This process will reset your device!! Press OK to confirm..." ); if (confirm === true) { let wifiName = document.getElementById("wifiname").value; let wifiPass = document.getElementById("wifipass").value; let hotName = document.getElementById("hotname").value; let hotPass = document.getElementById("hotpass").value; let userName = document.getElementById("username").value; let lockPass = document.getElementById("lockpass").value; let myLink = `/changesettings?wifiname=${wifiName}&wifipass=${wifiPass}&hotname=${hotName}&hotpass=${hotPass}&lockpass=${lockPass}&user=${userName}&submit=save+settings#`; var xhttp1 = new XMLHttpRequest(); xhttp1.open("GET", myLink, true); xhttp1.send(); } }); function hidePass() { let wifiPass = document.getElementById("wifipass"); let hotPass = document.getElementById("hotpass"); let lockPass = document.getElementById("lockpass"); wifiPass.type = "text"; hotPass.type = "text"; lockPass.type = "text"; return; } </script> </body></html>[m
[1mdiff --git a/extras/func.txt b/extras/func.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..2788171[m
[1m--- /dev/null[m
[1m+++ b/extras/func.txt[m
[36m@@ -0,0 +1,319 @@[m
[32m+[m
[32m+[m[32m‚îè‚îÅ‚ï∏‚ïª ‚ïª‚ï∫‚î≥‚ï∏‚îè‚îÅ‚îì‚îè‚îÅ‚îì   ‚îè‚îÅ‚ï∏‚ïª ‚ïª‚îè‚îì‚ïª‚îè‚îÅ‚ï∏‚ï∫‚î≥‚ï∏‚ïª‚îè‚îÅ‚îì‚îè‚îì‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m‚î£‚ï∏ ‚îè‚ïã‚îõ ‚îÉ ‚î£‚î≥‚îõ‚î£‚îÅ‚î´   ‚î£‚ï∏ ‚îÉ ‚îÉ‚îÉ‚îó‚î´‚îÉ   ‚îÉ ‚îÉ‚îÉ ‚îÉ‚îÉ‚îó‚î´‚îó‚îÅ‚îì[m
[32m+[m[32m‚îó‚îÅ‚ï∏‚ïπ ‚ïπ ‚ïπ ‚ïπ‚îó‚ï∏‚ïπ ‚ïπ   ‚ïπ  ‚îó‚îÅ‚îõ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏ ‚ïπ ‚ïπ‚îó‚îÅ‚îõ‚ïπ ‚ïπ‚îó‚îÅ‚îõ[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# Figure out by yourself[m
[32m+[m[32m# It lists the all directory and all its content in one shot...[m
[32m+[m[32mSerial.begin(9600);[m
[32m+[m[32m  if (!LittleFS.begin())[m
[32m+[m[32m  {[m
[32m+[m[32m    Serial.println("LittleFS Mount Failed");[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Dir dir = LittleFS.openDir("/");[m
[32m+[m[32m  // or Dir dir = LittleFS.openDir("/data");[m
[32m+[m[32m  while (dir.next())[m
[32m+[m[32m  {[m
[32m+[m[32m    Serial.println();[m
[32m+[m[32m    Serial.print(dir.fileName());[m
[32m+[m[32m    if (dir.fileSize())[m
[32m+[m[32m    {[m
[32m+[m[32m      File f = dir.openFile("r");[m
[32m+[m[32m      Serial.println(f.size());[m
[32m+[m[32m      String bu;[m
[32m+[m[32m      while (f.available())[m
[32m+[m[32m      {[m
[32m+[m[32m        char alp = f.read();[m
[32m+[m[32m        bu.concat(alp);[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      Serial.print(bu);[m
[32m+[m
[32m+[m[32m      f.close();[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  const char *myName = "gaurav";[m
[32m+[m[32m  Serial.printf("Hi mr %s\n", myName);[m
[32m+[m
[32m+[m[32m  File wDevice = LittleFS.open("device", "w");[m
[32m+[m[32m  if (wDevice.println("My name is Gaurav Dude!!"))[m
[32m+[m[32m  {[m
[32m+[m[32m    Serial.println("file is written...");[m
[32m+[m[32m  }[m
[32m+[m[32m  wDevice.close();[m
[32m+[m
[32m+[m[32m  File device = LittleFS.open("device", "r");[m
[32m+[m
[32m+[m[32m  String bu;[m
[32m+[m[32m  while (device.available())[m
[32m+[m[32m  {[m
[32m+[m[32m    char alp = device.read();[m
[32m+[m[32m    bu.concat(alp);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Serial.print(bu);[m
[32m+[m
[32m+[m[32m  device.close();[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# Mount file system open file, read file and unmount filesystem[m
[32m+[m[32mString readFile(char location)[m
[32m+[m[32m{[m
[32m+[m[32m  if (!LittleFS.begin())[m
[32m+[m[32m    return;[m
[32m+[m
[32m+[m[32m  File data = LittleFS.open(&location, "r");[m
[32m+[m
[32m+[m[32m  String bu;[m
[32m+[m[32m  while (data.available())[m
[32m+[m[32m  {[m
[32m+[m[32m    char alp = data.read();[m
[32m+[m[32m    bu.concat(alp);[m
[32m+[m[32m  }[m
[32m+[m[32m  data.close();[m
[32m+[m[32m  return bu;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32m# Keep listining on path for post request for any post request..[m[41m [m
[32m+[m[32mserver.on([m
[32m+[m[32m    "/post",[m
[32m+[m[32m    HTTP_POST,[m
[32m+[m[32m    [](AsyncWebServerRequest * request){},[m
[32m+[m[32m    NULL,[m
[32m+[m[32m    [](AsyncWebServerRequest * request, uint8_t *data, size_t len, size_t index, size_t total) {[m
[32m+[m[41m [m
[32m+[m[32m      for (size_t i = 0; i < len; i++) {[m
[32m+[m[32m        Serial.write(data[i]);[m
[32m+[m[32m      }[m
[32m+[m[41m [m
[32m+[m[32m      Serial.println();[m
[32m+[m[41m [m
[32m+[m[32m      request->send(200);[m
[32m+[m[32m  });[m
[32m+[m[41m [m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# function for handling upload post request.[m
[32m+[m[32mvoid handleBody(AsyncWebServerRequest *request, uint8_t *data, size_t len, size_t index, size_t total)[m
[32m+[m[32m{[m
[32m+[m[32m    if (!index)[m
[32m+[m[32m    {[m
[32m+[m[32m        Serial.printf("BodyStart: %u B\n", total);[m
[32m+[m[32m    }[m
[32m+[m[32m    for (size_t i = 0; i < len; i++)[m
[32m+[m[32m    {[m
[32m+[m[32m        Serial.write(data[i]);[m
[32m+[m[32m    }[m
[32m+[m[32m    if (index + len == total)[m
[32m+[m[32m    {[m
[32m+[m[32m        Serial.printf("BodyEnd: %u B\n", total);[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# mount and read the content[m
[32m+[m[32mString readStatus()[m
[32m+[m[32m{[m
[32m+[m
[32m+[m[32m    if (!LittleFS.begin())[m
[32m+[m[32m        return String("Not able to read..");[m
[32m+[m
[32m+[m[32m    File data = LittleFS.open("/index.html", "r");[m
[32m+[m
[32m+[m[32m    String bu;[m
[32m+[m[32m    while (data.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char alp = data.read();[m
[32m+[m[32m        bu.concat(alp);[m
[32m+[m[32m    }[m
[32m+[m[32m    data.close();[m
[32m+[m[32m    return bu;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32m#  List all collected headers[m
[32m+[m[32mint headers = request->headers();[m
[32m+[m[32mint i;[m
[32m+[m[32mfor (i = 0; i < headers; i++)[m
[32m+[m[32m{[m
[32m+[m[32m    AsyncWebHeader *h = request->getHeader(i);[m
[32m+[m[32m    Serial.printf("HEADER[%s]: %s\n", h->name().c_str(), h->value().c_str());[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# get specific header by name[m
[32m+[m[32mif (request->hasHeader("MyHeader"))[m
[32m+[m[32m{[m
[32m+[m[32m    AsyncWebHeader *h = request->getHeader("MyHeader");[m
[32m+[m[32m    Serial.printf("MyHeader: %s\n", h->value().c_str());[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[41m        [m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32m# ESP8266 Blink[m
[32m+[m[32m# Blink the blue LED on the ESP8266 module[m
[32m+[m
[32m+[m[32m#define LED 2 //Define blinking LED pin[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m[32m  pinMode(LED, OUTPUT); // Initialize the LED pin as an output[m
[32m+[m[32m}[m
[32m+[m[32m// the loop function runs over and over again forever[m
[32m+[m[32mvoid loop() {[m
[32m+[m[32m  digitalWrite(LED, LOW); // Turn the LED on (Note that LOW is the voltage level)[m
[32m+[m[32m  delay(1000); // Wait for a second[m
[32m+[m[32m  digitalWrite(LED, HIGH); // Turn the LED off by making the voltage HIGH[m
[32m+[m[32m  delay(1000); // Wait for two seconds[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32m# Safe delay function for arduino[m
[32m+[m
[32m+[m[32mint previouTime = 0;[m
[32m+[m[32mint eventTime = 2000;[m
[32m+[m[32munsigned long currentTime = millis();[m
[32m+[m[32mif (currentTime - previouTime >= eventTime)[m
[32m+[m[32m{[m
[32m+[m[32m    Serial.println("Hi gaurav after 2 minutes");[m
[32m+[m[32m    previouTime = currentTime;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# convert the string into int array..[m
[32m+[m[32mint myLeds[4] = {};[m
[32m+[m
[32m+[m[32mchar testString[] = "21, 20, 19, 18";[m
[32m+[m[32mchar delimiters[] = ",";[m
[32m+[m
[32m+[m[32mvoid setup() {[m
[32m+[m[32m  Serial.begin(115200);[m
[32m+[m
[32m+[m[32m char temp[10];[m
[32m+[m[32m  char *ptr;[m
[32m+[m[32m  int index = 0;[m
[32m+[m
[32m+[m[32m  ptr = strtok(testString, delimiters);[m
[32m+[m
[32m+[m[32m  while (ptr != NULL) {[m
[32m+[m[32m    myLeds[index] = atoi(ptr);[m
[32m+[m[32m    Serial.print("myLeds[");[m
[32m+[m[32m    Serial.print(index);[m
[32m+[m[32m    Serial.print("] = ");[m
[32m+[m[32m    Serial.println(myLeds[index++]);[m
[32m+[m[32m    ptr = strtok(NULL, delimiters);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m[32m# My function for alarm, this was the very firsy one to be experimented[m
[32m+[m[32mvoid alarmPin2()[m
[32m+[m[32m{[m
[32m+[m[32m    if (a2hOn != -1 && a2mOn != -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        if (hour() == a2hOn && minute() == a2mOn)[m
[32m+[m[32m        {[m
[32m+[m[32m            Serial.println("Task On committed..");[m
[32m+[m[32m            pinMode(LED, OUTPUT);[m
[32m+[m[32m            digitalWrite(LED, LOW);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    if (a2hOff != -1 && a2mOff != -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        if (hour() == a2hOff && minute() == a2mOff)[m
[32m+[m[32m        {[m
[32m+[m[32m            Serial.println("Task Off committed..");[m
[32m+[m[32m            digitalWrite(LED, HIGH);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32mSerial.println("\n===================================================");[m
[32m+[m[32mSerial.println("\n===================================================");[m
[32m+[m
[32m+[m[32mfor (int i = 0; i <= 9; i++)[m
[32m+[m[32m{[m
[32m+[m[32m    Serial.print(" Alarma - ");[m
[32m+[m[32m    Serial.print(i);[m
[32m+[m[32m    Serial.print("   ");[m
[32m+[m[32m    String myAlarmJSON = s + "{\"free\":" + 1 + ",\"enable\":" + alarms[i][1] + ",\"pin\":" + alarms[i][2] + ",\"onHr\":" + alarms[i][3] + ",\"onMin\":" + alarms[i][4] + ",\"offHr\":" + alarms[i][5] + ",\"offMin\":" + alarms[i][6] + ",\"sun\":" + alarms[i][7] + ",\"mon\":" + alarms[i][8] + ",\"tue\":" + alarms[i][9] + ",\"wed\":" + alarms[i][10] + ",\"thu\":" + alarms[i][11] + ",\"fri\":" + alarms[i][12] + ",\"sat\":" + alarms[i][13] + ",\"oneShot\":" + alarms[i][14] + ",\"day\":" + alarms[i][15] + ",\"month\":" + alarms[i][16] + ",\"year\":" + alarms[i][17] + "}";[m
[32m+[m[32m    Serial.println(myAlarmJSON);[m
[32m+[m
[32m+[m[32m    for (int j = 0; j <= 17; j++)[m
[32m+[m[32m    {[m
[32m+[m[32m        Serial.print(alarms[i][j]);[m
[32m+[m[32m    }[m
[32m+[m[32m    Serial.println("\n");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m{alarm0:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm1:{"free":1,"enable":1,"pin":2,"onHr":0,"onMin":1,"offHr":0,"offMin":2,"sun":1,"mon":1,"tue":1,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm2:{"free":1,"enable":1,"pin":2,"onHr":0,"onMin":3,"offHr":0,"offMin":4,"sun":1,"mon":1,"tue":1,"wed":1,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm3:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm4:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm5:{"free":1,"enable":1,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm6:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm7:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm8:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0},alarm9:{"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,"tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}}[m
[32m+[m
[32m+[m
[32m+[m[32m=======================================================================================[m
[32m+[m[32m=======================================================================================[m
[32m+[m
[32m+[m
[32m+[m[32m// document.getElementById("putJ").addEventListener("click", function (e) {[m
[32m+[m[32m  //   console.log("hi gaurav");[m
[32m+[m[32m  //   let xhr = new XMLHttpRequest();[m
[32m+[m[32m  //   xhr.onreadystatechange = () => {[m
[32m+[m[32m  //     if (xhr.readyState == 4) {[m
[32m+[m[32m  //       if (xhr.status == 200) {[m
[32m+[m[32m  //         console.log("Hi gaurav its ready..");[m
[32m+[m[32m  //         let result = xhr.responseText;[m
[32m+[m[32m  //         var resObj = JSON.parse(result);[m
[32m+[m[32m  //         console.log(resObj);[m
[32m+[m[32m  //       }[m
[32m+[m[32m  //     }[m
[32m+[m[32m  //   };[m
[32m+[m[32m  //   xhr.open("GET", "http://192.168.144.155/alarmjson", true);[m
[32m+[m[32m  //   xhr.send();[m
[32m+[m[32m  // });[m
[1mdiff --git a/extras/functions b/extras/functions[m
[1mdeleted file mode 100644[m
[1mindex 0174942..0000000[m
[1m--- a/extras/functions[m
[1m+++ /dev/null[m
[36m@@ -1,178 +0,0 @@[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-Serial.begin(9600);[m
[31m-[m
[31m-  if (!LittleFS.begin())[m
[31m-  {[m
[31m-    Serial.println("LittleFS Mount Failed");[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  Dir dir = LittleFS.openDir("/");[m
[31m-  // or Dir dir = LittleFS.openDir("/data");[m
[31m-  while (dir.next())[m
[31m-  {[m
[31m-    Serial.println();[m
[31m-    Serial.print(dir.fileName());[m
[31m-    if (dir.fileSize())[m
[31m-    {[m
[31m-      File f = dir.openFile("r");[m
[31m-      Serial.println(f.size());[m
[31m-      String bu;[m
[31m-      while (f.available())[m
[31m-      {[m
[31m-        char alp = f.read();[m
[31m-        bu.concat(alp);[m
[31m-      }[m
[31m-[m
[31m-      Serial.print(bu);[m
[31m-[m
[31m-      f.close();[m
[31m-    }[m
[31m-  }[m
[31m-  const char *myName = "gaurav";[m
[31m-  Serial.printf("Hi mr %s\n", myName);[m
[31m-[m
[31m-  File wDevice = LittleFS.open("device", "w");[m
[31m-  if (wDevice.println("My name is Gaurav Dude!!"))[m
[31m-  {[m
[31m-    Serial.println("file is written...");[m
[31m-  }[m
[31m-  wDevice.close();[m
[31m-[m
[31m-  File device = LittleFS.open("device", "r");[m
[31m-[m
[31m-  String bu;[m
[31m-  while (device.available())[m
[31m-  {[m
[31m-    char alp = device.read();[m
[31m-    bu.concat(alp);[m
[31m-  }[m
[31m-[m
[31m-  Serial.print(bu);[m
[31m-[m
[31m-  device.close();[m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-[m
[31m-String readFile(char location)[m
[31m-{[m
[31m-  if (!LittleFS.begin())[m
[31m-    return;[m
[31m-[m
[31m-  File data = LittleFS.open(&location, "r");[m
[31m-[m
[31m-  String bu;[m
[31m-  while (data.available())[m
[31m-  {[m
[31m-    char alp = data.read();[m
[31m-    bu.concat(alp);[m
[31m-  }[m
[31m-  data.close();[m
[31m-  return bu;[m
[31m-};[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-[m
[31m-[m
[31m-server.on([m
[31m-    "/post",[m
[31m-    HTTP_POST,[m
[31m-    [](AsyncWebServerRequest * request){},[m
[31m-    NULL,[m
[31m-    [](AsyncWebServerRequest * request, uint8_t *data, size_t len, size_t index, size_t total) {[m
[31m- [m
[31m-      for (size_t i = 0; i < len; i++) {[m
[31m-        Serial.write(data[i]);[m
[31m-      }[m
[31m- [m
[31m-      Serial.println();[m
[31m- [m
[31m-      request->send(200);[m
[31m-  });[m
[31m- [m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-[m
[31m-void handleBody(AsyncWebServerRequest *request, uint8_t *data, size_t len, size_t index, size_t total)[m
[31m-{[m
[31m-    if (!index)[m
[31m-    {[m
[31m-        Serial.printf("BodyStart: %u B\n", total);[m
[31m-    }[m
[31m-    for (size_t i = 0; i < len; i++)[m
[31m-    {[m
[31m-        Serial.write(data[i]);[m
[31m-    }[m
[31m-    if (index + len == total)[m
[31m-    {[m
[31m-        Serial.printf("BodyEnd: %u B\n", total);[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-[m
[31m-String readStatus()[m
[31m-{[m
[31m-[m
[31m-    if (!LittleFS.begin())[m
[31m-        return String("Not able to read..");[m
[31m-[m
[31m-    File data = LittleFS.open("/index.html", "r");[m
[31m-[m
[31m-    String bu;[m
[31m-    while (data.available())[m
[31m-    {[m
[31m-        char alp = data.read();[m
[31m-        bu.concat(alp);[m
[31m-    }[m
[31m-    data.close();[m
[31m-    return bu;[m
[31m-}[m
[31m-[m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m- //List all collected headers[m
[31m-        int headers = request->headers();[m
[31m-        int i;[m
[31m-        for (i = 0; i < headers; i++)[m
[31m-        {[m
[31m-            AsyncWebHeader *h = request->getHeader(i);[m
[31m-            Serial.printf("HEADER[%s]: %s\n", h->name().c_str(), h->value().c_str());[m
[31m-        }[m
[31m-[m
[31m-        //get specific header by name[m
[31m-        if (request->hasHeader("MyHeader"))[m
[31m-        {[m
[31m-            AsyncWebHeader *h = request->getHeader("MyHeader");[m
[31m-            Serial.printf("MyHeader: %s\n", h->value().c_str());[m
[31m-        }[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
[31m-=======================================================================================[m
[31m-=======================================================================================[m
[1mdiff --git a/extras/setTimeHtml.html b/extras/setTimeHtml.html[m
[1mnew file mode 100644[m
[1mindex 0000000..fcb5463[m
[1m--- /dev/null[m
[1m+++ b/extras/setTimeHtml.html[m
[36m@@ -0,0 +1,351 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Time settings</title>[m
[32m+[m[32m    <link rel="stylesheet" href="http://192.168.218.155/style.css" />[m
[32m+[m[32m    <script src="http://192.168.218.155/jquery.js"></script>[m
[32m+[m[32m    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->[m
[32m+[m[32m    <style>[m
[32m+[m[32m      .middleIt {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body>[m
[32m+[m[32m    <div class="middleIt">[m
[32m+[m[32m      <div[m
[32m+[m[32m        class="middleIt"[m
[32m+[m[32m        style="[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m          border-radius: 20px;[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m        "[m
[32m+[m[32m      >[m
[32m+[m[32m        <div id="timeMain" style="width: 330px">[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <h1 style="font-size: 30px">Time Settings..</h1>[m
[32m+[m[32m          <h2>Your Browser's time</h2>[m
[32m+[m[32m          <h1 id="bTime">....</h1>[m
[32m+[m[32m          <h2>Your Device's time</h2>[m
[32m+[m[32m          <h1 id="deviceTime">....</h1>[m
[32m+[m
[32m+[m[32m          <button class="red" id="setBtime">Set Browser's time</button>[m
[32m+[m[32m          <h2 id="setInfo" style="color: #d1ce0d"></h2>[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Start----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <h1>OR set it maunally down here...</h1>[m
[32m+[m[32m          <h2>You can change any number of values here.</h2>[m
[32m+[m
[32m+[m[32m          <div id="myTime">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Hours"[m
[32m+[m[32m              id="hour"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Minutes"[m
[32m+[m[32m              id="minute"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Second"[m
[32m+[m[32m              id="second"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Start----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <div id="myDate">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Day"[m
[32m+[m[32m              id="day"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Month"[m
[32m+[m[32m              id="month"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Year"[m
[32m+[m[32m              id="year"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br /><br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <button class="red" id="setManually">OR Set Manually</button>[m
[32m+[m
[32m+[m[32m          <h1 style="color: #d1ce0d" id="dateWarn"></h1>[m
[32m+[m
[32m+[m[32m          <br /><br /><br />[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </body>[m
[32m+[m[32m  <script>[m
[32m+[m[32m    let time = {[m
[32m+[m[32m      this: "hi",[m
[32m+[m[32m    };[m
[32m+[m[32m    $(function () {[m
[32m+[m[32m      let dTime = $("#deviceTime");[m
[32m+[m[32m      let setInfo = $("#setInfo");[m
[32m+[m[32m      setInfo.hide();[m
[32m+[m[32m      let dw = $("#dateWarn");[m
[32m+[m[32m      dw.hide();[m
[32m+[m
[32m+[m[32m      $.getJSON("http://192.168.218.155/gettime", (data, status) => {[m
[32m+[m[32m        var myWeekDay = [[m
[32m+[m[32m          "omit",[m
[32m+[m[32m          "Sun",[m
[32m+[m[32m          "Mon",[m
[32m+[m[32m          "Tue",[m
[32m+[m[32m          "Wed",[m
[32m+[m[32m          "Thu",[m
[32m+[m[32m          "Fri",[m
[32m+[m[32m          "Sat",[m
[32m+[m[32m        ];[m
[32m+[m[32m        let myMonth = [[m
[32m+[m[32m          "omit",[m
[32m+[m[32m          "Jan",[m
[32m+[m[32m          "Feb",[m
[32m+[m[32m          "Mar",[m
[32m+[m[32m          "Apr",[m
[32m+[m[32m          "May",[m
[32m+[m[32m          "Jun",[m
[32m+[m[32m          "Jul",[m
[32m+[m[32m          "Aug",[m
[32m+[m[32m          "Sep",[m
[32m+[m[32m          "Oct",[m
[32m+[m[32m          "Nov",[m
[32m+[m[32m          "Dec",[m
[32m+[m[32m        ];[m
[32m+[m[32m        let secIncre = data.sec;[m
[32m+[m[32m        let minIncre = data.min;[m
[32m+[m
[32m+[m[32m        setInterval(() => {[m
[32m+[m[32m          if (secIncre == 60) {[m
[32m+[m[32m            minIncre++;[m
[32m+[m[32m            secIncre = 0;[m
[32m+[m[32m          }[m
[32m+[m[32m          if (minIncre == 60) {[m
[32m+[m[32m            window.location.reload();[m
[32m+[m[32m          }[m
[32m+[m[32m          let showTime =[m
[32m+[m[32m            "" +[m
[32m+[m[32m            myWeekDay[data.wDay] +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            myMonth[data.mon] +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.day +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.yr +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.hr +[m
[32m+[m[32m            ":" +[m
[32m+[m[32m            minIncre +[m
[32m+[m[32m            ":" +[m
[32m+[m[32m            secIncre +[m
[32m+[m[32m            " (Local Time)";[m
[32m+[m[32m          dTime.text(showTime);[m
[32m+[m[32m          secIncre++;[m
[32m+[m[32m        }, 1000);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      let bTime = $("#bTime");[m
[32m+[m[32m      setInterval(() => {[m
[32m+[m[32m        let myTime = new Date();[m
[32m+[m[32m        bTime.text(myTime);[m
[32m+[m[32m      }, 1000);[m
[32m+[m
[32m+[m[32m      let setBtime = $("#setBtime");[m
[32m+[m[32m      setBtime.hover([m
[32m+[m[32m        function () {[m
[32m+[m[32m          setInfo[m
[32m+[m[32m            .text([m
[32m+[m[32m              "This will set the device time and date to, as same as your browser's.."[m
[32m+[m[32m            )[m
[32m+[m[32m            .slideDown(150);[m
[32m+[m[32m          $(this).css({ "background-color": "#ae1100", color: "white" });[m
[32m+[m[32m        },[m
[32m+[m[32m        function () {[m
[32m+[m[32m          $(this).css({ "background-color": "#ebecf0", color: "#ae1100" });[m
[32m+[m[32m          setInfo.slideUp(150);[m
[32m+[m[32m        }[m
[32m+[m[32m      );[m
[32m+[m[32m      setBtime.click(function () {[m
[32m+[m[32m        let d = new Date();[m
[32m+[m[32m        let setTheDate =[m
[32m+[m[32m          "?h=" +[m
[32m+[m[32m          d.getHours() +[m
[32m+[m[32m          "&m=" +[m
[32m+[m[32m          d.getMinutes() +[m
[32m+[m[32m          "&s=" +[m
[32m+[m[32m          (d.getSeconds() + 2) +[m
[32m+[m[32m          "&d=" +[m
[32m+[m[32m          d.getDate() +[m
[32m+[m[32m          "&M=" +[m
[32m+[m[32m          (d.getMonth() + 1) +[m
[32m+[m[32m          "&y=" +[m
[32m+[m[32m          d.getFullYear();[m
[32m+[m
[32m+[m[32m        $.get("http://192.168.218.155/settime" + setTheDate, function () {[m
[32m+[m[32m          setTimeout(() => {[m
[32m+[m[32m            window.location.reload();[m
[32m+[m[32m          }, 1500);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      let hr = $("#hour");[m
[32m+[m[32m      let min = $("#minute");[m
[32m+[m[32m      let sec = $("#second");[m
[32m+[m[32m      let day = $("#day");[m
[32m+[m[32m      let mon = $("#month");[m
[32m+[m[32m      let yr = $("#year");[m
[32m+[m
[32m+[m[32m      let sethr = -1;[m
[32m+[m[32m      let setmin = -1;[m
[32m+[m[32m      let setsec = -1;[m
[32m+[m[32m      let setday = -1;[m
[32m+[m[32m      let setmon = -1;[m
[32m+[m[32m      let setyr = -1;[m
[32m+[m
[32m+[m[32m      let setManStatus = false;[m
[32m+[m[32m      $("#setManually").hover([m
[32m+[m[32m        function () {[m
[32m+[m[32m          setManStatus = true;[m
[32m+[m[32m          if (hr.val()) {[m
[32m+[m[32m            if (hr.val() >= 24 || hr.val() < 0 || isNaN(hr.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Hour can be in range 0-23, (24hr-format)!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            sethr = hr.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (min.val()) {[m
[32m+[m[32m            if (min.val() >= 60 || min.val() < 0 || isNaN(hr.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Minutes can be in range 0-59!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setmin = min.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (sec.val()) {[m
[32m+[m[32m            if (sec.val() >= 60 || sec.val() < 0 || isNaN(sec.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with seconds!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setsec = sec.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (day.val()) {[m
[32m+[m[32m            if (day.val() >= 32 || day.val() < 1 || isNaN(day.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with day!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setday = day.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (mon.val()) {[m
[32m+[m[32m            if (mon.val() >= 13 || mon.val() < 1 || isNaN(mon.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with month!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setmon = mon.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (yr.val()) {[m
[32m+[m[32m            // let myYr = yr.val();[m
[32m+[m[32m            if (isNaN(yr.val()) || yr.val().length != 4) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with year.. Mention full year!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setyr = yr.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          $(this).css({[m
[32m+[m[32m            "background-color": "#ae1100",[m
[32m+[m[32m            color: "white",[m
[32m+[m[32m          });[m
[32m+[m[32m        },[m
[32m+[m[32m        function () {[m
[32m+[m[32m          dw.text("");[m
[32m+[m[32m          dw.slideUp(150);[m
[32m+[m
[32m+[m[32m          $(this).css({ "background-color": "#ebecf0", color: "#ae1100" });[m
[32m+[m[32m        }[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      $("#setManually").click(function () {[m
[32m+[m[32m        if ([m
[32m+[m[32m          sethr == -1 &&[m
[32m+[m[32m          setmin == -1 &&[m
[32m+[m[32m          setsec == -1 &&[m
[32m+[m[32m          setday == -1 &&[m
[32m+[m[32m          setmon == -1 &&[m
[32m+[m[32m          setyr == -1[m
[32m+[m[32m        ) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        if (setManStatus == true) {[m
[32m+[m[32m          let setTheDate =[m
[32m+[m[32m            "?h=" +[m
[32m+[m[32m            sethr +[m
[32m+[m[32m            "&m=" +[m
[32m+[m[32m            setmin +[m
[32m+[m[32m            "&s=" +[m
[32m+[m[32m            setsec +[m
[32m+[m[32m            "&d=" +[m
[32m+[m[32m            setday +[m
[32m+[m[32m            "&M=" +[m
[32m+[m[32m            setmon +[m
[32m+[m[32m            "&y=" +[m
[32m+[m[32m            setyr;[m
[32m+[m
[32m+[m[32m          console.log(setTheDate);[m
[32m+[m[32m          $.get("http://192.168.218.155/settime" + setTheDate, function () {[m
[32m+[m[32m            setTimeout(() => {[m
[32m+[m[32m              window.location.reload();[m
[32m+[m[32m            }, 1500);[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m  </script>[m
[32m+[m[32m</html>[m
[1mdiff --git a/extras/test.html b/extras/testWifiPage.html[m
[1msimilarity index 100%[m
[1mrename from extras/test.html[m
[1mrename to extras/testWifiPage.html[m
[1mdiff --git a/extras/wifiHtml.html b/extras/wifiHtml.html[m
[1mnew file mode 100644[m
[1mindex 0000000..f3b34a6[m
[1m--- /dev/null[m
[1m+++ b/extras/wifiHtml.html[m
[36m@@ -0,0 +1,269 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Wifi Settings</title>[m
[32m+[m[32m    <link rel="stylesheet" href="http://192.168.218.155/style.css" />[m
[32m+[m[32m    <style>[m
[32m+[m[32m      .middleIt {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m    <script src="http://192.168.218.155/jquery.js"></script>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body style="font-size: 16px">[m
[32m+[m[32m    <div class="middleIt">[m
[32m+[m[32m      <div[m
[32m+[m[32m        class="middleIt"[m
[32m+[m[32m        id="mainForm"[m
[32m+[m[32m        style="[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m          border-radius: 20px;[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m        "[m
[32m+[m[32m      >[m
[32m+[m[32m        <form[m
[32m+[m[32m          method="GET"[m
[32m+[m[32m          action="#"[m
[32m+[m[32m          id="login-form"[m
[32m+[m[32m          class="login-form"[m
[32m+[m[32m          autocomplete="off"[m
[32m+[m[32m          role="main"[m
[32m+[m[32m        >[m
[32m+[m[32m          <h2>Wifi-Hotspot Settings..</h2>[m
[32m+[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="wifiname">Wifi Name* </label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="wifiname"[m
[32m+[m[32m              id="wifiname"[m
[32m+[m[32m              placeholder="Wifi Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="wifipass">Wifi Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="wifipass"[m
[32m+[m[32m              itemid="wifipass"[m
[32m+[m[32m              id="wifipass"[m
[32m+[m[32m              placeholder="Wifi Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotname">Hotspot Name*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="hotname"[m
[32m+[m[32m              id="hotname"[m
[32m+[m[32m              placeholder="Hotspot Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotpass">Hotspot Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="hotpass"[m
[32m+[m[32m              id="hotpass"[m
[32m+[m[32m              placeholder="Hotspot Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotname">User Name*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="username"[m
[32m+[m[32m              id="username"[m
[32m+[m[32m              placeholder="User Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="lockpass">Lock Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="lockpass"[m
[32m+[m[32m              id="lockpass"[m
[32m+[m[32m              placeholder="Lock Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <span[m
[32m+[m[32m              id="showPassword"[m
[32m+[m[32m              style="[m
[32m+[m[32m                cursor: pointer;[m
[32m+[m[32m                text-decoration: underline;[m
[32m+[m[32m                font-weight: 600;[m
[32m+[m[32m              "[m
[32m+[m[32m              >Show Passwords!![m
[32m+[m[32m            </span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <p[m
[32m+[m[32m            id="showTime"[m
[32m+[m[32m            style="color: #d1ce0d; font-size: 14px; font-weight: 600"[m
[32m+[m[32m          ></p>[m
[32m+[m
[32m+[m[32m          <button[m
[32m+[m[32m            type="submit"[m
[32m+[m[32m            name="submit"[m
[32m+[m[32m            value="Save Settings"[m
[32m+[m[32m            id="toSubmit"[m
[32m+[m[32m            class="red"[m
[32m+[m[32m          >[m
[32m+[m[32m            Save Settings[m
[32m+[m[32m          </button>[m
[32m+[m[32m        </form>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <br />[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <script>[m
[32m+[m[32m      var myOBJ = %OBJ%;[m
[32m+[m
[32m+[m[32m      $(function () {[m
[32m+[m[32m        let wifiName = $("#wifiname");[m
[32m+[m[32m        let wifiPass = $("#wifipass");[m
[32m+[m[32m        let hotName = $("#hotname");[m
[32m+[m[32m        let hotPass = $("#hotpass");[m
[32m+[m[32m        let userName = $("#username");[m
[32m+[m[32m        let lockPass = $("#lockpass");[m
[32m+[m[32m        let dTime = $("#showTime");[m
[32m+[m
[32m+[m[32m        wifiName.val(myOBJ.wifi);[m
[32m+[m[32m        wifiPass.val(myOBJ.wifipw);[m
[32m+[m[32m        hotName.val(myOBJ.ap);[m
[32m+[m[32m        hotPass.val(myOBJ.appw);[m
[32m+[m[32m        userName.val(myOBJ.user);[m
[32m+[m[32m        lockPass.val(myOBJ.lock);[m
[32m+[m
[32m+[m[32m        $("#toSubmit").click(function () {[m
[32m+[m[32m          var confirmIt = confirm([m
[32m+[m[32m            "You are one step back to change system settings. This process will reset your device!! Press OK to confirm..."[m
[32m+[m[32m          );[m
[32m+[m
[32m+[m[32m          if (confirmIt === true) {[m
[32m+[m[32m            let myLink = `/changesettings?wifiname=${wifiName.val()}&wifipass=${wifiPass.val()}&hotname=${hotName.val()}&hotpass=${hotPass.val()}&lockpass=${lockPass.val()}&user=${userName.val()}&submit=save+settings#`;[m
[32m+[m
[32m+[m[32m            console.log(myLink);[m
[32m+[m
[32m+[m[32m            var xhttp1 = new XMLHttpRequest();[m
[32m+[m[32m            xhttp1.open("GET", myLink, true);[m
[32m+[m[32m            xhttp1.send();[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        let showPwCheck = 0;[m
[32m+[m[32m        let showPass = $("#showPassword");[m
[32m+[m[32m        showPass.hover([m
[32m+[m[32m          function () {[m
[32m+[m[32m            $(this).css({ color: "#0077ff", "font-weight": "800" });[m
[32m+[m[32m          },[m
[32m+[m[32m          function () {[m
[32m+[m[32m            $(this).css({ color: "#babecc", "font-weight": "600" });[m
[32m+[m[32m          }[m
[32m+[m[32m        );[m
[32m+[m
[32m+[m[32m        showPass.click(function () {[m
[32m+[m[32m          if (showPwCheck == 0) {[m
[32m+[m[32m            wifiPass.attr("type", "text");[m
[32m+[m[32m            lockPass.attr("type", "text");[m
[32m+[m[32m            hotPass.attr("type", "text");[m
[32m+[m[32m            showPwCheck = 1;[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m          showPwCheck = 1;[m
[32m+[m[32m          wifiPass.attr("type", "password");[m
[32m+[m[32m          lockPass.attr("type", "password");[m
[32m+[m[32m          hotPass.attr("type", "password");[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        $.getJSON("http://192.168.218.155/gettime", (data, status) => {[m
[32m+[m[32m          var myWeekDay = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Sun",[m
[32m+[m[32m            "Mon",[m
[32m+[m[32m            "Tue",[m
[32m+[m[32m            "Wed",[m
[32m+[m[32m            "Thu",[m
[32m+[m[32m            "Fri",[m
[32m+[m[32m            "Sat",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let myMonth = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Jan",[m
[32m+[m[32m            "Feb",[m
[32m+[m[32m            "Mar",[m
[32m+[m[32m            "Apr",[m
[32m+[m[32m            "May",[m
[32m+[m[32m            "Jun",[m
[32m+[m[32m            "Jul",[m
[32m+[m[32m            "Aug",[m
[32m+[m[32m            "Sep",[m
[32m+[m[32m            "Oct",[m
[32m+[m[32m            "Nov",[m
[32m+[m[32m            "Dec",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let secIncre = data.sec;[m
[32m+[m[32m          let minIncre = data.min;[m
[32m+[m
[32m+[m[32m          setInterval(() => {[m
[32m+[m[32m            if (secIncre == 60) {[m
[32m+[m[32m              minIncre++;[m
[32m+[m[32m              secIncre = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m            if (minIncre == 60) {[m
[32m+[m[32m              window.location.reload();[m
[32m+[m[32m            }[m
[32m+[m[32m            let showTime =[m
[32m+[m[32m              "" +[m
[32m+[m[32m              myWeekDay[data.wDay] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              myMonth[data.mon] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.day +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.yr +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.hr +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              minIncre +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              secIncre +[m
[32m+[m[32m              " (Local Time)";[m
[32m+[m[32m            dTime.text(showTime);[m
[32m+[m[32m            secIncre++;[m
[32m+[m[32m          }, 1000);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m    </script>[m
[32m+[m[32m  </body>[m
[32m+[m[32m</html>[m
[1mdiff --git a/platformio.ini b/platformio.ini[m
[1mindex 0f51957..ee44c9f 100644[m
[1m--- a/platformio.ini[m
[1m+++ b/platformio.ini[m
[36m@@ -15,4 +15,6 @@[m [mframework = arduino[m
 board_build.filesystem = littlefs[m
 lib_deps = [m
 	bblanchon/ArduinoJson@^6.17.3[m
[31m-	me-no-dev/ESP Async WebServer @ ^1.2.3[m
\ No newline at end of file[m
[32m+[m	[32mme-no-dev/ESP Async WebServer @ ^1.2.3[m
[32m+[m	[32mpaulstoffregen/Time@^1.6[m
[32m+[m	[32mknolleary/PubSubClient@^2.8[m
[1mdiff --git a/problems.txt b/problems.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..e92b7d9[m
[1m--- /dev/null[m
[1m+++ b/problems.txt[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32m        ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îì ‚ïª  ‚îè‚îÅ‚ï∏‚îè‚î≥‚îì‚îè‚îÅ‚îì[m
[32m+[m[32m        ‚î£‚îÅ‚îõ‚î£‚î≥‚îõ‚îÉ ‚îÉ‚î£‚îª‚îì‚îÉ  ‚î£‚ï∏ ‚îÉ‚îÉ‚îÉ‚îó‚îÅ‚îì[m
[32m+[m[32m        ‚ïπ  ‚ïπ‚îó‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏‚ïπ ‚ïπ‚îó‚îÅ‚îõ[m
[32m+[m
[32m+[m[32m‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[41m                               [m
[32m+[m
[32m+[m[32m=> This file maintains record of all the problems arised during this project and[m[41m [m
[32m+[m[32m    how i solved it and biblographies...[m
[32m+[m
[32m+[m
[32m+[m[32m=>[m[41m [m
\ No newline at end of file[m
[1mdiff --git a/src/alarmHomeHtml.h b/src/alarmHomeHtml.h[m
[1mnew file mode 100644[m
[1mindex 0000000..a118c7b[m
[1m--- /dev/null[m
[1m+++ b/src/alarmHomeHtml.h[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32mconst char alarmHome_html[] PROGMEM = R"rawliteral([m
[32m+[m[32m<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Alarms</title><link rel="stylesheet" href="/style.css" /><style>.card{width:380px;border-radius:20px;margin-bottom:10px;box-shadow:-2px -2px 5px #fff,2px 2px 5px #babecc}.middleIt{display:flex;justify-content:center;position:relative}</style><script src="/jquery.js"></script></head><body id="body"><br /><br /><div id="mainBody" class="middleIt"><div style=" position: absolute; background-color: pink; width: 380px; height: 380px; border-radius: 20px 20px 0 0; z-index: -1; opacity: 0; " id="hider0"></div><div class="card"><form action="" id="formNum0"><div class="custom-select"><button class="unit special" type="button" id="buttonNum0" style=" float: left; box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff; margin-right: 30px; "> -- </button><select id="select0"><option value="option">Select Appliance &#9662;</option></select></div><br /><br /><h2 id="alarmInfo"></h2><h1 id="alarmAssist"></h1><input type="text" id="onHr0" placeholder="On Hr" style="width: 90px; display: inline" /><span style="float: right; width: 220px; margin-top: -10px"><h2 id="showOnceInfo"> You can only use ON function or OFF function. If On is filled OFF will be IGNORED.. This alarm will be disabled once its completed. No date means todays date applied.</h2></span><button class="unit" type="button" id="buttonMon0" ison="0"> mon </button><button class="unit" type="button" id="buttonTue0" ison="0"> Tue </button><button class="unit" type="button" id="buttonWed0" ison="0"> wed </button><br /><br /><input type="text" placeholder="On Min" id="onMin0" style="width: 90px; display: inline" /><button class="unit" type="button" id="buttonThu0" ison="0"> Thu </button><button class="unit" type="button" id="buttonFri0" ison="0"> Fri </button><button class="unit" type="button" id="buttonSat0" ison="0"> Sat </button><br /><br /><input type="text" placeholder="Off Hr" id="offHr0" style="width: 90px; display: inline" /><button class="unit special del" type="button" id="buttonDel0" isdel="0" style=" width: 129px; border-radius: 320px; background-color: #ec4a4a33; "> Delete </button><button class="unit" type="button" id="buttonSun0" ison="0"> Sun </button><br /><br /><input type="text" placeholder="Off Min" id="offMin0" style="width: 90px; display: inline" /><button class="unit special once" type="button" id="buttonOnce0" isonce="0" style="padding: 27px"> Once </button><button class="unit special enable" type="button" id="enable0" isenable="0" style="width: 129px; border-radius: 320px"> Enable </button><br /><br /><h2 id="manifest"></h2><div id="myDate"><input type="text" placeholder="Day" id="day0" style="width: 96px; display: inline" /><input type="text" placeholder="Month" id="month0" style="width: 96px; display: inline" /><input type="text" placeholder="Year" id="year0" style="width: 96px; display: inline" /><br /><br /><br /></div><button class="red" type="button" id="addAlarm0" isok="0"> Add New Alarm </button><h2 id="allErr" style="text-align: center; color: #d47304"></h2></form><br /></div></div><br /><br /></body><script>$(function(){let alarmInfo0=$("#alarmInfo").hide();let alarmAssist0=$("#alarmAssist").hide();let allError=$("#allErr").hide();let select0=$("#select0");let onHr0=$("#onHr0");let onMin0=$("#onMin0");let offHr0=$("#offHr0");let offMin0=$("#offMin0");let myShowOnceInfo=$("#showOnceInfo");let buttonMon0=$("#buttonMon0");let buttonTue0=$("#buttonTue0");let buttonWed0=$("#buttonWed0");let buttonThu0=$("#buttonThu0");let buttonFri0=$("#buttonFri0");let buttonSat0=$("#buttonSat0");let buttonSun0=$("#buttonSun0");let dayButton=$(".unit").not(".special");let enable0=$("#enable0");let buttonOnce=$("#buttonOnce0");let day0=$("#day0");let month0=$("#month0");let year0=$("#year0");let myDate=$("#myDate");let addAlarm0=$("#addAlarm0");let appliances={1:"Hall_Fan",2:"Kitchen_Light"};let myOption1=$("<option></option>").attr("value","1").text(appliances[1]);let myOption2=$("<option></option>").attr("value","2").text(appliances[2]);select0.append(myOption1);select0.append(myOption2);$("input").on({focus:function(){alarmInfo0.text("Alarm must be written in 24Hr format!! where 0 equals 12am and 12 equals 12pm");alarmInfo0.slideDown(150);},keyup:function(){if($(this).attr("id")=="onHr0"){alarmAssist0.text("Valid time is in between 0 and 23, ON time in hour is : "+ $(this).val());alarmAssist0.slideDown(150);return;}if($(this).attr("id")=="onMin0"){alarmAssist0.text("Valid time is in between 0 and 59, ON time in minutes is : "+ $(this).val());alarmAssist0.slideDown(150);return;}if($(this).attr("id")=="offHr0"){alarmAssist0.text("Valid time is in between 0 and 23, OFF time in hour is : "+ $(this).val());alarmAssist0.slideDown(150);return;}if($(this).attr("id")=="offMin0"){alarmAssist0.text("Valid time is in between 0 and 59, OFF time in minutes is : "+ $(this).val());alarmAssist0.slideDown(150);return;}},});buttonMon0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonTue0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonWed0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonThu0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonFri0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonSat0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});buttonSun0.click(()=>{$(this).attr("ison")==1?$(this).attr("ison","0"):$(this).attr("ison","1");});enable0.click(()=>{enable0.attr("isenable")==0?enable0.attr("isenable","1").css({"background-color":"rgba(143, 235, 135, 0.4)"}).text("Enabled"):enable0.attr("isenable","0").css({"background-color":"#ebecf0"}).text("Enable");});buttonOnce.on("click",function(){if($(this).attr("isonce")==0){$(this).css("background-color","hsla(64, 97%, 62%, 0.4)");myDate.slideDown("slow");$(this).attr("isonce","1");dayButton.hide();myShowOnceInfo.fadeIn("slow");return;} myShowOnceInfo.hide();dayButton.fadeIn("slow");myDate.slideUp("slow");$(this).attr("isonce","0").css("background-color","#ebecf0");});addAlarm0.hover(function(){if(select0.children("option:selected").val()=="option"){allError.text("Select any appliance form the select button to apply changes..").css("color","#d47304");allError.slideDown(150);return;}if(onHr0.val()>=24||onHr0.val()<0||onHr0.val()==""){if(offHr0.val()>=24||offHr0.val()<0||offHr0.val()==""){allError.text("Problem with ON hour.. ON or OFF must be filled!!");allError.slideDown(150);$(this).attr("isok","0");return;}}if(offHr0.val()>=24||offHr0.val()<0||offHr0.val()==""){if(onHr0.val()>=24||onHr0.val()<0||onHr0.val()==""){allError.text("Problem with OFF hour..");allError.slideDown(150);$(this).attr("isok","0");return;}}if(onMin0.val()>=60||onMin0.val()<0){allError.text("Problem with ON minute..");allError.slideDown(150);$(this).attr("isok","0");return;}if(offMin0.val()>=60||offMin0.val()<0){allError.text("Problem with OFF minute..");allError.slideDown(150);$(this).attr("isok","0");return;}if(buttonOnce.attr("isonce")==0){if(onHr0.val()==""||offHr0.val()==""){allError.text("Please mention On Hour and Off Hour..");allError.slideDown(150);return;} allError.text("This alarm will switch ON "+ appliances[select0.children("option:selected").val()]+" at "+ Number(onHr0.val())+":"+ Number(onMin0.val())+" and switch it OFF at "+ Number(offHr0.val())+":"+ Number(offMin0.val())).css("color","green");allError.slideDown(150);}if(buttonOnce.attr("isonce")==1){if(onHr0.val()!=""){allError.text("This alarm will switch ON "+ appliances[select0.children("option:selected").val()]+" at "+ Number(onHr0.val())+":"+ Number(onMin0.val())+" and disable it after execution.").css("color","green");allError.slideDown(150);}else{allError.text("This alarm will switch OFF "+ appliances[select0.children("option:selected").val()]+" at "+ Number(offHr0.val())+":"+ Number(offMin0.val())+" and disable it after execution.").css("color","green");allError.slideDown(150);}} $(this).css({"background-color":"#ae1100",color:"white"}).attr("isok","1");},function(){$(this).css({"background-color":"#ebecf0",color:"#ae1100"});allError.slideUp(150);});addAlarm0.click(function(){let setTheAlarm;if(buttonOnce.attr("isonce")==1){if($(this).attr("isok")==1){let switchType=0;if(onHr0.val()!="")switchType=1;setTheAlarm="?shot="+ switchType+"&onHr="+ onHr0.val()+"&onMin="+ onMin0.val()+"&offHr="+ offHr0.val()+"&offMin="+ offMin0.val()+"&pin="+ select0.children("option:selected").val()+"&enable="+ enable0.attr("isenable");}}else if($(this).attr("isok")==1){setTheAlarm="?shot=2"+"&onHr="+ onHr0.val()+"&onMin="+ onMin0.val()+"&offHr="+ offHr0.val()+"&offMin="+ offMin0.val()+"&pin="+ select0.children("option:selected").val()+"&sun="+ buttonSun0.attr("ison")+"&mon="+ buttonMon0.attr("ison")+"&tue="+ buttonTue0.attr("ison")+"&wed="+ buttonWed0.attr("ison")+"&thu="+ buttonThu0.attr("ison")+"&fri="+ buttonFri0.attr("ison")+"&sat="+ buttonSat0.attr("ison")+"&enable="+ enable0.attr("isenable");} allError.slideDown();$.get("/setalarm"+setTheAlarm,function(){setTimeout(()=>window.location.reload(),1000);});});$("#myDate").hide();$("#showOnceInfo").hide();$.getJSON("/alarmjson",function(result){let alarmCount=1;let timeForClone=new Date();$.each(result,(i,field)=>{if(field.free==1){if(field.oneShot==0){}if(field.oneShot==1){} let myClon=$("#mainBody").clone().attr("id",i);let myHider=myClon.find("#hider0").attr("id",i+"hider");let newAlarmInfo=myClon.find("#alarmInfo");newAlarmInfo.attr("id",i+alarmInfo);let newAlarmAssist=myClon.find("#alarmAssist");newAlarmAssist.attr("id",i+"alarmAssist");let myAddAlarm=myClon.find("#addAlarm0").attr("id",i+"edit").text("Edit Alarm").css({color:"#babecc"});let myAllErr=myClon.find("#allErr").attr("id",i+"Err");myAllErr.hide();let myEnable=myClon.find("#enable0");let myDel=myClon.find("#buttonDel0").attr("id",i+"Del");let formEle=myClon.find("#formNum0").attr("id",i+"form");let once=myClon.find("#buttonOnce0").attr("id",i+"once");let myDate=myClon.find("#myDate").attr("id",i+"mydate");let myShowOnceInfo=myClon.find("#showOnceInfo").attr("id",i+"onceInfo");let dayButton=myClon.find(".unit").not(".special");let myDay=myClon.find("#day0").attr("id",i+"day");let myMonth=myClon.find("#month0").attr("id",i+"month");let myYear=myClon.find("#year0").attr("id",i+"year");let selectAppliance=myClon.find("#select0").attr("id",i+"app");selectAppliance.children("[value='"+2+"']").attr("selected","");selectAppliance.change(function(){let selectedApp=$(this).children("option:selected").val();});myClon.find("#buttonNum0").text(alarmCount);alarmCount++;let myOnHr=myClon.find("#onHr0");myOnHr.attr({id:i+"onHr",value:field.onHr});let myOnMin=myClon.find("#onMin0");myOnMin.attr({id:i+"onMin",value:field.onMin});let myOffHr=myClon.find("#offHr0").attr({id:i+"offHr",value:field.offHr});let myOffMin=myClon.find("#offMin0");myOffMin.attr({id:i+"offMin",value:field.offMin});let myMon=myClon.find("#buttonMon0");myMon.attr("id",i+"mon");if(field.mon==1){myMon.css({"background-color":"rgba(181, 219, 251, 0.4)"});myMon.attr("ison","1");} let myTue=myClon.find("#buttonTue0");myTue.attr("id",i+"tue");if(field.tue==1){myTue.css({"background-color":"rgba(181, 219, 251, 0.4)"});myTue.attr("ison","1");} let myWed=myClon.find("#buttonWed0");myWed.attr("id",i+"wed");if(field.wed==1){myWed.css({"background-color":"rgba(181, 219, 251, 0.4)"});myWed.attr("ison","1");} let myThu=myClon.find("#buttonThu0");myThu.attr("id",i+"thu");if(field.thu==1){myThu.css({"background-color":"rgba(181, 219, 251, 0.4)"});myThu.attr("ison","1");} let myFri=myClon.find("#buttonFri0");myFri.attr("id",i+"fri");if(field.fri==1){myFri.css({"background-color":"rgba(181, 219, 251, 0.4)"});myFri.attr("ison","1");} let mySat=myClon.find("#buttonSat0");mySat.attr("id",i+"sat");if(field.sat==1){mySat.css({"background-color":"rgba(181, 219, 251, 0.4)"});mySat.attr("ison","1");} let mySun=myClon.find("#buttonSun0");mySun.attr("id",i+"sun");if(field.sun==1){mySun.css({"background-color":"rgba(181, 219, 251, 0.4)"});mySun.attr("ison","1");} myEnable.attr("id",i+"enable");if(field.enable==1){myEnable.css({"background-color":"rgba(143, 235, 135, 0.4)"}).text("Enabled").attr("isenable","1");}if(field.enable==0){myEnable.css({"background-color":"rgba(143, 235, 135, 0.4)"}).text("Disabled").attr("isenable","0");} myEnable.click(function(){if($(this).attr("isenable")==1){$(this).css({"background-color":"#ebecf0"}).attr("isenable","0").text("Disable");myAddAlarm.css({color:"green"}).attr("isok","1").text("Disable Alarm!!");if(once.attr("isonce")==1){myHider.css({height:"480px"});} myHider.css({"z-index":"0"}).click(function(){myEnable.css({"background-color":"rgba(143, 235, 135, 0.4)"}).attr("isenable","1").text("Enabled");myAddAlarm.css({"background-color":"#ebecf0",color:"#babecc"}).attr("isok","0").text("Edit Alarm");myHider.css({"z-index":"-1",height:"420px"}).off();});return;}if($(this).attr("isenable")==0){$(this).css({"background-color":"#ebecf0"}).attr("isenable","1").text("Enable");myAddAlarm.css({color:"green"}).attr("isok","1").text("Enable Alarm!!");if(once.attr("isonce")==1){myHider.css({height:"480px"});} myHider.css({"z-index":"0"}).click(function(){myEnable.css({"background-color":"rgba(143, 235, 135, 0.4)"}).attr("isenable","0").text("Disabled");myAddAlarm.css({"background-color":"#ebecf0",color:"#babecc"}).attr("isok","0").text("Edit Alarm");myHider.css({"z-index":"-1",height:"420px"}).off();});}});myDel.click(function(){if($(this).attr("isdel")==0){$(this).css({"background-color":"#ebecf0"}).attr("isdel","1");myAddAlarm.css({color:"#ae1100",}).attr("isok","1").text("Delete Alarm!!!!");newAlarmAssist.text("");if(once.attr("isonce")==1){myHider.css({height:"480px"});} myHider.css({"z-index":"0"}).click(function(){myDel.css({"background-color":"#ec4a4a33"}).attr("isdel","0");myAddAlarm.css({"background-color":"#ebecf0",color:"#babecc",}).attr("isok","0").text("Edit Alarm");myHider.css({"z-index":"-1",height:"420px"}).off();});}});function validationKeyPress(){if(field.oneShot==2){if(once.attr("isonce")==1){if(myOnHr.val()!=""||myOffHr.val()!=""){if(myOffHr.val()!=""){if(myOnHr.val()>23||myOnHr.val()<0||isNaN(myOnHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOnMin.val()!=""){if(myOnMin.val()>59||myOnMin.val()<0||isNaN(myOnMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOffHr.val()!=""){if(myOffHr.val()>23||myOffHr.val()<0||isNaN(myOffHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOffMin.val()!=""){if(myOffMin.val()>59||myOffMin.val()<0||isNaN(myOffMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myDay.val()!=""){if(myDay.val()<1||myDay.val()>31||isNaN(myDay.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myMonth.val()!=""){if(myMonth.val()<1||myMonth.val()>12||isNaN(myMonth.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myYear.val()!=""){if(myYear.val()<timeForClone.getFullYear()||myYear.val()>2060||isNaN(myYear.val())||myYear.val().length!=4){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}} myAddAlarm.css({color:"#ae1100"}).attr("isok","1");return;}else{myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(once.attr("isonce")==0){if(myOnHr.val()==""||myOnHr.val()>23||myOnHr.val()<0||isNaN(myOnHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOnMin.val()==""||myOnMin.val()>59||myOnMin.val()<0||isNaN(myOnMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOffHr.val()==""||myOffHr.val()>23||myOffHr.val()<0||isNaN(myOffHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOffMin.val()==""||myOffMin.val()>59||myOffMin.val()<0||isNaN(myOffMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOnHr.val()!=field.onHr||myOnMin.val()!=field.onMin||myOffHr.val()!=field.offHr||myOffMin.val()!=field.offMin){myAddAlarm.css({color:"#ae1100"}).attr("isok","1");return;}else{myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}}if(field.oneShot==0||field.oneShot==1){if(once.attr("isonce")==0){if(myOnHr.val()==""||myOnHr.val()>23||myOnHr.val()<0||isNaN(myOnHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOnMin.val()==""||myOnMin.val()>59||myOnMin.val()<0||isNaN(myOnMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOffHr.val()==""||myOffHr.val()>23||myOffHr.val()<0||isNaN(myOffHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOffMin.val()==""||myOffMin.val()>59||myOffMin.val()<0||isNaN(myOffMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOnHr.val()!=field.onHr||myOnMin.val()!=field.onMin||myOffHr.val()!=field.offHr||myOffMin.val()!=field.offMin){myAddAlarm.css({color:"#ae1100"}).attr("isok","1");return;}else{myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOnHr.val()!=""&&isNaN(myOnHr.val())==false){if(myOnHr.val()>23||myOnHr.val()<0||isNaN(myOnHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOnMin.val()==""||myOnMin.val()>59||myOnMin.val()<0||isNaN(myOnMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myDay.val()!=""){if(myDay.val()<1||myDay.val()>31||isNaN(myDay.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myMonth.val()!=""){if(myMonth.val()<1||myMonth.val()>12||isNaN(myMonth.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myYear.val()!=""){if(myYear.val()<timeForClone.getFullYear()||myYear.val()>2060||isNaN(myYear.val())||myYear.val().length!=4){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOnHr.val()!=field.onHr||myOnMin.val()!=field.onMin||myDay.val()!=field.day||myMonth.val()!=field.month||myYear.val()!=field.year){myAddAlarm.css({color:"#ae1100"}).attr("isok","1");return;}else{myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOffHr.val!=""&&isNaN(myOffHr.val())==false){if(myOffHr.val()>23||myOffHr.val()<0||isNaN(myOffHr.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myOffMin.val()==""||myOffMin.val()>59||myOffMin.val()<0||isNaN(myOffMin.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}if(myDay.val()!=""){if(myDay.val()<1||myDay.val()>31||isNaN(myDay.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myMonth.val()!=""){if(myMonth.val()<1||myMonth.val()>12||isNaN(myMonth.val())){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myYear.val()!=""){if(myYear.val()<timeForClone.getFullYear()||myYear.val()>2060||isNaN(myYear.val())||myYear.val().length!=4){myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}if(myOffHr.val()!=field.offHr||myOffMin.val()!=field.offMin||myDay.val()!=field.day||myMonth.val()!=field.month||myYear.val()!=field.year){myAddAlarm.css({color:"#ae1100"}).attr("isok","1");return;}else{myAddAlarm.css({color:"#babecc"}).attr("isok","0");return;}}} myAddAlarm.css({color:"#babecc"}).attr("isok","0");} formEle.children("input").keyup(function(){validationKeyPress();});myDate.children("input").keyup(function(){validationKeyPress();});let butPressKeep=[];formEle.children("button[ison]").on({click:function(){let butId=$(this).attr("id").substr(6);if($(this).attr("ison")!=field[butId]){butPressKeep.pop(1);if(butPressKeep.length==0){$("#"+i+"edit").css({color:"#babecc"}).attr("isok","0");} return;} butPressKeep.push(1);$("#"+i+"edit").css({color:"#ae1100"}).attr("isok","1");},});let myManifest=myClon.find("#manifest").text("This alarm will switch on "+ appliances[selectAppliance.children("option:selected").val()]+" at "+ field.onHr+":"+ field.onMin+" and switch it off at "+ field.offHr+":"+ field.offMin);function toggelOnce(){if(once.attr("isonce")==0){once.css("background-color","hsla(64, 97%, 62%, 0.4)");myDate.slideDown(150);once.attr("isonce","1");myClon.find(".unit").not(".special").hide();myShowOnceInfo.fadeIn(150);return;} myShowOnceInfo.hide();dayButton.fadeIn(150);myDate.slideUp(150);once.attr("isonce","0").css("background-color","#ebecf0");} once.on("click",function(){toggelOnce();validationKeyPress();});myAddAlarm.hover(function(){if(selectAppliance.children("option:selected").val()=="option"){myAllErr.text("Select any appliance form the select button to apply changes..").css("color","#d47304");myAllErr.slideDown(150);return;}if($(this).attr("isok")==1){if(myEnable.attr("isenable")!=field.enable){$(this).css({"background-color":"green",color:"white",});return;}if(myDel.attr("isdel")==1){$(this).css({"background-color":"#ae1100",color:"white",});return;} $(this).css({"background-color":"#ae1100",color:"white",});}},function(){myAllErr.slideUp(150);if($(this).attr("isok")==1){if(once.attr("isonce")==1){}if(once.attr("isonce")==0){}if(myEnable.attr("isenable")!=field.enable){$(this).css({"background-color":"#ebecf0",color:"green",});return;} $(this).css({"background-color":"#ebecf0",color:"#ae1100",});return;} $(this).css({"background-color":"#ebecf0",color:"#babecc",});});myAddAlarm.click(function(){if(myDel.attr("isdel")==1||myEnable.attr("isenable")!=field.enable||$(this).attr("isok")==1){let setTheAlarm;if(myDel.attr("isdel")==1){setTheAlarm="?del=1&aID="+i.substr(5);}else if(myEnable.attr("isenable")!=field.enable){setTheAlarm="?enable="+ myEnable.attr("isenable")+"&aID="+ i.substr(5);}else if($(this).attr("isok")==1){if(selectAppliance.children("option:selected").val()=="option"){return;}if(once.attr("isonce")==1){if(myOffHr.val()!=""&&isNaN(myOffHr.val())==false){setTheAlarm="?shot=0";}if(myOnHr.val()!=""&&isNaN(myOnHr.val())==false){setTheAlarm="?shot=1";} setTheAlarm+="&onHr="+ myOnHr.val()+"&onMin="+ myOnMin.val()+"&offHr="+ myOffHr.val()+"&offMin="+ myOffMin.val()+"&pin="+ selectAppliance.children("option:selected").val()+"&sun="+ mySun.attr("ison")+"&mon="+ myMon.attr("ison")+"&tue="+ myTue.attr("ison")+"&wed="+ myWed.attr("ison")+"&thu="+ myThu.attr("ison")+"&fri="+ myFri.attr("ison")+"&sat="+ mySat.attr("ison")+"&aID="+ i.substr(5)+"&day="+ myDay.val()+"&month="+ myMonth.val()+"&year="+ myYear.val()+"&enable="+ myEnable.attr("isenable");}else{setTheAlarm="?shot=2"+"&onHr="+ myOnHr.val()+"&onMin="+ myOnMin.val()+"&offHr="+ myOffHr.val()+"&offMin="+ myOffMin.val()+"&pin="+ selectAppliance.children("option:selected").val()+"&sun="+ mySun.attr("ison")+"&mon="+ myMon.attr("ison")+"&tue="+ myTue.attr("ison")+"&wed="+ myWed.attr("ison")+"&thu="+ myThu.attr("ison")+"&fri="+ myFri.attr("ison")+"&sat="+ mySat.attr("ison")+"&aID="+ i.substr(5)+"&enable="+ myEnable.attr("isenable");}} console.log(setTheAlarm);$.get("/setalarm"+setTheAlarm,function(){setTimeout(()=>window.location.reload(),1000);});}});$("#mainBody").before(myClon);if(field.oneShot==0){toggelOnce();myOnHr.val("----");myOnMin.val("----");myDay.val(field.day);myMonth.val(field.month);myYear.val(field.year);myManifest.text("This alarm will switch OFF "+ appliances[selectAppliance.children("option:selected").val()]+" at "+ field.offHr+":"+ field.offMin+" on "+ field.day+"-"+ field.month+"-"+ field.year+" and will be disabled after execution.");}if(field.oneShot==1){toggelOnce();myOffHr.val("----");myOffMin.val("----");myDay.val(field.day);myMonth.val(field.month);myYear.val(field.year);myManifest.text("This alarm will switch ON "+ appliances[selectAppliance.children("option:selected").val()]+" at "+ field.onHr+":"+ field.onMin+" on "+ field.day+"-"+ field.month+"-"+ field.year+" and will be disabled after execution.");}}});$(".unit").not(".special").click(function(){if($(this).css("background-color")!="rgb(235,236,240)"){$(this).css({"background-color":"rgb(235,236,240)"});$(this).attr("ison","0");}else{$(this).css({"background-color":"rgba(181, 219, 251, 0.4)"});$(this).attr("ison","1");}});let myShowTime=$("<h2></h2>");myShowTime.attr({id:"showTime"}).css({color:"#d1ce0d","text-align":"center"});$("#addAlarm0").before(myShowTime);let dTime=$("#showTime");$.getJSON("/gettime",(data,status)=>{var myWeekDay=["omit","Sun","Mon","Tue","Wed","Thu","Fri","Sat",];let myMonth=["omit","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];let secIncre=data.sec;let minIncre=data.min;setInterval(()=>{if(secIncre==60){minIncre++;secIncre=0;}if(minIncre==60){window.location.reload();} let showTime=""+ myWeekDay[data.wDay]+" "+ myMonth[data.mon]+" "+ data.day+" "+ data.yr+" "+ data.hr+":"+ minIncre+":"+ secIncre+" (Local Time)";dTime.text(showTime);secIncre++;},1000);});});});</script></html>[m
[32m+[m[32m)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/alarms.h b/src/alarms.h[m
[1mnew file mode 100644[m
[1mindex 0000000..09aa971[m
[1m--- /dev/null[m
[1m+++ b/src/alarms.h[m
[36m@@ -0,0 +1,146 @@[m
[32m+[m[32m// ================================AlarmLOOP functions ================================[m
[32m+[m[32m// ====================================================================================[m
[32m+[m[32m// Following function repetes all the alarms arrays..[m
[32m+[m[32m// ‚îè‚îÅ‚îì‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚î≥‚îì  ‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚î£‚îÅ‚î´‚îÉ  ‚î£‚îÅ‚î´‚î£‚î≥‚îõ‚îÉ‚îÉ‚îÉ  ‚îÉ  ‚îÉ ‚îÉ‚îÉ ‚îÉ‚î£‚îÅ‚îõ[m
[32m+[m[32m// ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚ïπ ‚ïπ‚ïπ‚îó‚ï∏‚ïπ ‚ïπ  ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ‚ïπ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m// ---------------------------------------------------------------------------------------------------------[m
[32m+[m[32m// {"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,[m
[32m+[m[32m// "tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m// free,enable/disable,pinNo,onHr,onMin,offHr,offMin,sun,mon,tue,wed,thu,fri,sat,oneShot,day,month,year [18][m
[32m+[m[32m//  0/1      1/0,        0,   0,    0,    0,    0,    0,  1,  1,  1,  1,  1,  0,  0/1/2,  32,   13,  0  [18][m
[32m+[m[32m//   0        1          2    3      4     5    6     7   8   9   10  11  12  13   14     15    16   17 [18][m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32mvoid alarmLoop(int alarmOne[18])[m
[32m+[m[32m{[m
[32m+[m[32m    if (alarmOne[0] == 1 && alarmOne[1] == 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        if (alarmOne[14] == 2)[m
[32m+[m[32m        {[m
[32m+[m[32m            if (alarmOne[3] == hour() && alarmOne[4] == minute())[m
[32m+[m[32m            {[m
[32m+[m[32m                if (alarmOne[weekday() + 6] == 1)[m
[32m+[m[32m                {[m
[32m+[m[32m                    pinMode(alarmOne[2], OUTPUT);[m
[32m+[m[32m                    digitalWrite(alarmOne[2], LOW);[m
[32m+[m[32m                    return;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m            if (alarmOne[5] == hour() && alarmOne[6] == minute())[m
[32m+[m[32m            {[m
[32m+[m[32m                if (alarmOne[weekday() + 6] == 1)[m
[32m+[m[32m                {[m
[32m+[m[32m                    Serial.println("Executed off job");[m
[32m+[m[32m                    pinMode(alarmOne[2], OUTPUT);[m
[32m+[m[32m                    digitalWrite(alarmOne[2], HIGH);[m
[32m+[m[32m                    return;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (alarmOne[14] == 0)[m
[32m+[m[32m        {[m
[32m+[m
[32m+[m[32m            if (alarmOne[6] == minute() && alarmOne[5] == hour() && alarmOne[15] == day() && alarmOne[16] == month() && alarmOne[17] == year())[m
[32m+[m[32m            {[m
[32m+[m[32m                pinMode(alarmOne[2], OUTPUT);[m
[32m+[m[32m                digitalWrite(alarmOne[2], HIGH);[m
[32m+[m[32m                alarmOne[1] = 0;[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (alarmOne[14] == 1)[m
[32m+[m[32m        {[m
[32m+[m
[32m+[m[32m            if (alarmOne[4] == minute() && alarmOne[3] == hour() && alarmOne[15] == day() && alarmOne[16] == month() && alarmOne[17] == year())[m
[32m+[m[32m            {[m
[32m+[m[32m                pinMode(alarmOne[2], OUTPUT);[m
[32m+[m[32m                digitalWrite(alarmOne[2], LOW);[m
[32m+[m[32m                alarmOne[1] = 0;[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid startAlarm()[m
[32m+[m[32m{[m
[32m+[m[32m    for (int i = 0; i <= 9; i++)[m
[32m+[m[32m    {[m
[32m+[m[32m        alarmLoop(alarms[i]);[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ================================Alarmrecover functions =============================[m
[32m+[m[32m// ====================================================================================[m
[32m+[m[32m// Following function reads from the saved copy of alarms and put them again in their[m
[32m+[m[32m// respective int arrays...[m
[32m+[m[32m// for unintended poweroff it is safeguard..[m
[32m+[m[32m// ‚îè‚îÅ‚îì‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚î≥‚îì  ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì‚ïª ‚ïª‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚î£‚îÅ‚î´‚îÉ  ‚î£‚îÅ‚î´‚î£‚î≥‚îõ‚îÉ‚îÉ‚îÉ  ‚î£‚î≥‚îõ‚î£‚ï∏ ‚îÉ  ‚îÉ ‚îÉ‚îÉ‚îè‚îõ‚î£‚ï∏ ‚î£‚î≥‚îõ[m
[32m+[m[32m// ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚ïπ ‚ïπ‚ïπ‚îó‚ï∏‚ïπ ‚ïπ  ‚ïπ‚îó‚ï∏‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îõ ‚îó‚îÅ‚ï∏‚ïπ‚îó‚ï∏[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32mvoid alarmRecover()[m
[32m+[m[32m{[m
[32m+[m[32m    // Mount the fiel system..[m
[32m+[m[32m    if (LittleFS.begin())[m
[32m+[m[32m    {[m
[32m+[m[32m        // Open the directory..[m
[32m+[m[32m        Dir dir = LittleFS.openDir("/alarms");[m
[32m+[m
[32m+[m[32m        // Loop through all single files in the directory..[m
[32m+[m[32m        while (dir.next())[m
[32m+[m[32m        {[m
[32m+[m[32m            String fName = dir.fileName(); // Alarms name are like => alarm0, alarm1, alarm2 ..[m
[32m+[m[32m            char aNo = fName[5];           //will return number at this place = 0,1,2,3,4,5,6,7,8,9[m
[32m+[m[32m            int aNoInt = int(aNo) - 48;    //ascii 0 => 48 so.. 48-48=0[m
[32m+[m[32m            if (dir.fileSize())[m
[32m+[m[32m            {[m
[32m+[m[32m                File f = dir.openFile("r");[m
[32m+[m[32m                String alarmJson;[m
[32m+[m[32m                // loop through all the single character in the current file..[m
[32m+[m[32m                while (f.available())[m
[32m+[m[32m                {[m
[32m+[m[32m                    char alp = f.read();[m
[32m+[m[32m                    alarmJson.concat(alp);[m
[32m+[m[32m                }[m
[32m+[m[32m                f.close();[m
[32m+[m
[32m+[m[32m                // Creating json object of json text file..[m
[32m+[m[32m                // Sparing 256 bytes for the same in the memory for my doc array..[m
[32m+[m[32m                DynamicJsonDocument doc(512);[m
[32m+[m[32m                // Assigning the same in doc array..[m
[32m+[m[32m                // Values can be read using keys in the json file..[m
[32m+[m[32m                deserializeJson(doc, alarmJson);[m
[32m+[m
[32m+[m[32m                // if alarm is not free (means occupied = 1)[m
[32m+[m[32m                if (int(doc["free"]) == 1)[m
[32m+[m[32m                {[m
[32m+[m[32m                    alarms[aNoInt][0] = 1;[m
[32m+[m[32m                    alarms[aNoInt][1] = int(doc["enable"]);[m
[32m+[m[32m                    alarms[aNoInt][2] = int(doc["pin"]);[m
[32m+[m[32m                    alarms[aNoInt][3] = int(doc["onHr"]);[m
[32m+[m[32m                    alarms[aNoInt][4] = int(doc["onMin"]);[m
[32m+[m[32m                    alarms[aNoInt][5] = int(doc["offHr"]);[m
[32m+[m[32m                    alarms[aNoInt][6] = int(doc["offMin"]);[m
[32m+[m[32m                    alarms[aNoInt][7] = int(doc["sun"]);[m
[32m+[m[32m                    alarms[aNoInt][8] = int(doc["mon"]);[m
[32m+[m[32m                    alarms[aNoInt][9] = int(doc["tue"]);[m
[32m+[m[32m                    alarms[aNoInt][10] = int(doc["wed"]);[m
[32m+[m[32m                    alarms[aNoInt][11] = int(doc["thu"]);[m
[32m+[m[32m                    alarms[aNoInt][12] = int(doc["fri"]);[m
[32m+[m[32m                    alarms[aNoInt][13] = int(doc["sat"]);[m
[32m+[m[32m                    alarms[aNoInt][14] = int(doc["oneShot"]);[m
[32m+[m[32m                    alarms[aNoInt][15] = int(doc["day"]);[m
[32m+[m[32m                    alarms[aNoInt][16] = int(doc["month"]);[m
[32m+[m[32m                    alarms[aNoInt][17] = int(doc["year"]);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/css.h b/src/css.h[m
[1mnew file mode 100644[m
[1mindex 0000000..c439085[m
[1m--- /dev/null[m
[1m+++ b/src/css.h[m
[36m@@ -0,0 +1,107 @@[m
[32m+[m[32mconst char css[] PROGMEM = R"rawliteral([m
[32m+[m[32m     body,[m
[32m+[m[32m      html {[m
[32m+[m[32m        background-color: #e0e0e4;[m
[32m+[m[32m      }[m
[32m+[m[32m      body,[m
[32m+[m[32m      p,[m
[32m+[m[32m      input,[m
[32m+[m[32m      select,[m
[32m+[m[32m      textarea,[m
[32m+[m[32m      button {[m
[32m+[m[32m        font-family: "Montserrat", sans-serif;[m
[32m+[m[32m        letter-spacing: -0.2px;[m
[32m+[m[32m        font-size: 9px;[m
[32m+[m[32m      }[m
[32m+[m[32m      div,[m
[32m+[m[32m      p {[m
[32m+[m[32m        color: #babecc;[m
[32m+[m[32m        text-shadow: 1px 1px 1px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      form {[m
[32m+[m[32m        padding: 30px;[m
[32m+[m[32m        width: 320px;[m
[32m+[m[32m        margin: 0 auto;[m
[32m+[m[32m      }[m
[32m+[m[32m      .segment {[m
[32m+[m[32m        padding: 10px 0;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m      select,[m
[32m+[m[32m      button,[m
[32m+[m[32m      input {[m
[32m+[m[32m        border: 0;[m
[32m+[m[32m        outline: 0;[m
[32m+[m[32m        font-size: 16px;[m
[32m+[m[32m        border-radius: 320px;[m
[32m+[m[32m        padding: 16px;[m
[32m+[m[32m        background-color: #ebecf0;[m
[32m+[m[32m      }[m
[32m+[m[32m      input {[m
[32m+[m[32m        margin-right: 8px;[m
[32m+[m[32m        box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;[m
[32m+[m[32m        width: 100%;[m
[32m+[m[32m        box-sizing: border-box;[m
[32m+[m[32m        transition: all 0.2s ease-in-out;[m
[32m+[m[32m        appearance: none;[m
[32m+[m[32m        -webkit-appearance: none;[m
[32m+[m[32m      }[m
[32m+[m[32m      input:focus {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      button {[m
[32m+[m[32m        color: #61677c;[m
[32m+[m[32m        font-weight: bold;[m
[32m+[m[32m        box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m        transition: all 0.2s ease-in-out;[m
[32m+[m[32m        cursor: pointer;[m
[32m+[m[32m        font-weight: 600;[m
[32m+[m[32m      }[m
[32m+[m[32m      .red:active,[m
[32m+[m[32m      .unit:active {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m      button .icon {[m
[32m+[m[32m        margin-right: 8px;[m
[32m+[m[32m      }[m
[32m+[m[32m      button.unit {[m
[32m+[m[32m        border-radius: 50%;[m
[32m+[m[32m        line-height: 0;[m
[32m+[m[32m        width: 52px;[m
[32m+[m[32m        height: 52px;[m
[32m+[m[32m        display: inline-flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        align-items: center;[m
[32m+[m[32m        margin: 0 8px;[m
[32m+[m[32m        font-size: 19.2px;[m
[32m+[m[32m      }[m
[32m+[m[32m      button.unit .icon {[m
[32m+[m[32m        margin-right: 0;[m
[32m+[m[32m      }[m
[32m+[m[32m      select,[m
[32m+[m[32m      button.red {[m
[32m+[m[32m        display: block;[m
[32m+[m[32m        width: 100%;[m
[32m+[m[32m        color: #ae1100;[m
[32m+[m[32m      }[m
[32m+[m[32m      .input-group {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        align-items: center;[m
[32m+[m[32m        justify-content: flex-start;[m
[32m+[m[32m      }[m
[32m+[m[32m      .input-group label {[m
[32m+[m[32m        margin: 0;[m
[32m+[m[32m        flex: 1;[m
[32m+[m[32m      }[m
[32m+[m[32m      select {[m
[32m+[m[32m        width: 220px;[m
[32m+[m[32m        -webkit-appearance: none;[m
[32m+[m[32m        box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m        font-weight: 900;[m
[32m+[m[32m        cursor: pointer;[m
[32m+[m[32m      }[m
[32m+[m[32m      select:active {[m
[32m+[m[32m        box-shadow: inset 1px 1px 2px #babecc, inset -1px -1px 2px #fff;[m
[32m+[m[32m      }[m
[32m+[m[32m)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/html.h b/src/html.h[m
[1mdeleted file mode 100644[m
[1mindex 2ebd59b..0000000[m
[1m--- a/src/html.h[m
[1m+++ /dev/null[m
[36m@@ -1,179 +0,0 @@[m
[31m-const char index_html[] PROGMEM = R"rawliteral([m
[31m-<!DOCTYPE html>[m
[31m-<html lang="en">[m
[31m-  <head>[m
[31m-    <meta charset="UTF-8" />[m
[31m-    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[31m-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[31m-    <title>Wifi Settings..</title>[m
[31m-  </head>[m
[31m-  <body style="font-size: 16px">[m
[31m-    <div>[m
[31m-      <center>[m
[31m-        <h2>Wifi Settings..</h2>[m
[31m-        <fieldset style="width: 350px; border-radius: 8px">[m
[31m-          <br />[m
[31m-          <form[m
[31m-            method="GET"[m
[31m-            action="#"[m
[31m-            id="login-form"[m
[31m-            class="login-form"[m
[31m-            autocomplete="off"[m
[31m-            role="main"[m
[31m-          >[m
[31m-            <div>[m
[31m-              <label for="wifiname">Wifi Name* </label>[m
[31m-              <input[m
[31m-                type="text"[m
[31m-                class="text"[m
[31m-                name="wifiname"[m
[31m-                id="wifiname"[m
[31m-                placeholder="Wifi Name"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <label for="wifipass">Wifi Password*</label>[m
[31m-              <input[m
[31m-                type="password"[m
[31m-                class="text"[m
[31m-                name="wifipass"[m
[31m-                itemid="wifipass"[m
[31m-                id="wifipass"[m
[31m-                placeholder="Wifi Password"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <label for="hotname">Hotspot Name*</label>[m
[31m-              <input[m
[31m-                type="text"[m
[31m-                class="text"[m
[31m-                name="hotname"[m
[31m-                id="hotname"[m
[31m-                placeholder="Hotspot Name"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <label for="hotpass">Hotspot Password*</label>[m
[31m-              <input[m
[31m-                type="password"[m
[31m-                class="text"[m
[31m-                name="hotpass"[m
[31m-                id="hotpass"[m
[31m-                placeholder="Hotspot Password"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <label for="hotname">User Name*</label>[m
[31m-              <input[m
[31m-                type="text"[m
[31m-                class="text"[m
[31m-                name="username"[m
[31m-                id="username"[m
[31m-                placeholder="User Name"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <label for="lockpass">Lock Password*</label>[m
[31m-              <input[m
[31m-                type="password"[m
[31m-                class="text"[m
[31m-                name="lockpass"[m
[31m-                id="lockpass"[m
[31m-                placeholder="Lock Password"[m
[31m-                tabindex="1"[m
[31m-                required[m
[31m-              />[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <div>[m
[31m-              <span[m
[31m-                onclick="hidePass()"[m
[31m-                style="cursor: pointer; text-decoration: underline"[m
[31m-                >Show Passwords!![m
[31m-              </span>[m
[31m-            </div>[m
[31m-            <br />[m
[31m-            <input[m
[31m-              type="submit"[m
[31m-              name="submit"[m
[31m-              value="Save Settings"[m
[31m-              id="toSubmit"[m
[31m-            />[m
[31m-          </form>[m
[31m-          <br />[m
[31m-        </fieldset>[m
[31m-      </center>[m
[31m-    </div>[m
[31m-    <script>[m
[31m-      var myOBJ = %OBJ%;[m
[31m-      put = () => {[m
[31m-        let wifiName = document.getElementById("wifiname");[m
[31m-        wifiName.value = myOBJ.wifi;[m
[31m-[m
[31m-        let wifiPass = document.getElementById("wifipass");[m
[31m-        wifiPass.value = myOBJ.wifipw;[m
[31m-[m
[31m-        let hotName = document.getElementById("hotname");[m
[31m-        hotName.value = myOBJ.ap;[m
[31m-[m
[31m-        let hotPass = document.getElementById("hotpass");[m
[31m-        hotPass.value = myOBJ.appw;[m
[31m-[m
[31m-        let userName = document.getElementById("username");[m
[31m-        userName.value = myOBJ.user;[m
[31m-[m
[31m-        let lockPass = document.getElementById("lockpass");[m
[31m-        lockPass.value = myOBJ.lock;[m
[31m-      };[m
[31m-      put();[m
[31m-[m
[31m-      document.getElementById("toSubmit").addEventListener("click", (e) => {[m
[31m-        e.preventDefault();[m
[31m-        var confirmIt = confirm([m
[31m-          "You are one step back to change system settings. This process will reset your device!! Press OK to confirm..."[m
[31m-        );[m
[31m-        if (confirmIt === true) {[m
[31m-          let wifiName = document.getElementById("wifiname").value;[m
[31m-          let wifiPass = document.getElementById("wifipass").value;[m
[31m-          let hotName = document.getElementById("hotname").value;[m
[31m-          let hotPass = document.getElementById("hotpass").value;[m
[31m-          let userName = document.getElementById("username").value;[m
[31m-          let lockPass = document.getElementById("lockpass").value;[m
[31m-[m
[31m-          let myLink = `/changesettings?wifiname=${wifiName}&wifipass=${wifiPass}&hotname=${hotName}&hotpass=${hotPass}&lockpass=${lockPass}&user=${userName}&submit=save+settings#`;[m
[31m-[m
[31m-          var xhttp1 = new XMLHttpRequest();[m
[31m-          xhttp1.open("GET", myLink, true);[m
[31m-          xhttp1.send();[m
[31m-        }[m
[31m-      });[m
[31m-[m
[31m-      function hidePass() {[m
[31m-        let wifiPass = document.getElementById("wifipass");[m
[31m-        let hotPass = document.getElementById("hotpass");[m
[31m-        let lockPass = document.getElementById("lockpass");[m
[31m-[m
[31m-        wifiPass.type = "text";[m
[31m-        hotPass.type = "text";[m
[31m-        lockPass.type = "text";[m
[31m-        return;[m
[31m-      }[m
[31m-    </script>[m
[31m-  </body>[m
[31m-</html>[m
[31m-)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/jquery.h b/src/jquery.h[m
[1mnew file mode 100644[m
[1mindex 0000000..d4c4963[m
[1m--- /dev/null[m
[1m+++ b/src/jquery.h[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32mconst char jquery[] PROGMEM = R"rawliteral([m
[32m+[m
[32m+[m[32m/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */[m
[32m+[m[32m!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});[m
[32m+[m
[32m+[m[32m)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/main.cpp b/src/main.cpp[m
[1mindex 0d71009..1bf440e 100644[m
[1m--- a/src/main.cpp[m
[1m+++ b/src/main.cpp[m
[36m@@ -1,263 +1,73 @@[m
[32m+[m[32m// ‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì   ‚îè‚îÅ‚îì‚ïª ‚ïª‚ï∫‚î≥‚ï∏‚îè‚îÅ‚îì‚îè‚î≥‚îì‚îè‚îÅ‚îì‚ï∫‚î≥‚ï∏‚ïª‚îè‚îÅ‚îì‚îè‚îì‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚î£‚ï∏ ‚îó‚îÅ‚îì‚î£‚îÅ‚îõ‚î£‚îÅ‚î´‚îè‚îÅ‚îõ‚î£‚îÅ‚îì‚î£‚îÅ‚îì   ‚î£‚îÅ‚î´‚îÉ ‚îÉ ‚îÉ ‚îÉ ‚îÉ‚îÉ‚îÉ‚îÉ‚î£‚îÅ‚î´ ‚îÉ ‚îÉ‚îÉ ‚îÉ‚îÉ‚îó‚î´‚îó‚îÅ‚îì[m
[32m+[m[32m// ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚ïπ  ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ   ‚ïπ ‚ïπ‚îó‚îÅ‚îõ ‚ïπ ‚îó‚îÅ‚îõ‚ïπ ‚ïπ‚ïπ ‚ïπ ‚ïπ ‚ïπ‚îó‚îÅ‚îõ‚ïπ ‚ïπ‚îó‚îÅ‚îõ[m
[32m+[m
 // =================================== Include Section ==============================[m
 // ==================================================================================[m
[32m+[m[32m// ‚ïª‚îè‚îì‚ïª‚îè‚îÅ‚ï∏‚ïª  ‚ïª ‚ïª‚ï∫‚î≥‚îì‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îÉ‚îÉ‚îó‚î´‚îÉ  ‚îÉ  ‚îÉ ‚îÉ ‚îÉ‚îÉ‚î£‚ï∏ ‚îó‚îÅ‚îì[m
[32m+[m[32m// ‚ïπ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚ï∫‚îª‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m// Platform import[m
[32m+[m[32m// ----------------------------------------------[m
 #include <Arduino.h>[m
 [m
[32m+[m[32m// Dependencies import[m
[32m+[m[32m// ----------------------------------------------[m
 #include <ESP8266WiFi.h>[m
 #include <ArduinoJson.h>[m
 #include "ESPAsyncWebServer.h"[m
[31m-#include <ESPAsyncTCP.h>[m
[31m-#include <FS.h>[m
 #include <LittleFS.h>[m
[31m-#include "html.h"[m
[31m-[m
[31m-String ssid;[m
[31m-String *ptrssid = &ssid;[m
[31m-String ssidpw;[m
[31m-String *ptrssidpw = &ssidpw;[m
[31m-String ap;[m
[31m-String *ptrap = &ap;[m
[31m-String appw;[m
[31m-String *ptrappw = &appw;[m
[31m-String lock;[m
[31m-String *ptrlock;[m
[31m-String user;[m
[31m-[m
[31m-AsyncWebServer server(80);[m
[31m-[m
[31m-// =================================== Variable Section =============================[m
[31m-// ==================================================================================[m
[31m-[m
[31m-// =================================== Function Definations =============================[m
[31m-// ======================================================================================[m
[31m-[m
[31m-String processor(const String &var)[m
[31m-{[m
[31m-    String s = "";[m
[31m-    String myObj = s + "{wifi:'" + ssid + "',wifipw:'" + ssidpw + "',ap:'" + ap + "',appw:'" + appw + "',lock:'" + lock + "',user:'" + user + "'}";[m
[31m-    if (var == "OBJ")[m
[31m-        return myObj;[m
[31m-    return String();[m
[31m-}[m
[31m-[m
[31m-// -----------------------------------------------[m
[31m-// -----------------------------------------------[m
[31m-[m
[31m-// -----------------------------------------------[m
[31m-// -----------------------------------------------[m
[31m-[m
[31m-// -----------------------------------------------[m
[31m-// -----------------------------------------------[m
[31m-[m
[31m-void serverSetup()[m
[31m-{[m
[31m-    server.on("/settings", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[31m-        const char *http_username = user.c_str();[m
[31m-        const char *http_password = lock.c_str();[m
[31m-        if (!request->authenticate(http_username, http_password))[m
[31m-        {[m
[31m-            return request->requestAuthentication();[m
[31m-        };[m
[31m-[m
[31m-        AsyncWebServerResponse *response = request->beginResponse_P(200, "text/html", index_html, processor);[m
[31m-        response->addHeader("Server", "ESP Async Web Server");[m
[31m-        request->send(response);[m
[31m-    });[m
[31m-[m
[31m-    server.on("/changesettings", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[31m-        const char *http_username = user.c_str();[m
[31m-        const char *http_password = lock.c_str();[m
[31m-        if (!request->authenticate(http_username, http_password))[m
[31m-        {[m
[31m-            return request->requestAuthentication();[m
[31m-        }[m
[31m-[m
[31m-        String wifiname;[m
[31m-        String wifipass;[m
[31m-        String hotname;[m
[31m-        String hotpass;[m
[31m-        String lockpass;[m
[31m-        String username;[m
[31m-[m
[31m-        Serial.println(request->url());[m
[31m-[m
[31m-        wifiname = request->getParam("wifiname")->value();[m
[31m-        wifipass = request->getParam("wifipass")->value();[m
[31m-        hotname = request->getParam("hotname")->value();[m
[31m-        hotpass = request->getParam("hotpass")->value();[m
[31m-        lockpass = request->getParam("lockpass")->value();[m
[31m-        username = request->getParam("user")->value();[m
[31m-[m
[31m-        request->send(200, "text/plain", "OK");[m
[31m-[m
[31m-        LittleFS.begin();[m
[31m-[m
[31m-        String check = "b";[m
[31m-        if (ssid != wifiname)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/st", "w");[m
[31m-            data1.print(wifiname);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-        if (ssidpw != wifipass)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/stp", "w");[m
[31m-            data1.print(wifipass);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-[m
[31m-        if (ap != hotname)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/ap", "w");[m
[31m-            data1.print(hotname);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-        if (appw != hotpass)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/app", "w");[m
[31m-            data1.print(hotpass);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-        if (lock != lockpass)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/lock", "w");[m
[31m-            data1.print(lockpass);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-        if (user != username)[m
[31m-        {[m
[31m-            File data1 = LittleFS.open("/user", "w");[m
[31m-            data1.print(username);[m
[31m-            data1.close();[m
[31m-            check = "a";[m
[31m-        }[m
[31m-[m
[31m-        LittleFS.end();[m
[31m-[m
[31m-        if (check != "b")[m
[31m-        {[m
[31m-            delay(500);[m
[31m-            ESP.restart();[m
[31m-        }[m
[31m-    });[m
[31m-    server.begin();[m
[31m-}[m
[31m-[m
[31m-// =================================== Two main functions =============================[m
[32m+[m[32m#include <Time.h>[m
[32m+[m[32m#include <PubSubClient.h>[m
[32m+[m
[32m+[m[32m// #include <WiFiUdp.h>[m
[32m+[m
[32m+[m[32m// Own header files import[m
[32m+[m[32m// ----------------------------------------------[m
[32m+[m[32m#include "variables.h" //all variables and html preprocessors[m
[32m+[m[32m#include "jquery.h"    //jquery.js file hosted locally[m
[32m+[m[32m#include "css.h"[m
[32m+[m[32m#include "setTimeHtml.h"[m
[32m+[m[32m#include "wifiHtml.h" //wifi settings html file[m
[32m+[m[32m#include "alarmHomeHtml.h"[m
[32m+[m[32m#include "webServ.h"   // webserver setup[m
[32m+[m[32m#include "wifiSetup.h" //wifi setup[m
[32m+[m[32m#include "alarms.h"    //alarm setup[m
[32m+[m
[32m+[m[32m// ================================= Dear SETUP functions =============================[m
 // ====================================================================================[m
[31m-[m
[32m+[m[32m// Following is the setup function runs on reboot[m
[32m+[m[32m// ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚ï∫‚î≥‚ï∏‚ïª ‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îó‚îÅ‚îì‚î£‚ï∏  ‚îÉ ‚îÉ ‚îÉ‚î£‚îÅ‚îõ[m
[32m+[m[32m// ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏ ‚ïπ ‚îó‚îÅ‚îõ‚ïπ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
 void setup()[m
 {[m
[31m-    LittleFS.begin();[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-    File data1 = LittleFS.open("/st", "r");[m
[31m-    String getssid;[m
[31m-    while (data1.available())[m
[31m-    {[m
[31m-        char a = data1.read();[m
[31m-        getssid.concat(a);[m
[31m-    }[m
[31m-    data1.close();[m
[31m-    ssid = getssid;[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-    File data2 = LittleFS.open("/stp", "r");[m
[31m-    String getssidpw;[m
[31m-    while (data2.available())[m
[31m-    {[m
[31m-        char a = data2.read();[m
[31m-        getssidpw.concat(a);[m
[31m-    }[m
[31m-    data2.close();[m
[31m-    ssidpw = getssidpw;[m
[31m-[m
[31m-    // ----------------------------------------------[m
[31m-[m
[31m-    File data3 = LittleFS.open("/ap", "r");[m
[31m-    String getap;[m
[31m-    while (data3.available())[m
[31m-    {[m
[31m-        char a = data3.read();[m
[31m-        getap.concat(a);[m
[31m-    }[m
[31m-    data3.close();[m
[31m-    ap = getap;[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    File data4 = LittleFS.open("/app", "r");[m
[31m-    String getappw;[m
[31m-    while (data4.available())[m
[31m-    {[m
[31m-        char a = data4.read();[m
[31m-        getappw.concat(a);[m
[31m-    }[m
[31m-    data4.close();[m
[31m-    appw = getappw;[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    File data5 = LittleFS.open("/lock", "r");[m
[31m-    String getlock;[m
[31m-    while (data5.available())[m
[31m-    {[m
[31m-        char a = data5.read();[m
[31m-        getlock.concat(a);[m
[31m-    }[m
[31m-    data5.close();[m
[31m-    lock = getlock;[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    File data6 = LittleFS.open("/user", "r");[m
[31m-    String getuser;[m
[31m-    while (data6.available())[m
[31m-    {[m
[31m-        char a = data6.read();[m
[31m-        getuser.concat(a);[m
[31m-    }[m
[31m-    data6.close();[m
[31m-    user = getuser;[m
[31m-[m
[31m-    LittleFS.end();[m
[31m-[m
[31m-    // {wifi:'ssid', wifipw:'wifipw', ap:'ap', appw:'mypass'}[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    String s = "";[m
[31m-    String myObj = s + "{wifi:'" + ssid + "',wifipw:'" + ssidpw + "',ap:'" + ap + "',appw:'" + appw + "',lock:'" + lock + "',user:'" + user + "'}";[m
[31m-[m
[31m-    Serial.begin(9600);[m
[31m-    Serial.println(myObj);[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    WiFi.mode(WIFI_AP_STA);[m
[31m-    if (WiFi.status() != WL_CONNECTED)[m
[31m-    {[m
[31m-        WiFi.begin(ssid, ssidpw);[m
[31m-    }[m
[31m-    WiFi.softAP(ap, appw);[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    // -----------------------------------------------[m
[32m+[m[32m    setWifi();[m
[32m+[m[32m    serverSetup();[m
[32m+[m[32m    String nowTime = s + hour() + " : " + minute() + " : " + second() + " : " + weekday() + " -- " + day() + "/" + month() + "/" + year() + " ";[m
[32m+[m[32m    Serial.println(nowTime);[m
[32m+[m[32m    alarmRecover();[m
 [m
     // -----------------------------------------------[m
[31m-    // -----------------------------------------------[m
[31m-    // -----------------------------------------------[m
[31m-    // -----------------------------------------------[m
[31m-[m
[31m-    serverSetup();[m
 }[m
 [m
[32m+[m[32m// ================================== Dear LOOP functions =============================[m
[32m+[m[32m// ====================================================================================[m
[32m+[m[32m// Following function run again and again[m
[32m+[m[32m// ‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì   ‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì   ‚ïª  ‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îÉ  ‚îÉ ‚îÉ‚îÉ ‚îÉ‚î£‚îÅ‚îõ   ‚îÉ  ‚îÉ ‚îÉ‚îÉ ‚îÉ‚î£‚îÅ‚îõ   ‚îÉ  ‚îÉ ‚îÉ‚îÉ ‚îÉ‚î£‚îÅ‚îõ[m
[32m+[m[32m// ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ‚ïπ     ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ‚ïπ     ‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ‚îó‚îÅ‚îõ‚ïπ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
 void loop()[m
 {[m
[32m+[m
[32m+[m[32m    unsigned long currentTime = millis();[m
[32m+[m[32m    if ((currentTime - previouTime) >= eventTime)[m
[32m+[m[32m    {[m
[32m+[m[32m        startAlarm();[m
[32m+[m[32m        previouTime = currentTime;[m
[32m+[m[32m    }[m
 }[m
\ No newline at end of file[m
[1mdiff --git a/src/mqtt.h b/src/mqtt.h[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/src/setTimeHtml.h b/src/setTimeHtml.h[m
[1mnew file mode 100644[m
[1mindex 0000000..2549652[m
[1m--- /dev/null[m
[1m+++ b/src/setTimeHtml.h[m
[36m@@ -0,0 +1,354 @@[m
[32m+[m[32mconst char give_time[] PROGMEM = R"rawliteral([m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Time settings</title>[m
[32m+[m[32m    <link rel="stylesheet" href="/style.css" />[m
[32m+[m[32m    <script src="/jquery.js"></script>[m
[32m+[m[32m    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->[m
[32m+[m[32m    <style>[m
[32m+[m[32m      .middleIt {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body>[m
[32m+[m[32m    <div class="middleIt">[m
[32m+[m[32m      <div[m
[32m+[m[32m        class="middleIt"[m
[32m+[m[32m        style="[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m          border-radius: 20px;[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m        "[m
[32m+[m[32m      >[m
[32m+[m[32m        <div id="timeMain" style="width: 330px">[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <h1 style="font-size: 30px">Time Settings..</h1>[m
[32m+[m[32m          <h2>Your Browser's time</h2>[m
[32m+[m[32m          <h1 id="bTime">....</h1>[m
[32m+[m[32m          <h2>Your Device's time</h2>[m
[32m+[m[32m          <h1 id="deviceTime">....</h1>[m
[32m+[m
[32m+[m[32m          <button class="red" id="setBtime">Set Browser's time</button>[m
[32m+[m[32m          <h2 id="setInfo" style="color: #d1ce0d"></h2>[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Start----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <h1>OR set it maunally down here...</h1>[m
[32m+[m[32m          <h2>You can change any number of values here.</h2>[m
[32m+[m
[32m+[m[32m          <div id="myTime">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Hours"[m
[32m+[m[32m              id="hour"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Minutes"[m
[32m+[m[32m              id="minute"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Second"[m
[32m+[m[32m              id="second"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m[32m          <br /><br />[m
[32m+[m
[32m+[m[32m          <!-- Start----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <div id="myDate">[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Day"[m
[32m+[m[32m              id="day"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Month"[m
[32m+[m[32m              id="month"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              placeholder="Year"[m
[32m+[m[32m              id="year"[m
[32m+[m[32m              style="width: 96px; display: inline"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br /><br />[m
[32m+[m[32m          <!-- End ----------------------------------------------- -->[m
[32m+[m
[32m+[m[32m          <button class="red" id="setManually">OR Set Manually</button>[m
[32m+[m
[32m+[m[32m          <h1 style="color: #d1ce0d" id="dateWarn"></h1>[m
[32m+[m
[32m+[m[32m          <br /><br /><br />[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </body>[m
[32m+[m[32m  <script>[m
[32m+[m[32m    let time = {[m
[32m+[m[32m      this: "hi",[m
[32m+[m[32m    };[m
[32m+[m[32m    $(function () {[m
[32m+[m[32m      let dTime = $("#deviceTime");[m
[32m+[m[32m      let setInfo = $("#setInfo");[m
[32m+[m[32m      setInfo.hide();[m
[32m+[m[32m      let dw = $("#dateWarn");[m
[32m+[m[32m      dw.hide();[m
[32m+[m
[32m+[m[32m      $.getJSON("/gettime", (data, status) => {[m
[32m+[m[32m        var myWeekDay = [[m
[32m+[m[32m          "omit",[m
[32m+[m[32m          "Sun",[m
[32m+[m[32m          "Mon",[m
[32m+[m[32m          "Tue",[m
[32m+[m[32m          "Wed",[m
[32m+[m[32m          "Thu",[m
[32m+[m[32m          "Fri",[m
[32m+[m[32m          "Sat",[m
[32m+[m[32m        ];[m
[32m+[m[32m        let myMonth = [[m
[32m+[m[32m          "omit",[m
[32m+[m[32m          "Jan",[m
[32m+[m[32m          "Feb",[m
[32m+[m[32m          "Mar",[m
[32m+[m[32m          "Apr",[m
[32m+[m[32m          "May",[m
[32m+[m[32m          "Jun",[m
[32m+[m[32m          "Jul",[m
[32m+[m[32m          "Aug",[m
[32m+[m[32m          "Sep",[m
[32m+[m[32m          "Oct",[m
[32m+[m[32m          "Nov",[m
[32m+[m[32m          "Dec",[m
[32m+[m[32m        ];[m
[32m+[m[32m        let secIncre = data.sec;[m
[32m+[m[32m        let minIncre = data.min;[m
[32m+[m
[32m+[m[32m        setInterval(() => {[m
[32m+[m[32m          if (secIncre == 60) {[m
[32m+[m[32m            minIncre++;[m
[32m+[m[32m            secIncre = 0;[m
[32m+[m[32m          }[m
[32m+[m[32m          if (minIncre == 60) {[m
[32m+[m[32m            window.location.reload();[m
[32m+[m[32m          }[m
[32m+[m[32m          let showTime =[m
[32m+[m[32m            "" +[m
[32m+[m[32m            myWeekDay[data.wDay] +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            myMonth[data.mon] +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.day +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.yr +[m
[32m+[m[32m            " " +[m
[32m+[m[32m            data.hr +[m
[32m+[m[32m            ":" +[m
[32m+[m[32m            minIncre +[m
[32m+[m[32m            ":" +[m
[32m+[m[32m            secIncre +[m
[32m+[m[32m            " (Local Time)";[m
[32m+[m[32m          dTime.text(showTime);[m
[32m+[m[32m          secIncre++;[m
[32m+[m[32m        }, 1000);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      let bTime = $("#bTime");[m
[32m+[m[32m      setInterval(() => {[m
[32m+[m[32m        let myTime = new Date();[m
[32m+[m[32m        bTime.text(myTime);[m
[32m+[m[32m      }, 1000);[m
[32m+[m
[32m+[m[32m      let setBtime = $("#setBtime");[m
[32m+[m[32m      setBtime.hover([m
[32m+[m[32m        function () {[m
[32m+[m[32m          setInfo[m
[32m+[m[32m            .text([m
[32m+[m[32m              "This will set the device time and date to, as same as your browser's.."[m
[32m+[m[32m            )[m
[32m+[m[32m            .slideDown(150);[m
[32m+[m[32m          $(this).css({ "background-color": "#ae1100", color: "white" });[m
[32m+[m[32m        },[m
[32m+[m[32m        function () {[m
[32m+[m[32m          $(this).css({ "background-color": "#ebecf0", color: "#ae1100" });[m
[32m+[m[32m          setInfo.slideUp(150);[m
[32m+[m[32m        }[m
[32m+[m[32m      );[m
[32m+[m[32m      setBtime.click(function () {[m
[32m+[m[32m        let d = new Date();[m
[32m+[m[32m        let setTheDate =[m
[32m+[m[32m          "?h=" +[m
[32m+[m[32m          d.getHours() +[m
[32m+[m[32m          "&m=" +[m
[32m+[m[32m          d.getMinutes() +[m
[32m+[m[32m          "&s=" +[m
[32m+[m[32m          (d.getSeconds() + 2) +[m
[32m+[m[32m          "&d=" +[m
[32m+[m[32m          d.getDate() +[m
[32m+[m[32m          "&M=" +[m
[32m+[m[32m          (d.getMonth() + 1) +[m
[32m+[m[32m          "&y=" +[m
[32m+[m[32m          d.getFullYear();[m
[32m+[m
[32m+[m[32m        $.get("/settime" + setTheDate, function () {[m
[32m+[m[32m          setTimeout(() => {[m
[32m+[m[32m            window.location.reload();[m
[32m+[m[32m          }, 1500);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      let hr = $("#hour");[m
[32m+[m[32m      let min = $("#minute");[m
[32m+[m[32m      let sec = $("#second");[m
[32m+[m[32m      let day = $("#day");[m
[32m+[m[32m      let mon = $("#month");[m
[32m+[m[32m      let yr = $("#year");[m
[32m+[m
[32m+[m[32m      let sethr = -1;[m
[32m+[m[32m      let setmin = -1;[m
[32m+[m[32m      let setsec = -1;[m
[32m+[m[32m      let setday = -1;[m
[32m+[m[32m      let setmon = -1;[m
[32m+[m[32m      let setyr = -1;[m
[32m+[m
[32m+[m[32m      let setManStatus = false;[m
[32m+[m[32m      $("#setManually").hover([m
[32m+[m[32m        function () {[m
[32m+[m[32m          setManStatus = true;[m
[32m+[m[32m          if (hr.val()) {[m
[32m+[m[32m            if (hr.val() >= 24 || hr.val() < 0 || isNaN(hr.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Hour can be in range 0-23, (24hr-format)!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            sethr = hr.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (min.val()) {[m
[32m+[m[32m            if (min.val() >= 60 || min.val() < 0 || isNaN(hr.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Minutes can be in range 0-59!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setmin = min.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (sec.val()) {[m
[32m+[m[32m            if (sec.val() >= 60 || sec.val() < 0 || isNaN(sec.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with seconds!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setsec = sec.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (day.val()) {[m
[32m+[m[32m            if (day.val() >= 32 || day.val() < 1 || isNaN(day.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with day!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setday = day.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (mon.val()) {[m
[32m+[m[32m            if (mon.val() >= 13 || mon.val() < 1 || isNaN(mon.val())) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with month!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setmon = mon.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          if (yr.val()) {[m
[32m+[m[32m            // let myYr = yr.val();[m
[32m+[m[32m            if (isNaN(yr.val()) || yr.val().length != 4) {[m
[32m+[m[32m              setManStatus = false;[m
[32m+[m[32m              dw.text("Problem with year.. Mention full year!!");[m
[32m+[m[32m              dw.slideDown(150);[m
[32m+[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m            setyr = yr.val();[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          $(this).css({[m
[32m+[m[32m            "background-color": "#ae1100",[m
[32m+[m[32m            color: "white",[m
[32m+[m[32m          });[m
[32m+[m[32m        },[m
[32m+[m[32m        function () {[m
[32m+[m[32m          dw.text("");[m
[32m+[m[32m          dw.slideUp(150);[m
[32m+[m
[32m+[m[32m          $(this).css({ "background-color": "#ebecf0", color: "#ae1100" });[m
[32m+[m[32m        }[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      $("#setManually").click(function () {[m
[32m+[m[32m        if ([m
[32m+[m[32m          sethr == -1 &&[m
[32m+[m[32m          setmin == -1 &&[m
[32m+[m[32m          setsec == -1 &&[m
[32m+[m[32m          setday == -1 &&[m
[32m+[m[32m          setmon == -1 &&[m
[32m+[m[32m          setyr == -1[m
[32m+[m[32m        ) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        if (setManStatus == true) {[m
[32m+[m[32m          let setTheDate =[m
[32m+[m[32m            "?h=" +[m
[32m+[m[32m            sethr +[m
[32m+[m[32m            "&m=" +[m
[32m+[m[32m            setmin +[m
[32m+[m[32m            "&s=" +[m
[32m+[m[32m            setsec +[m
[32m+[m[32m            "&d=" +[m
[32m+[m[32m            setday +[m
[32m+[m[32m            "&M=" +[m
[32m+[m[32m            setmon +[m
[32m+[m[32m            "&y=" +[m
[32m+[m[32m            setyr;[m
[32m+[m
[32m+[m[32m          console.log(setTheDate);[m
[32m+[m[32m          $.get("/settime" + setTheDate, function () {[m
[32m+[m[32m            setTimeout(() => {[m
[32m+[m[32m              window.location.reload();[m
[32m+[m[32m            }, 1500);[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m  </script>[m
[32m+[m[32m</html>[m
[32m+[m
[32m+[m[32m)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/variables.h b/src/variables.h[m
[1mnew file mode 100644[m
[1mindex 0000000..73b4a45[m
[1m--- /dev/null[m
[1m+++ b/src/variables.h[m
[36m@@ -0,0 +1,95 @@[m
[32m+[m[32m// =================================== Variable Section =============================[m
[32m+[m[32m// ==================================================================================[m
[32m+[m[32m// ‚îè‚îÅ‚îì‚ïª  ‚ïª     ‚ïª ‚ïª‚îè‚îÅ‚îì‚îè‚îÅ‚îì‚ïª‚îè‚îÅ‚îì‚îè‚îì ‚ïª  ‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚î£‚îÅ‚î´‚îÉ  ‚îÉ     ‚îÉ‚îè‚îõ‚î£‚îÅ‚î´‚î£‚î≥‚îõ‚îÉ‚î£‚îÅ‚î´‚î£‚îª‚îì‚îÉ  ‚î£‚ï∏ ‚îó‚îÅ‚îì[m
[32m+[m[32m// ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏   ‚îó‚îõ ‚ïπ ‚ïπ‚ïπ‚îó‚ï∏‚ïπ‚ïπ ‚ïπ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚îó‚îÅ‚ï∏‚îó‚îÅ‚îõ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m// All variabes for wifi[m
[32m+[m[32m// ----------------------------------------------[m
[32m+[m[32mString s = "";[m
[32m+[m[32mString ssid;[m
[32m+[m[32mString *ptrssid = &ssid;[m
[32m+[m[32mString ssidpw;[m
[32m+[m[32mString *ptrssidpw = &ssidpw;[m
[32m+[m[32mString ap;[m
[32m+[m[32mString *ptrap = &ap;[m
[32m+[m[32mString appw;[m
[32m+[m[32mString *ptrappw = &appw;[m
[32m+[m[32mString lock;[m
[32m+[m[32mString *ptrlock;[m
[32m+[m[32mString user;[m
[32m+[m
[32m+[m[32m// All variables for alarms[m
[32m+[m[32m// ----------------------------------------------[m
[32m+[m[32mvoid startAlarm();[m
[32m+[m[32mvoid alarmLoop(int alarmOne[18]);[m
[32m+[m[32mvoid alarmRecover();[m
[32m+[m
[32m+[m[32m// ---------------------------------------------------------------------------------------------------------[m
[32m+[m[32m// {"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,[m
[32m+[m[32m// "tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m// free,enable/disable,pinNo,onHr,onMin,offHr,offMin,sun,mon,tue,wed,thu,fri,sat,oneShot,day,month,year [18][m
[32m+[m[32m//  0/1      1/0,        0,   0,    0,    0,    0,    0,  1,  1,  1,  1,  1,  0,  0/1/2,  32,   13,  0  [18][m
[32m+[m[32m//   0        1          2    3      4     5    6     7   8   9   10  11  12  13   14     15    16   17 [18][m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32mint alarms[10][18] = {[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0},[m
[32m+[m[32m    {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0}};[m
[32m+[m
[32m+[m[32mconst int demoAlarm[18] = {0, 0, 50, 25, 61, 25, 61, 0, 0, 0, 0, 0, 0, 0, 2, 32, 13, 0};[m
[32m+[m
[32m+[m[32m#define LED 2 //Define blinking LED pin[m
[32m+[m
[32m+[m[32munsigned long previouTime = 2000;[m
[32m+[m[32munsigned long eventTime = 30000;[m
[32m+[m
[32m+[m[32m// ============================ Initilizations ======================================[m
[32m+[m[32m// ==================================================================================[m
[32m+[m[32m// Following is server initialization[m
[32m+[m[32m// ‚ïª‚îè‚îì‚ïª‚ïª‚ï∫‚î≥‚ï∏‚ïª‚ïª  ‚ïª‚ï∫‚îÅ‚îì‚îè‚îÅ‚îì‚ï∫‚î≥‚ï∏‚ïª‚îè‚îÅ‚îì‚îè‚îì‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îÉ‚îÉ‚îó‚î´‚îÉ ‚îÉ ‚îÉ‚îÉ  ‚îÉ‚îè‚îÅ‚îõ‚î£‚îÅ‚î´ ‚îÉ ‚îÉ‚îÉ ‚îÉ‚îÉ‚îó‚î´‚îó‚îÅ‚îì[m
[32m+[m[32m// ‚ïπ‚ïπ ‚ïπ‚ïπ ‚ïπ ‚ïπ‚îó‚îÅ‚ï∏‚ïπ‚îó‚îÅ‚ï∏‚ïπ ‚ïπ ‚ïπ ‚ïπ‚îó‚îÅ‚îõ‚ïπ ‚ïπ‚îó‚îÅ‚îõ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32mAsyncWebServer server(80);[m
[32m+[m
[32m+[m[32m// Following function processes the output html going to be given to the web client.[m
[32m+[m[32m// It replaces the templet word with specified one[m
[32m+[m[32m// ----------------------------------------------[m
[32m+[m[32mString processor(const String &var)[m
[32m+[m[32m{[m
[32m+[m[32m    String s = "";[m
[32m+[m[32m    String myObj = s + "{wifi:\"" + ssid + "\",wifipw:\"" + ssidpw + "\",ap:\"" + ap + "\",appw:\"" + appw + "\",lock:\"" + lock + "\",user:\"" + user + "\"}";[m
[32m+[m[32m    if (var == "OBJ")[m
[32m+[m[32m        return myObj;[m
[32m+[m[32m    return String();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mString sendAlarms()[m
[32m+[m[32m{[m
[32m+[m[32m    String thisAlarm = "{";[m
[32m+[m[32m    for (int i = 0; i <= 9; i++)[m
[32m+[m[32m    {[m
[32m+[m[32m        String myAlarm = s + "\"alarm" + i + "\"" + ":" + "{\"free\":" + alarms[i][0] + ",\"enable\":" + alarms[i][1] + ",\"pin\":" + alarms[i][2] + ",\"onHr\":" + alarms[i][3] + ",\"onMin\":" + alarms[i][4] + ",\"offHr\":" + alarms[i][5] + ",\"offMin\":" + alarms[i][6] + ",\"sun\":" + alarms[i][7] + ",\"mon\":" + alarms[i][8] + ",\"tue\":" + alarms[i][9] + ",\"wed\":" + alarms[i][10] + ",\"thu\":" + alarms[i][11] + ",\"fri\":" + alarms[i][12] + ",\"sat\":" + alarms[i][13] + ",\"oneShot\":" + alarms[i][14] + ",\"day\":" + alarms[i][15] + ",\"month\":" + alarms[i][16] + ",\"year\":" + alarms[i][17] + "},";[m
[32m+[m[32m        thisAlarm.concat(myAlarm);[m
[32m+[m[32m    }[m
[32m+[m[32m    String newString = thisAlarm.substring(0, thisAlarm.length() - 1);[m
[32m+[m[32m    newString.concat("}");[m
[32m+[m[32m    return newString;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mString sendTime()[m
[32m+[m[32m{[m
[32m+[m[32m    String thisTime = s + "{ \"hr\" : \"" + hour() + "\", \"min\" : \"" + minute() + "\", \"sec\" : \"" + second() + "\", \"wDay\" : \"" + weekday() + "\", \"day\" : \"" + day() + "\", \"mon\" : \"" + month() + "\", \"yr\" : \"" + year() + "\"}";[m
[32m+[m[32m    return thisTime;[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/webServ.h b/src/webServ.h[m
[1mnew file mode 100644[m
[1mindex 0000000..bd891fc[m
[1m--- /dev/null[m
[1m+++ b/src/webServ.h[m
[36m@@ -0,0 +1,500 @@[m
[32m+[m
[32m+[m[32m// =================================== Server setup =================================[m
[32m+[m[32m// ==================================================================================[m
[32m+[m[32m// Following is the setup fonction for web server to start service[m
[32m+[m[32m// ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì‚ïª ‚ïª‚îè‚îÅ‚ï∏‚îè‚îÅ‚îì   ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚ï∫‚î≥‚ï∏‚ïª ‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îó‚îÅ‚îì‚î£‚ï∏ ‚î£‚î≥‚îõ‚îÉ‚îè‚îõ‚î£‚ï∏ ‚î£‚î≥‚îõ   ‚îó‚îÅ‚îì‚î£‚ï∏  ‚îÉ ‚îÉ ‚îÉ‚î£‚îÅ‚îõ[m
[32m+[m[32m// ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏‚ïπ‚îó‚ï∏‚îó‚îõ ‚îó‚îÅ‚ï∏‚ïπ‚îó‚ï∏   ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏ ‚ïπ ‚îó‚îÅ‚îõ‚ïπ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m// Function for writting into memory..[m
[32m+[m[32mint alarmMemWriter(int myIndexer[18], int aID = -1)[m
[32m+[m[32m{[m
[32m+[m[32m    // ---------------------------------------------------------------------------------------------------------[m
[32m+[m[32m    // {"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,[m
[32m+[m[32m    // "tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
[32m+[m[32m    // ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m    // free,enable/disable,pinNo,onHr,onMin,offHr,offMin,sun,mon,tue,wed,thu,fri,sat,oneShot,day,month,year [18][m
[32m+[m[32m    //  0/1      1/0,        0,   0,    0,    0,    0,    0,  1,  1,  1,  1,  1,  0,  0/1/2,  32,   13,  0  [18][m
[32m+[m[32m    //   0        1          2    3      4     5    6     7   8   9   10  11  12  13   14     15    16   17 [18][m
[32m+[m[32m    // ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m    if (myIndexer[0] < 0 || myIndexer[0] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[0] = 1;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[2] > 2)[m
[32m+[m[32m    {[m
[32m+[m[32m        return 1;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[3] >= 24 && myIndexer[3] < 0)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[3] = 25;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[4] >= 60 && myIndexer[4] < 0)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[4] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[5] >= 24 && myIndexer[5] < 0)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[5] = 25;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[6] >= 60 && myIndexer[6] < 0)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[6] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[7] < 0 || myIndexer[7] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[7] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[8] < 0 || myIndexer[8] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[8] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[9] < 0 || myIndexer[9] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[9] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[10] < 0 || myIndexer[10] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[10] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[11] < 0 || myIndexer[11] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[11] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[12] < 0 || myIndexer[12] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[12] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[13] < 0 || myIndexer[13] > 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[13] = 0;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[14] < 0 || myIndexer[14] > 2)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[14] = 2;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[15] > 31 || myIndexer[15] < 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[15] = day();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[16] > 12 || myIndexer[16] < 1)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[16] = month();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (myIndexer[17] < year() || myIndexer[17] > 2060)[m
[32m+[m[32m    {[m
[32m+[m[32m        myIndexer[17] = year();[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    for (int i = 0; i <= 10; i++)[m
[32m+[m[32m    {[m
[32m+[m[32m        if (alarms[i][0] == 0) //if alarms[i][1]=0 means its free to use..[m
[32m+[m[32m        {[m
[32m+[m
[32m+[m[32m            if (aID != -1)[m
[32m+[m[32m            {[m
[32m+[m[32m                i = aID;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (i == 10)[m
[32m+[m[32m            {[m
[32m+[m[32m                //Shold only allow to 0-9 not more...[m
[32m+[m[32m                return 1;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            alarms[i][0] = 1;[m
[32m+[m[32m            alarms[i][1] = myIndexer[1];[m
[32m+[m[32m            alarms[i][2] = myIndexer[2];[m
[32m+[m[32m            alarms[i][3] = myIndexer[3];[m
[32m+[m[32m            alarms[i][4] = myIndexer[4];[m
[32m+[m[32m            alarms[i][5] = myIndexer[5];[m
[32m+[m[32m            alarms[i][6] = myIndexer[6];[m
[32m+[m[32m            alarms[i][7] = myIndexer[7];[m
[32m+[m[32m            alarms[i][8] = myIndexer[8];[m
[32m+[m[32m            alarms[i][9] = myIndexer[9];[m
[32m+[m[32m            alarms[i][10] = myIndexer[10];[m
[32m+[m[32m            alarms[i][11] = myIndexer[11];[m
[32m+[m[32m            alarms[i][12] = myIndexer[12];[m
[32m+[m[32m            alarms[i][13] = myIndexer[13];[m
[32m+[m[32m            alarms[i][14] = myIndexer[14];[m
[32m+[m[32m            alarms[i][15] = myIndexer[15];[m
[32m+[m[32m            alarms[i][16] = myIndexer[16];[m
[32m+[m[32m            alarms[i][17] = myIndexer[17];[m
[32m+[m
[32m+[m[32m            String myAlarm = s + "{\"free\":" + 1 + ",\"enable\":" + alarms[i][1] + ",\"pin\":" + alarms[i][2] + ",\"onHr\":" + alarms[i][3] + ",\"onMin\":" + alarms[i][4] + ",\"offHr\":" + alarms[i][5] + ",\"offMin\":" + alarms[i][6] + ",\"sun\":" + alarms[i][7] + ",\"mon\":" + alarms[i][8] + ",\"tue\":" + alarms[i][9] + ",\"wed\":" + alarms[i][10] + ",\"thu\":" + alarms[i][11] + ",\"fri\":" + alarms[i][12] + ",\"sat\":" + alarms[i][13] + ",\"oneShot\":" + alarms[i][14] + ",\"day\":" + alarms[i][15] + ",\"month\":" + alarms[i][16] + ",\"year\":" + alarms[i][17] + "}";[m
[32m+[m
[32m+[m[32m            if (LittleFS.begin())[m
[32m+[m[32m            {[m
[32m+[m[32m                File wAlarm = LittleFS.open("/alarms/alarm" + String(i), "w");[m
[32m+[m[32m                wAlarm.print(myAlarm);[m
[32m+[m[32m                wAlarm.close();[m
[32m+[m[32m                LittleFS.end();[m
[32m+[m[32m                return 0;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m    return 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m//This function write into the time...[m
[32m+[m[32mint timeWriter(int s, int h, int m, int d, int M, int y)[m
[32m+[m[32m{[m
[32m+[m[32m    //This function is independent of any arduino program, JUST #include time.h[m
[32m+[m[32m    if (s == -1 && h == -1 && m == -1 && d == -1 && M == -1 && y == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        return 1;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (s == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        s = second();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (h == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        h = hour();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (m == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        m = minute();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (d == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        d = day();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (M == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        M = month();[m
[32m+[m[32m    }[m
[32m+[m[32m    if (y == -1)[m
[32m+[m[32m    {[m
[32m+[m[32m        y = year();[m
[32m+[m[32m    }[m
[32m+[m[32m    setTime(h, m, s, d, M, y);[m
[32m+[m[32m    return 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid serverSetup()[m
[32m+[m[32m{[m
[32m+[m[32m    server.on("/test", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        String sendIt;[m
[32m+[m[32m        String thisSend;[m
[32m+[m[32m        if (request->getParam("t"))[m
[32m+[m[32m        {[m
[32m+[m[32m            sendIt = request->getParam("t")->value();[m
[32m+[m[32m            int mysendIt = sendIt.toInt();[m
[32m+[m[32m            thisSend = String(mysendIt);[m
[32m+[m[32m            Serial.println(mysendIt);[m
[32m+[m[32m            Serial.println(thisSend);[m
[32m+[m[32m        }[m
[32m+[m[32m        request->send(200, "text/plain", sendIt + "  " + thisSend);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    //style css hosting[m
[32m+[m[32m    server.on("/style.css", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        request->send_P(200, "text/css", css);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // Listening on the path settings for wifi configuratios[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.on("/settings", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        const char *http_username = user.c_str();[m
[32m+[m[32m        const char *http_password = lock.c_str();[m
[32m+[m[32m        if (!request->authenticate(http_username, http_password))[m
[32m+[m[32m        {[m
[32m+[m[32m            return request->requestAuthentication();[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        AsyncWebServerResponse *response = request->beginResponse_P(200, "text/html", index_html, processor);[m
[32m+[m[32m        response->addHeader("Server", "ESP Async Web Server");[m
[32m+[m[32m        request->send(response);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // Lisnening for any change on time..[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.on("/settime", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        if (request->getParam("h") &&[m
[32m+[m[32m            request->getParam("m") &&[m
[32m+[m[32m            request->getParam("d") &&[m
[32m+[m[32m            request->getParam("M") &&[m
[32m+[m[32m            request->getParam("y") &&[m
[32m+[m[32m            request->getParam("s"))[m
[32m+[m[32m        {[m
[32m+[m
[32m+[m[32m            int s = (request->getParam("s")->value()).toInt();[m
[32m+[m[32m            int h = (request->getParam("h")->value()).toInt();[m
[32m+[m[32m            int m = (request->getParam("m")->value()).toInt();[m
[32m+[m[32m            int d = (request->getParam("d")->value()).toInt();[m
[32m+[m[32m            int M = (request->getParam("M")->value()).toInt();[m
[32m+[m[32m            int y = (request->getParam("y")->value()).toInt();[m
[32m+[m
[32m+[m[32m            int tSetStatus = timeWriter(s, h, m, d, M, y);[m
[32m+[m
[32m+[m[32m            if (tSetStatus == 1)[m
[32m+[m[32m            {[m
[32m+[m[32m                request->send(200, "text/plain", "Not in proper format!!");[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m            request->send(200, "text/plain", "OK");[m
[32m+[m[32m            return;[m
[32m+[m[32m        }[m
[32m+[m[32m        request->send(200, "text/plain", "Not in proper format!!");[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    server.on("/gettime", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        AsyncWebServerResponse *response = request->beginResponse(200, "text/json", sendTime().c_str());[m
[32m+[m[32m        response->addHeader("Access-Control-Allow-Origin", "*");[m
[32m+[m[32m        response->addHeader("Server", "Vishwakarma home automation");[m
[32m+[m[32m        request->send(response);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // for alarm editing[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.on("/alarm", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        request->send_P(200, "text/html", alarmHome_html);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    server.on("/alarmjson", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        AsyncWebServerResponse *response = request->beginResponse(200, "text/json", sendAlarms().c_str());[m
[32m+[m[32m        response->addHeader("Access-Control-Allow-Origin", "*");[m
[32m+[m[32m        response->addHeader("Server", "Vishwakarma home automation");[m
[32m+[m[32m        request->send(response);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    //Jquery hosting..[m
[32m+[m[32m    server.on("/jquery.js", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        request->send_P(200, "text/plain", jquery);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // Listening for any alarm set up on this path..[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.on("/setalarm", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        // Evaluate oneShot(0,1,2) and take decision[m
[32m+[m[32m        // ----------------------------------------------[m
[32m+[m[32m        if (request->getParam("shot"))[m
[32m+[m[32m        {[m
[32m+[m[32m            //Creating new arry and copying demoAlarm into it..[m
[32m+[m[32m            int myNewAlarm[18];[m
[32m+[m[32m            for (int i = 0; i < 18; i++)[m
[32m+[m[32m            {[m
[32m+[m[32m                myNewAlarm[i] = demoAlarm[i];[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            char a = 'b';[m
[32m+[m
[32m+[m[32m            // ---------------------------------------------------------------------------------------------------------[m
[32m+[m[32m            // {"free":0,"enable":0,"pin":50,"onHr":25,"onMin":61,"offHr":25,"offMin":61,"sun":0,"mon":0,[m
[32m+[m[32m            // "tue":0,"wed":0,"thu":0,"fri":0,"sat":0,"oneShot":2,"day":32,"month":13,"year":0}[m
[32m+[m[32m            // ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32m            // free,enable/disable,pinNo,onHr,onMin,offHr,offMin,sun,mon,tue,wed,thu,fri,sat,oneShot,day,month,year [18][m
[32m+[m[32m            //  0/1      1/0,        0,   0,    0,    0,    0,    0,  1,  1,  1,  1,  1,  0,  0/1/2,  32,   13,  0  [18][m
[32m+[m[32m            //   0        1          2    3      4     5    6     7   8   9   10  11  12  13   14     15    16   17 [18][m
[32m+[m[32m            // ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m
[32m+[m[32m            request->getParam("enable") ? myNewAlarm[1] = (request->getParam("enable")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("pin") ? myNewAlarm[2] = (request->getParam("pin")->value()).toInt() : a = 'b';[m
[32m+[m[32m            request->getParam("onHr") ? myNewAlarm[3] = (request->getParam("onHr")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("onMin") ? myNewAlarm[4] = (request->getParam("onMin")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("offHr") ? myNewAlarm[5] = (request->getParam("offHr")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("offMin") ? myNewAlarm[6] = (request->getParam("offMin")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("sun") ? myNewAlarm[7] = (request->getParam("sun")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("mon") ? myNewAlarm[8] = (request->getParam("mon")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("tue") ? myNewAlarm[9] = (request->getParam("tue")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("wed") ? myNewAlarm[10] = (request->getParam("wed")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("thu") ? myNewAlarm[11] = (request->getParam("thu")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("fri") ? myNewAlarm[12] = (request->getParam("fri")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("sat") ? myNewAlarm[13] = (request->getParam("sat")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("shot") ? myNewAlarm[14] = (request->getParam("shot")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("day") ? myNewAlarm[15] = (request->getParam("day")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("month") ? myNewAlarm[16] = (request->getParam("month")->value()).toInt() : a = 'a';[m
[32m+[m[32m            request->getParam("year") ? myNewAlarm[17] = (request->getParam("year")->value()).toInt() : a = 'a';[m
[32m+[m
[32m+[m[32m            int aID = -1;[m
[32m+[m[32m            if (request->getParam("aID"))[m
[32m+[m[32m            {[m
[32m+[m[32m                aID = (request->getParam("aID")->value()).toInt();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            //Sending the generated Alarm array for checking and writing into memory[m
[32m+[m[32m            int gotStatus = alarmMemWriter(myNewAlarm, aID);[m
[32m+[m
[32m+[m[32m            if (gotStatus == 1)[m
[32m+[m[32m            {[m
[32m+[m[32m                request->send(200, "text/plain", "Failed");[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m            request->send(200, "text/plain", "Done");[m
[32m+[m[32m            return;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // If del is set in the query with alarm index number (aID), it will delete the alarm[aID][m
[32m+[m[32m        // ----------------------------------------------[m
[32m+[m[32m        if (request->getParam("del") && request->getParam("aID"))[m
[32m+[m[32m        {[m
[32m+[m[32m            int aID = (request->getParam("aID")->value()).toInt();[m
[32m+[m
[32m+[m[32m            if (alarms[aID][0] == 1)[m
[32m+[m[32m            {[m
[32m+[m[32m                alarms[aID][0] = 0;[m
[32m+[m
[32m+[m[32m                String myAlarm = s + "{\"free\":" + 0 + ",\"enable\":" + 0 + ",\"pin\":" + 50 + ",\"onHr\":" + 25 + ",\"onMin\":" + 61 + ",\"offHr\":" + 25 + ",\"offMin\":" + 61 + ",\"sun\":" + 0 + ",\"mon\":" + 0 + ",\"tue\":" + 0 + ",\"wed\":" + 0 + ",\"thu\":" + 0 + ",\"fri\":" + 0 + ",\"sat\":" + 0 + ",\"oneShot\":" + 2 + ",\"day\":" + 32 + ",\"month\":" + 13 + ",\"year\":" + 0 + "}";[m
[32m+[m
[32m+[m[32m                if (LittleFS.begin())[m
[32m+[m[32m                {[m
[32m+[m[32m                    File wAlarm = LittleFS.open("/alarms/alarm" + String(aID), "w");[m
[32m+[m[32m                    wAlarm.print(myAlarm);[m
[32m+[m[32m                    wAlarm.close();[m
[32m+[m[32m                    LittleFS.end();[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                request->send(200, "text/plain", "deleted");[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m            request->send(200, "text/plain", "invalid");[m
[32m+[m[32m            return;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // If enable is set in the query with alarm index number (aID), it will enable/disable the alarm[aID][m
[32m+[m[32m        // ----------------------------------------------[m
[32m+[m[32m        if (request->getParam("enable") && request->getParam("aID"))[m
[32m+[m[32m        {[m
[32m+[m[32m            int aID = (request->getParam("aID")->value()).toInt();[m
[32m+[m[32m            int ena = (request->getParam("enable")->value()).toInt();[m
[32m+[m
[32m+[m[32m            // check enable parameter....[m
[32m+[m[32m            if (ena != 0)[m
[32m+[m[32m            {[m
[32m+[m[32m                if (ena != 1)[m
[32m+[m[32m                {[m
[32m+[m[32m                    request->send(200, "text/plain", "invalid");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            //Check alarms[aId] free status[m
[32m+[m[32m            if (alarms[aID][0] == 1)[m
[32m+[m[32m            {[m
[32m+[m[32m                //If enable is not same as the previous one, update..[m
[32m+[m[32m                if (alarms[aID][1] != ena)[m
[32m+[m[32m                {[m
[32m+[m[32m                    alarms[aID][1] = ena;[m
[32m+[m[32m                    String myAlarm = s + "{\"free\":" + 1 + ",\"enable\":" + ena + ",\"pin\":" + alarms[aID][2] + ",\"onHr\":" + alarms[aID][3] + ",\"onMin\":" + alarms[aID][4] + ",\"offHr\":" + alarms[aID][5] + ",\"offMin\":" + alarms[aID][6] + ",\"sun\":" + alarms[aID][7] + ",\"mon\":" + alarms[aID][8] + ",\"tue\":" + alarms[aID][9] + ",\"wed\":" + alarms[aID][10] + ",\"thu\":" + alarms[aID][11] + ",\"fri\":" + alarms[aID][12] + ",\"sat\":" + alarms[aID][13] + ",\"oneShot\":" + alarms[aID][14] + ",\"day\":" + alarms[aID][15] + ",\"month\":" + alarms[aID][16] + ",\"year\":" + alarms[aID][17] + "}";[m
[32m+[m[32m                    if (LittleFS.begin())[m
[32m+[m[32m                    {[m
[32m+[m[32m                        File wAlarm = LittleFS.open("/alarms/alarm" + String(aID), "w");[m
[32m+[m[32m                        wAlarm.print(myAlarm);[m
[32m+[m[32m                        wAlarm.close();[m
[32m+[m[32m                        LittleFS.end();[m
[32m+[m[32m                    }[m
[32m+[m[32m                    request->send(200, "text/plain", "toggled");[m
[32m+[m[32m                    return;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m            request->send(200, "text/plain", "invalid");[m
[32m+[m[32m            return;[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // Listenigng on the path for changed settings to implement the same[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.on("/changesettings", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        const char *http_username = user.c_str();[m
[32m+[m[32m        const char *http_password = lock.c_str();[m
[32m+[m[32m        if (!request->authenticate(http_username, http_password))[m
[32m+[m[32m        {[m
[32m+[m[32m            return request->requestAuthentication();[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (request->getParam("wifiname") &&[m
[32m+[m[32m            request->getParam("wifipass") &&[m
[32m+[m[32m            request->getParam("hotname") &&[m
[32m+[m[32m            request->getParam("hotpass") &&[m
[32m+[m[32m            request->getParam("lockpass") &&[m
[32m+[m[32m            request->getParam("user"))[m
[32m+[m[32m        {[m
[32m+[m[32m            String wifiname = request->getParam("wifiname")->value();[m
[32m+[m[32m            String wifipass = request->getParam("wifipass")->value();[m
[32m+[m[32m            String hotname = request->getParam("hotname")->value();[m
[32m+[m[32m            String hotpass = request->getParam("hotpass")->value();[m
[32m+[m[32m            String lockpass = request->getParam("lockpass")->value();[m
[32m+[m[32m            String username = request->getParam("user")->value();[m
[32m+[m
[32m+[m[32m            request->send(200, "text/plain", "OK");[m
[32m+[m
[32m+[m[32m            // Mounting file system to open desired files to check[m
[32m+[m[32m            // ----------------------------------------------[m
[32m+[m[32m            LittleFS.begin();[m
[32m+[m
[32m+[m[32m            // Cross Checking the settings before writing them[m
[32m+[m[32m            // ----------------------------------------------[m
[32m+[m[32m            char check = 'b';[m
[32m+[m[32m            if (ssid != wifiname)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/st", "w");[m
[32m+[m[32m                data1.print(wifiname);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m[32m            if (ssidpw != wifipass)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/stp", "w");[m
[32m+[m[32m                data1.print(wifipass);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (ap != hotname)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/ap", "w");[m
[32m+[m[32m                data1.print(hotname);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m[32m            if (appw != hotpass)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/app", "w");[m
[32m+[m[32m                data1.print(hotpass);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m[32m            if (lock != lockpass)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/lock", "w");[m
[32m+[m[32m                data1.print(lockpass);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m[32m            if (user != username)[m
[32m+[m[32m            {[m
[32m+[m[32m                File data1 = LittleFS.open("/wifi/user", "w");[m
[32m+[m[32m                data1.print(username);[m
[32m+[m[32m                data1.close();[m
[32m+[m[32m                check = 'a';[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // Unmounting the filesystem to prevent form curruption[m
[32m+[m[32m            // ----------------------------------------------[m
[32m+[m[32m            LittleFS.end();[m
[32m+[m
[32m+[m[32m            // Following code reboots the esp for conges to apply[m
[32m+[m[32m            // ----------------------------------------------[m
[32m+[m[32m            if (check != 'b')[m
[32m+[m[32m            {[m
[32m+[m[32m                delay(500);[m
[32m+[m[32m                ESP.restart();[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m        else[m
[32m+[m[32m        {[m
[32m+[m[32m            request->send(200, "text/plain", "Not in proper format!!");[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    server.on("/time", HTTP_GET, [](AsyncWebServerRequest *request) {[m
[32m+[m[32m        request->send_P(200, "text/html", give_time);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // Starting the service of the EspAsyncLibrary[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    server.begin();[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/wifiHtml.h b/src/wifiHtml.h[m
[1mnew file mode 100644[m
[1mindex 0000000..51e3616[m
[1m--- /dev/null[m
[1m+++ b/src/wifiHtml.h[m
[36m@@ -0,0 +1,272 @@[m
[32m+[m[32mconst char index_html[] PROGMEM = R"rawliteral([m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <meta charset="UTF-8" />[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge" />[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[32m+[m[32m    <title>Wifi Settings</title>[m
[32m+[m[32m    <link rel="stylesheet" href="/style.css" />[m
[32m+[m[32m    <style>[m
[32m+[m[32m      .middleIt {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m      }[m
[32m+[m[32m    </style>[m
[32m+[m[32m    <script src="/jquery.js"></script>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body style="font-size: 16px">[m
[32m+[m[32m    <div class="middleIt">[m
[32m+[m[32m      <div[m
[32m+[m[32m        class="middleIt"[m
[32m+[m[32m        id="mainForm"[m
[32m+[m[32m        style="[m
[32m+[m[32m          width: 380px;[m
[32m+[m[32m          box-shadow: -2px -2px 5px #fff, 2px 2px 5px #babecc;[m
[32m+[m[32m          border-radius: 20px;[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m        "[m
[32m+[m[32m      >[m
[32m+[m[32m        <form[m
[32m+[m[32m          method="GET"[m
[32m+[m[32m          action="#"[m
[32m+[m[32m          id="login-form"[m
[32m+[m[32m          class="login-form"[m
[32m+[m[32m          autocomplete="off"[m
[32m+[m[32m          role="main"[m
[32m+[m[32m        >[m
[32m+[m[32m          <h2>Wifi-Hotspot Settings..</h2>[m
[32m+[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="wifiname">Wifi Name* </label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="wifiname"[m
[32m+[m[32m              id="wifiname"[m
[32m+[m[32m              placeholder="Wifi Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="wifipass">Wifi Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="wifipass"[m
[32m+[m[32m              itemid="wifipass"[m
[32m+[m[32m              id="wifipass"[m
[32m+[m[32m              placeholder="Wifi Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotname">Hotspot Name*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="hotname"[m
[32m+[m[32m              id="hotname"[m
[32m+[m[32m              placeholder="Hotspot Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotpass">Hotspot Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="hotpass"[m
[32m+[m[32m              id="hotpass"[m
[32m+[m[32m              placeholder="Hotspot Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="hotname">User Name*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="text"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="username"[m
[32m+[m[32m              id="username"[m
[32m+[m[32m              placeholder="User Name"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label for="lockpass">Lock Password*</label>[m
[32m+[m[32m            <input[m
[32m+[m[32m              type="password"[m
[32m+[m[32m              class="text"[m
[32m+[m[32m              name="lockpass"[m
[32m+[m[32m              id="lockpass"[m
[32m+[m[32m              placeholder="Lock Password"[m
[32m+[m[32m              tabindex="1"[m
[32m+[m[32m              required[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <span[m
[32m+[m[32m              id="showPassword"[m
[32m+[m[32m              style="[m
[32m+[m[32m                cursor: pointer;[m
[32m+[m[32m                text-decoration: underline;[m
[32m+[m[32m                font-weight: 600;[m
[32m+[m[32m              "[m
[32m+[m[32m              >Show Passwords!![m
[32m+[m[32m            </span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <br />[m
[32m+[m[32m          <p[m
[32m+[m[32m            id="showTime"[m
[32m+[m[32m            style="color: #d1ce0d; font-size: 14px; font-weight: 600"[m
[32m+[m[32m          ></p>[m
[32m+[m
[32m+[m[32m          <button[m
[32m+[m[32m            type="submit"[m
[32m+[m[32m            name="submit"[m
[32m+[m[32m            value="Save Settings"[m
[32m+[m[32m            id="toSubmit"[m
[32m+[m[32m            class="red"[m
[32m+[m[32m          >[m
[32m+[m[32m            Save Settings[m
[32m+[m[32m          </button>[m
[32m+[m[32m        </form>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <br />[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <script>[m
[32m+[m[32m      var myOBJ = %OBJ%;[m
[32m+[m
[32m+[m[32m      $(function () {[m
[32m+[m[32m        let wifiName = $("#wifiname");[m
[32m+[m[32m        let wifiPass = $("#wifipass");[m
[32m+[m[32m        let hotName = $("#hotname");[m
[32m+[m[32m        let hotPass = $("#hotpass");[m
[32m+[m[32m        let userName = $("#username");[m
[32m+[m[32m        let lockPass = $("#lockpass");[m
[32m+[m[32m        let dTime = $("#showTime");[m
[32m+[m
[32m+[m[32m        wifiName.val(myOBJ.wifi);[m
[32m+[m[32m        wifiPass.val(myOBJ.wifipw);[m
[32m+[m[32m        hotName.val(myOBJ.ap);[m
[32m+[m[32m        hotPass.val(myOBJ.appw);[m
[32m+[m[32m        userName.val(myOBJ.user);[m
[32m+[m[32m        lockPass.val(myOBJ.lock);[m
[32m+[m
[32m+[m[32m        $("#toSubmit").click(function () {[m
[32m+[m[32m          var confirmIt = confirm([m
[32m+[m[32m            "You are one step back to change system settings. This process will reset your device!! Press OK to confirm..."[m
[32m+[m[32m          );[m
[32m+[m
[32m+[m[32m          if (confirmIt === true) {[m
[32m+[m[32m            let myLink = `/changesettings?wifiname=${wifiName.val()}&wifipass=${wifiPass.val()}&hotname=${hotName.val()}&hotpass=${hotPass.val()}&lockpass=${lockPass.val()}&user=${userName.val()}&submit=save+settings#`;[m
[32m+[m
[32m+[m[32m            console.log(myLink);[m
[32m+[m
[32m+[m[32m            var xhttp1 = new XMLHttpRequest();[m
[32m+[m[32m            xhttp1.open("GET", myLink, true);[m
[32m+[m[32m            xhttp1.send();[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        let showPwCheck = 0;[m
[32m+[m[32m        let showPass = $("#showPassword");[m
[32m+[m[32m        showPass.hover([m
[32m+[m[32m          function () {[m
[32m+[m[32m            $(this).css({ color: "#0077ff", "font-weight": "800" });[m
[32m+[m[32m          },[m
[32m+[m[32m          function () {[m
[32m+[m[32m            $(this).css({ color: "#babecc", "font-weight": "600" });[m
[32m+[m[32m          }[m
[32m+[m[32m        );[m
[32m+[m
[32m+[m[32m        showPass.click(function () {[m
[32m+[m[32m          if (showPwCheck == 0) {[m
[32m+[m[32m            wifiPass.attr("type", "text");[m
[32m+[m[32m            lockPass.attr("type", "text");[m
[32m+[m[32m            hotPass.attr("type", "text");[m
[32m+[m[32m            showPwCheck = 1;[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m          showPwCheck = 1;[m
[32m+[m[32m          wifiPass.attr("type", "password");[m
[32m+[m[32m          lockPass.attr("type", "password");[m
[32m+[m[32m          hotPass.attr("type", "password");[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        $.getJSON("/gettime", (data, status) => {[m
[32m+[m[32m          var myWeekDay = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Sun",[m
[32m+[m[32m            "Mon",[m
[32m+[m[32m            "Tue",[m
[32m+[m[32m            "Wed",[m
[32m+[m[32m            "Thu",[m
[32m+[m[32m            "Fri",[m
[32m+[m[32m            "Sat",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let myMonth = [[m
[32m+[m[32m            "omit",[m
[32m+[m[32m            "Jan",[m
[32m+[m[32m            "Feb",[m
[32m+[m[32m            "Mar",[m
[32m+[m[32m            "Apr",[m
[32m+[m[32m            "May",[m
[32m+[m[32m            "Jun",[m
[32m+[m[32m            "Jul",[m
[32m+[m[32m            "Aug",[m
[32m+[m[32m            "Sep",[m
[32m+[m[32m            "Oct",[m
[32m+[m[32m            "Nov",[m
[32m+[m[32m            "Dec",[m
[32m+[m[32m          ];[m
[32m+[m[32m          let secIncre = data.sec;[m
[32m+[m[32m          let minIncre = data.min;[m
[32m+[m
[32m+[m[32m          setInterval(() => {[m
[32m+[m[32m            if (secIncre == 60) {[m
[32m+[m[32m              minIncre++;[m
[32m+[m[32m              secIncre = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m            if (minIncre == 60) {[m
[32m+[m[32m              window.location.reload();[m
[32m+[m[32m            }[m
[32m+[m[32m            let showTime =[m
[32m+[m[32m              "" +[m
[32m+[m[32m              myWeekDay[data.wDay] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              myMonth[data.mon] +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.day +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.yr +[m
[32m+[m[32m              " " +[m
[32m+[m[32m              data.hr +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              minIncre +[m
[32m+[m[32m              ":" +[m
[32m+[m[32m              secIncre +[m
[32m+[m[32m              " (Local Time)";[m
[32m+[m[32m            dTime.text(showTime);[m
[32m+[m[32m            secIncre++;[m
[32m+[m[32m          }, 1000);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m    </script>[m
[32m+[m[32m  </body>[m
[32m+[m[32m</html>[m
[32m+[m
[32m+[m[32m)rawliteral";[m
\ No newline at end of file[m
[1mdiff --git a/src/wifiSetup.h b/src/wifiSetup.h[m
[1mnew file mode 100644[m
[1mindex 0000000..4d33f6c[m
[1m--- /dev/null[m
[1m+++ b/src/wifiSetup.h[m
[36m@@ -0,0 +1,102 @@[m
[32m+[m[32m// ================================= Wifi SETUP functions =============================[m
[32m+[m[32m// ====================================================================================[m
[32m+[m[32m// Following function contains all code for wifi setup and wifi webserver config[m
[32m+[m[32m// ‚ïª ‚ïª‚ïª‚îè‚îÅ‚ï∏‚ïª   ‚îè‚îÅ‚îì‚îè‚îÅ‚ï∏‚ï∫‚î≥‚ï∏‚ïª ‚ïª‚îè‚îÅ‚îì[m
[32m+[m[32m// ‚îÉ‚ïª‚îÉ‚îÉ‚î£‚ï∏ ‚îÉ   ‚îó‚îÅ‚îì‚î£‚ï∏  ‚îÉ ‚îÉ ‚îÉ‚î£‚îÅ‚îõ[m
[32m+[m[32m// ‚îó‚îª‚îõ‚ïπ‚ïπ  ‚ïπ   ‚îó‚îÅ‚îõ‚îó‚îÅ‚ï∏ ‚ïπ ‚îó‚îÅ‚îõ‚ïπ[m
[32m+[m[32m// ‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏‚ï∫‚îÅ‚ï∏[m
[32m+[m[32mvoid setWifi()[m
[32m+[m[32m{[m
[32m+[m[32m    // Reading all the data in setup mode for performance[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    LittleFS.begin();[m
[32m+[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    File data1 = LittleFS.open("/wifi/st", "r");[m
[32m+[m[32m    String getssid;[m
[32m+[m[32m    while (data1.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data1.read();[m
[32m+[m[32m        getssid.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data1.close();[m
[32m+[m[32m    ssid = getssid;[m
[32m+[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    File data2 = LittleFS.open("/wifi/stp", "r");[m
[32m+[m[32m    String getssidpw;[m
[32m+[m[32m    while (data2.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data2.read();[m
[32m+[m[32m        getssidpw.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data2.close();[m
[32m+[m[32m    ssidpw = getssidpw;[m
[32m+[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    File data3 = LittleFS.open("/wifi/ap", "r");[m
[32m+[m[32m    String getap;[m
[32m+[m[32m    while (data3.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data3.read();[m
[32m+[m[32m        getap.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data3.close();[m
[32m+[m[32m    ap = getap;[m
[32m+[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    File data4 = LittleFS.open("/wifi/app", "r");[m
[32m+[m[32m    String getappw;[m
[32m+[m[32m    while (data4.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data4.read();[m
[32m+[m[32m        getappw.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data4.close();[m
[32m+[m[32m    appw = getappw;[m
[32m+[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    File data5 = LittleFS.open("/wifi/lock", "r");[m
[32m+[m[32m    String getlock;[m
[32m+[m[32m    while (data5.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data5.read();[m
[32m+[m[32m        getlock.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data5.close();[m
[32m+[m[32m    lock = getlock;[m
[32m+[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    File data6 = LittleFS.open("/wifi/user", "r");[m
[32m+[m[32m    String getuser;[m
[32m+[m[32m    while (data6.available())[m
[32m+[m[32m    {[m
[32m+[m[32m        char a = data6.read();[m
[32m+[m[32m        getuser.concat(a);[m
[32m+[m[32m    }[m
[32m+[m[32m    data6.close();[m
[32m+[m[32m    user = getuser;[m
[32m+[m
[32m+[m[32m    // Unmounting file system[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    LittleFS.end();[m
[32m+[m
[32m+[m[32m    String myObj = s + "{wifi:'" + ssid + "',wifipw:'" + ssidpw + "',ap:'" + ap + "',appw:'" + appw + "',lock:'" + lock + "',user:'" + user + "'}";[m
[32m+[m
[32m+[m[32m    // Starting serial monitor service[m
[32m+[m[32m    // ----------------------------------------------[m
[32m+[m[32m    Serial.begin(9600);[m
[32m+[m
[32m+[m[32m    // Printing on the serial monitor[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    Serial.println(myObj);[m
[32m+[m
[32m+[m[32m    // Wifi Connection settings[m
[32m+[m[32m    // -----------------------------------------------[m
[32m+[m[32m    WiFi.mode(WIFI_AP_STA);[m
[32m+[m[32m    if (WiFi.status() != WL_CONNECTED)[m
[32m+[m[32m    {[m
[32m+[m[32m        WiFi.begin(ssid, ssidpw);[m
[32m+[m[32m    }[m
[32m+[m[32m    WiFi.softAP(ap, appw);[m
[32m+[m[32m}[m
\ No newline at end of file[m
